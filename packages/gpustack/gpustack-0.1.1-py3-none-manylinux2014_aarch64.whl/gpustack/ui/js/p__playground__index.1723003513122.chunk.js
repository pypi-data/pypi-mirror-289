"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[268],{47176:function(e,n,t){var s=t(26068),r=t.n(s),a=t(48305),l=t.n(a),o=t(84353),i=t(6434),c=t(32382),u=t(18953),d=t(64518),m=t(66551),p=t(99013),f=t.n(p),h=t(50959),g=t(11527);n.Z=function(e){var n=e.text,t=e.disabled,s=e.type,a=void 0===s?"text":s,p=e.shape,v=void 0===p?"circle":p,x=e.fontSize,j=void 0===x?"14px":x,y=e.style,b=e.size,Z=void 0===b?"middle":b,S=(0,c.useIntl)(),w=(0,h.useState)(!1),k=l()(w,2),N=k[0],C=k[1],M=(0,h.useRef)(null),T=(0,h.useRef)(null);return(0,h.useEffect)((function(){return M.current&&(T.current=new(f())(M.current),T.current.on("success",(function(){C(!0),setTimeout((function(){C(!1)}),3e3)})),T.current.on("error",(function(e){u.ZP.success(S.formatMessage({id:"common.copy.fail"})),e.clearSelection()}))),function(){var e;null===(e=T.current)||void 0===e||e.destroy()}}),[M]),(0,g.jsx)(d.Z,{title:S.formatMessage({id:"common.button.copy"}),children:(0,g.jsx)(m.ZP,{className:"copy-button",ref:M,type:a,shape:v,size:Z,disabled:!!t,"data-clipboard-text":n,icon:N?(0,g.jsx)(o.Z,{style:{color:"var(--ant-color-success)",fontSize:j}}):(0,g.jsx)(i.Z,{style:r()({fontSize:j},y)})})})}},73907:function(e,n,t){var s=(0,t(79107).Z)({scriptUrl:"//at.alicdn.com/t/c/font_4613488_cpb5yo1pk77.js"});n.Z=s},94886:function(e,n,t){var s=t(26068),r=t.n(s),a=t(48305),l=t.n(a),o=t(67825),i=t.n(o),c=t(34088),u=t(79698),d=t(19392),m=t(50959),p=t(37975),f=t(11527),h=["label","placeholder","children","required","description","isInFormItems"];n.Z=function(e){var n=e.label,t=e.placeholder,s=e.children,a=e.required,o=e.description,g=e.isInFormItems,v=void 0===g||g,x=i()(e,h),j=(0,m.useState)(!1),y=l()(j,2),b=y[0],Z=y[1],S=(0,m.useRef)(null),w="";if(v){var k,N,C=null===u.Z||void 0===u.Z||null===(k=u.Z.Item)||void 0===k||null===(N=k.useStatus)||void 0===N?void 0:N.call(k);w=(null==C?void 0:C.status)||""}(0,m.useEffect)((function(){(0,c.JL)(e.value)&&Z(!0)}),[e.value]);return(0,f.jsx)(p.Z,{status:w,label:n||t,isFocus:b,required:a,description:o,disabled:e.disabled,onClick:function(){var n,t;e.disabled||b||(null===(n=S.current)||void 0===n||null===(t=n.focus)||void 0===t||t.call(n),Z(!0))},children:(0,f.jsx)(d.default,r()(r()({},x),{},{ref:S,onFocus:function(n){var t;Z(!0),null===(t=e.onFocus)||void 0===t||t.call(e,n)},onBlur:function(n){var t;e.value||Z(!1),null===(t=e.onBlur)||void 0===t||t.call(e,n)},onChange:function(n,t){var s;(0,c.JL)(n)?Z(!0):Z(!1),null===(s=e.onChange)||void 0===s||s.call(e,n,t)},notFoundContent:null,children:s}))})}},73083:function(e,n,t){t.d(n,{d:function(){return s}});var s={default:500,large:600,small:400,mini:300}},28434:function(e,n,t){t.d(n,{Z:function(){return l}});var s=t(32699),r=t.n(s),a=t(50959);function l(e,n){var t=(0,a.useRef)(!1),s=(0,a.useRef)(e),l=(0,a.useRef)(n),o=(0,a.useRef)(null==n?void 0:n.toBottom),i=r().debounce((function(){t.current=!1}),5e3),c=function e(){var n,r,a,i=(null===(n=s.current)||void 0===n?void 0:n.current)||{},c=i.scrollHeight,u=i.clientHeight,d=i.scrollTop;null!==(r=l.current)&&void 0!==r&&r.toBottom&&o.current&&c>u+d?(s.current.current.scrollTop=c,t.current=!1):!t.current&&c>u+d&&null!==(a=s.current)&&void 0!==a&&a.current&&(s.current.current.scrollTop+=10,window.requestAnimationFrame(e))};return{handleContentWheel:function(e){t.current=!0,i()},updateScrollerPosition:function(){t.current||window.requestAnimationFrame(c)},scroller:s}}},76398:function(e,n,t){t.d(n,{Z:function(){return Z}});var s=t(26068),r=t.n(s),a=t(15558),l=t.n(a),o=t(48305),i=t.n(o),c=t(19392),u=t(50959),d=t(47176),m=t(11527),p=function(e){var n=e.header,t=e.children,s=e.copyText,r=e.langOptions,a=e.onChangeLang,l=e.defaultValue,o=e.showHeader,i=void 0===o||o,u=function(e){null==a||a(e)};return(0,m.jsxs)("div",{className:"editor-wrap",children:[n?(0,m.jsx)("div",{className:"editor-header",children:n}):i?(0,m.jsxs)("div",{className:"editor-header",children:[(0,m.jsx)(c.default,{defaultValue:l,style:{width:120},size:"middle",variant:"filled",options:r,onChange:u}),(0,m.jsx)(d.Z,{text:s,size:"small",style:{color:"rgba(255,255,255,.7)"}})]}):null,(0,m.jsx)("div",{className:"editor-content",children:t})]})},f=u.memo(p),h=t(24770),g=t(59874),v=t(32382),x=t(48157),j=t(66551),y=t(32699),b=t.n(y),Z=function(e){var n=e||{},t=n.title,s=n.open,a=n.onCancel,o=n.systemMessage,c=n.messageList,d=n.parameters,p=void 0===d?{}:d,y=n.apiType,Z=void 0===y?"chat":y,S=(0,v.useIntl)(),w=(0,u.useRef)(null),k=(0,u.useState)(!1),N=i()(k,2),C=N[0],M=N[1],T=(0,u.useState)(""),_=i()(T,2),I=_[0],F=_[1],P=(0,u.useState)("shell"),R=i()(P,2),A=R[0],z=R[1],E="".concat(window.location.origin,"/v1-openai"),O="chat"===Z?"chat.completions":"embeddings",V="chat"===Z?"chat/completions":"embeddings",U="chat"===Z?"choices[0].message.content":"data[0].embedding",B=function(){if("shell"===A){var e=[].concat(o?[{role:"system",content:o}]:[],l()(b().map(c,(function(e){return{role:e.role,content:e.content}})))),n="curl ".concat(window.location.origin,"/v1-openai/").concat(V,' \\\n-H "Content-Type: application/json" \\\n-H "Authorization: Bearer ${YOUR_GPUSTACK_API_KEY}" \\\n-d \'').concat(JSON.stringify(r()(r()({},p),e.length>0?{messages:e}:{}),null,2),"'");F(n)}else if("javascript"===A){var t=[].concat(o?[{role:"system",content:o}]:[],l()(b().map(c,(function(e){return{role:e.role,content:e.content}})))),s='const OpenAI = require("openai");\n\nconst openai = new OpenAI({\n  "apiKey": "YOUR_GPUSTACK_API_KEY",\n  "baseURL": "'.concat(E,'"\n});\n\nasync function main(){\n  const params = ').concat(JSON.stringify(r()(r()({},p),t.length>0?{messages:t}:{}),null,4),";\nconst response = await openai.").concat(O,".create(params);\n  console.log(response.").concat(U,");\n}\nmain();");F(s)}else if("python"===A){var a=b().keys(p).reduce((function(e,n){if(null===p[n])return e;var t="string"==typeof p[n]?'"'.concat(p[n],'"'):p[n];return e+"  ".concat(n,"=").concat(t,",\n")}),""),i=o?[{role:"system",content:o}]:[],u="chat"===Z?"messages=".concat(JSON.stringify([].concat(i,l()(b().map(c,(function(e){return{role:e.role,content:e.content}})))),null,2)):"",d='from openai import OpenAI\n\nclient = OpenAI(\n  base_url="'.concat(E,'", \n  api_key="YOUR_GPUSTACK_API_KEY"\n)\n\nresponse = client.').concat(O,".create(\n").concat(a,"  ").concat(u,")\nprint(response.").concat(U,")");F(d)}w.current&&setTimeout((function(){var e,n;null===(e=w.current)||void 0===e||null===(n=e.getAction)||void 0===n||null===(n=n.call(e,"editor.action.formatDocument"))||void 0===n||n.run().then((function(){}))}),100)};return(0,u.useEffect)((function(){B()}),[A,o,c,p]),(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(x.Z,{title:t,open:s,centered:!0,onCancel:function(){z("shell"),a()},destroyOnClose:!0,closeIcon:!0,maskClosable:!1,keyboard:!1,width:600,footer:null,children:[(0,m.jsx)("div",{style:{marginBottom:"10px"},children:S.formatMessage({id:"playground.viewcode.info"})}),(0,m.jsxs)("div",{children:[(0,m.jsx)(f,{copyText:I,langOptions:[{label:"Curl",value:"shell"},{label:"Python",value:"python"},{label:"Nodejs",value:"javascript"}],defaultValue:"shell",showHeader:C,onChangeLang:function(e){z(e)},children:(0,m.jsx)(g.ZP,{height:380,theme:"vs-dark",className:"monaco-editor",defaultLanguage:"shell",language:A,value:I,options:{minimap:{enabled:!1},hover:{enabled:!1},readOnly:!0,formatOnType:!0,formatOnPaste:!0,fontWeight:"bold",scrollbar:{verticalSliderSize:8}},beforeMount:function(e){e.languages.typescript.javascriptDefaults.setDiagnosticsOptions({noSemanticValidation:!1,noSyntaxValidation:!1,diagnosticCodesToIgnore:[80001]})},onMount:function(e,n){w.current=e,M(!0)}})}),(0,m.jsxs)("div",{style:{marginTop:10,display:"flex",alignItems:"baseline"},children:[(0,m.jsx)(h.Z,{className:"m-r-8"}),(0,m.jsx)("span",{children:S.formatMessage({id:"playground.viewcode.tips"},{here:(0,m.jsx)(j.ZP,{type:"link",size:"small",href:"#/api-keys",target:"_blank",style:{paddingInline:2},children:(0,m.jsxs)("span",{children:[" ",S.formatMessage({id:"playground.viewcode.here"})]})})})})]})]})]})})}},13274:function(e,n,t){t.r(n),t.d(n,{default:function(){return he}});var s=t(48305),r=t.n(s),a=t(73907),l=t(67399),o=t(32382),i=t(66551),c=t(35623),u=t(82187),d=t.n(u),m=t(50959),p=t(90228),f=t.n(p),h=t(87999),g=t.n(h),v=t(26068),x=t.n(v),j=t(15558),y=t.n(j),b=t(11527),Z=(0,m.forwardRef)((function(e,n){var t=e.minHeight,s=void 0===t?50:t,a=e.header,l=e.variant,o=void 0===l?"bordered":l,i=e.children,c=e.setCollapsed,u=(0,m.useState)(!0),p=r()(u,2),f=p[0],h=p[1],g=(0,m.useState)(0),v=r()(g,2),x=v[0],j=v[1],y=(0,m.useRef)(null);(0,m.useEffect)((function(){var e;f?j((null==y||null===(e=y.current)||void 0===e?void 0:e.scrollHeight)||0):j(0)}),[f]);var Z=function(){var e;j((null==y||null===(e=y.current)||void 0===e?void 0:e.scrollHeight)||0)};return(0,m.useImperativeHandle)(n,(function(){return{setHeightByContent:Z}})),(0,b.jsxs)("div",{className:d()("transition-wrapper",{bordered:"bordered"===o,filled:"filled"===o}),children:[(0,b.jsx)("div",{onClick:function(){h(!f),null==c||c(!f)},className:"header",style:{height:s},children:a}),(0,b.jsx)("div",{className:"transition-content-wrapper",style:{minHeight:f?x:0,height:f?"auto":0,padding:f?"8px":"0 8px"},ref:y,children:(0,b.jsx)("div",{className:"transition-content",children:i})})]})})),S={CREATE:["ctrl+shift+n","meta+shift+n"],SAVE:["ctrl+s","meta+s"],SUBMIT:["ctrl+enter","meta+enter"],SAVEAS:["ctrl+shift+s","meta+shift+s"],OPEN:["ctrl+o","meta+o"],CANCEL:["ctrl+w","meta+w"],DELETE:["delete"],COPY:["ctrl+c","meta+c"],REFRESH:["ctrl+r","meta+r"],EDIT:["ctrl+e","meta+e"],SEARCH:["ctrl+f","meta+f"],RESET:["ctrl+shift+r","meta+shift+r"]},w=t(28434),k=t(28791),N=function(e){var n,t=/data:\s*({.*?})(?=\n|$)/g,s=[];if(!e)return s;for(;null!==(n=t.exec(e));)try{s.push(JSON.parse(n[1]))}catch(e){continue}return s},C=function(){var e=g()(f()().mark((function e(n){var t,s,r,a,l,o;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.method||"POST",r=n.url,n.params&&(r="".concat(r,"?").concat(k.Z.stringify(n.params))),e.next=5,fetch(r,{method:s,body:"POST"===s?JSON.stringify(n.data):null,signal:n.signal,headers:{"Content-Type":"application/json"}});case 5:if((a=e.sent).ok){e.next=9;break}throw new Error("Network response was not ok");case 9:return l=null==a||null===(t=a.body)||void 0===t?void 0:t.getReader(),o=new TextDecoder("utf-8"),e.abrupt("return",{reader:l,decoder:o});case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),M=function(){var e=g()(f()().mark((function e(n,t,s){var r,a,l,o;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.read();case 2:if(r=e.sent,a=r.done,l=r.value,!a){e.next=8;break}return e.abrupt("return");case 8:return o=t.decode(l,{stream:!0}),N(o).forEach((function(e){null==s||s(e)})),e.next=13,M(n,t,s);case 13:case"end":return e.stop()}}),e)})));return function(n,t,s){return e.apply(this,arguments)}}(),T=t(25633),_=t(8274),I=t(64518),F=t(99158),P=t(4542),R=t(32699),A=t.n(R),z=t(94299),E="/v1-openai/chat/completions";var O=function(){var e=g()(f()().mark((function e(n){return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("".concat("/v1-openai/models"),{method:"GET",params:n}));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),V={User:"user",Assistant:"assistant",System:"system"},U=(V.User,V.Assistant,t(34088)),B=t(10822),q=t(26657),H=t(34828),L=t(65863),D=t(80613),J=t(81126),K=function(e){var n=(0,U.oc)(),t=(0,o.useIntl)(),s=e.onSubmit,r=e.onClear,l=e.onStop,c=e.onNewMessage,u=(e.onView,e.feedback),d=e.disabled,m=e.hasTokenResult,p=e.selectedModel;(0,z.y1)(S.SUBMIT.join(","),(function(){s()}),{enabled:!d});V.User,t.formatMessage({id:"playground.user"}),V.Assistant,t.formatMessage({id:"playground.assistant"});return(0,b.jsx)("div",{className:"chat-footer",children:(0,b.jsxs)(L.Z,{style:{width:"100%"},children:[(0,b.jsx)(D.Z,{lg:m?8:12,xs:24,sm:24,md:24,children:(0,b.jsxs)(J.Z,{size:20,children:[(0,b.jsx)(i.ZP,{disabled:d,icon:(0,b.jsx)(B.Z,{}),onClick:c,children:t.formatMessage({id:"playground.newMessage"})}),(0,b.jsx)(i.ZP,{icon:(0,b.jsx)(q.Z,{}),onClick:r,disabled:d,children:t.formatMessage({id:"common.button.clear"})})]})}),(0,b.jsx)(D.Z,{lg:m?8:0,xs:m?24:0,sm:m?24:0,md:m?24:0,children:u}),(0,b.jsx)(D.Z,{lg:m?8:12,xs:24,sm:24,md:24,style:{textAlign:"right"},children:(0,b.jsx)(J.Z,{size:20,children:d?(0,b.jsx)(i.ZP,{type:"primary",onClick:l,icon:(0,b.jsx)(a.Z,{type:"icon-stop1"}),children:(0,b.jsx)("span",{children:t.formatMessage({id:"common.button.stop"})})}):(0,b.jsxs)(i.ZP,{type:"primary",disabled:d||!p,onClick:s,children:[t.formatMessage({id:"common.button.submit"}),(0,b.jsx)("span",{className:"m-l-5 opct-7",children:n.isMac?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(a.Z,{type:"icon-command"})," +"," ",(0,b.jsx)(H.Z,{})]}):(0,b.jsxs)(b.Fragment,{children:["CTRL + ",(0,b.jsx)(H.Z,{})]})})]})})})]})})},Y=t(47176),G=t(92420),W=function(e){var n=e.message,t=e.isFocus,s=e.onDelete,a=e.updateMessage,l=e.onSubmit,c=e.loading,u=(0,o.useIntl)(),d=(0,m.useState)(!1),p=r()(d,2),f=(p[0],p[1],(0,m.useState)(!1)),h=r()(f,2),g=(h[0],h[1],(0,m.useState)(t)),v=r()(g,2),x=v[0],j=v[1],y=(0,m.useRef)(null);(0,m.useEffect)((function(){y.current&&t&&y.current.focus()}),[t]);var Z=function(e){a({role:e.role,content:e.message,uid:n.uid})};return(0,z.y1)(S.SUBMIT,(function(){y.current.blur(),l()}),{enabled:x,enableOnFormTags:x,preventDefault:!0}),(0,b.jsxs)("div",{className:"message-item",children:[(0,b.jsx)("div",{className:"role-type",children:(0,b.jsx)(i.ZP,{onClick:function(){var e=n.role===V.User?V.Assistant:V.User;Z({role:e,message:n.content})},type:"text",children:u.formatMessage({id:"playground.".concat(n.role)})})}),(0,b.jsx)("div",{className:"message-content-input",children:(0,b.jsx)(F.Z.TextArea,{ref:y,style:{paddingBlock:"12px"},value:n.content,autoSize:!0,variant:"filled",readOnly:c,onChange:function(e){Z({role:n.role,message:e.target.value})},onFocus:function(){j(!0)},onBlur:function(){j(!1)}})}),(0,b.jsx)("div",{className:"delete-btn",children:(0,b.jsxs)(J.Z,{size:5,children:[n.content&&(0,b.jsx)(Y.Z,{text:n.content,size:"small",shape:"default",type:"default",fontSize:"12px"}),(0,b.jsx)(I.Z,{title:u.formatMessage({id:"common.button.delete"}),children:(0,b.jsx)(i.ZP,{size:"small",onClick:function(){s()},icon:(0,b.jsx)(G.Z,{})})})]})})]})},$=function(e){var n=(0,o.useIntl)(),t=e.usage;return t?(0,b.jsxs)("div",{className:"reference-params",children:[(0,b.jsx)("span",{className:"usage",children:(0,b.jsx)(I.Z,{title:(0,b.jsxs)(J.Z,{children:[(0,b.jsxs)("span",{children:[n.formatMessage({id:"playground.completion"}),":"," ",t.completion_tokens]}),(0,b.jsxs)("span",{children:[n.formatMessage({id:"playground.prompt"}),":"," ",t.prompt_tokens]})]}),children:(0,b.jsxs)("span",{children:[n.formatMessage({id:"playground.tokenusage"}),":"," ",t.total_tokens]})})}),(0,b.jsx)("span",{className:"usage",children:(0,b.jsx)(I.Z,{title:(0,b.jsxs)(J.Z,{children:[(0,b.jsxs)("span",{children:["TPOT: ",A().round(t.time_per_output_token_ms,2)," ms"]}),(0,b.jsxs)("span",{children:["TTFT: ",A().round(t.time_to_first_token_ms,2)," ms"]})]}),children:(0,b.jsxs)("span",{children:[n.formatMessage({id:"playground.tokenoutput"}),":"," ",A().round(t.tokens_per_second,2)," Tokens/s"]})})})]}):null},Q=t(76398),X=(0,m.forwardRef)((function(e,n){var t=e.parameters,s=(0,m.useRef)(0),a=(0,m.useState)([{role:"user",content:"",uid:s.current}]),l=r()(a,2),c=l[0],u=l[1],d=(0,o.useIntl)(),p=(0,m.useState)(""),h=r()(p,2),v=h[0],j=h[1],k=(0,m.useState)(!0),N=r()(k,2),R=N[0],O=N[1],U=(0,m.useState)(!1),B=r()(U,2),q=B[0],H=B[1],L=(0,m.useState)(!1),D=r()(L,2),J=D[0],Y=D[1],G=(0,m.useState)(-1),X=r()(G,2),ee=X[0],ne=X[1],te=(0,m.useState)(null),se=r()(te,2),re=se[0],ae=se[1],le=(0,m.useState)(!1),oe=r()(le,2),ie=oe[0],ce=oe[1],ue=(0,m.useRef)(null),de=(0,m.useRef)(""),me=(0,m.useRef)(null),pe=(0,m.useRef)(null),fe=(0,w.Z)(pe,{toBottom:!0}),he=fe.updateScrollerPosition,ge=fe.handleContentWheel;(0,m.useEffect)((function(){he()}),[c]),(0,m.useImperativeHandle)(n,(function(){return{viewCode:function(){H(!0)}}}));var ve=function(){s.current=s.current+1},xe=function(e){e&&(A().get(e,"choices.0.finish_reason")?ae(x()({},null==e?void 0:e.usage)):(de.current=de.current+A().get(e,"choices.0.delta.content",""),u([].concat(y()(c),[{role:V.Assistant,content:de.current,uid:s.current}]))))},je=function(){var e=g()(f()().mark((function e(){var n,s,r,a,l,o,i;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.model){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,Y(!0),ve(),ae(null),null===(n=me.current)||void 0===n||null===(s=n.abort)||void 0===s||s.call(n),me.current=new AbortController,r=me.current.signal,de.current="",a=x()(x()({messages:v?[{role:V.System,content:v}].concat(y()(c)):y()(c)},t),{},{stream:!0}),e.next=13,C({data:a,url:E,signal:r});case 13:if(l=e.sent){e.next=16;break}return e.abrupt("return");case 16:return o=l.reader,i=l.decoder,e.next=19,M(o,i,(function(e){xe(e)}));case 19:Y(!1),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(2),Y(!1);case 26:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(){return e.apply(this,arguments)}}(),ye=function(){je()};return(0,z.y1)(S.SUBMIT,(function(){ye()}),{enabled:ie&&!J,enableOnFormTags:ie&&!J,preventDefault:!0}),(0,b.jsxs)("div",{className:"ground-left",children:[(0,b.jsxs)("div",{className:"message-list-wrap",ref:pe,onWheel:ge,children:[(0,b.jsx)("div",{style:{marginBottom:40},children:(0,b.jsx)(Z,{header:(0,b.jsxs)("div",{className:"system-message-wrap ",children:[(0,b.jsx)("span",{className:"title",children:d.formatMessage({id:"playground.system"})}),(0,b.jsx)(I.Z,{title:R?d.formatMessage({id:"common.button.collapse"}):d.formatMessage({id:"common.button.expand"}),children:(0,b.jsx)(i.ZP,{size:"small",children:R?(0,b.jsx)(T.Z,{}):(0,b.jsx)(_.Z,{})})})]}),variant:"filled",setCollapsed:O,ref:ue,children:(0,b.jsx)(F.Z.TextArea,{value:v,variant:"filled",autoSize:!0,onFocus:function(){ce(!0)},onBlur:function(){ce(!1)},style:{minHeight:40},placeholder:d.formatMessage({id:"playground.system.tips"}),onChange:function(e){j(e.target.value)}})})}),(0,b.jsxs)("div",{children:[c.map((function(e,n){return(0,b.jsx)(W,{isFocus:n===ee,islast:n===c.length-1,loading:J,onDelete:function(){return function(e){c.splice(e,1),u(y()(c))}(n)},updateMessage:function(e){return function(e,n){c[e]=n,u(y()(c))}(n,e)},onSubmit:ye,message:e},e.uid)})),J&&(0,b.jsx)(P.Z,{children:(0,b.jsx)("div",{style:{height:"46px"}})})]})]}),(0,b.jsx)("div",{className:"ground-left-footer",children:(0,b.jsx)(K,{onClear:function(){c.length&&(ve(),u([{role:V.User,content:"",uid:s.current}]))},onNewMessage:function(e){var n;c.push({role:(null===(n=A().last(c))||void 0===n?void 0:n.role)===V.User?V.Assistant:V.User,content:"",uid:s.current+1}),ve(),u(y()(c)),ne(c.length-1)},onSubmit:ye,onView:function(){H(!0)},onStop:function(){var e,n;null===(e=me.current)||void 0===e||null===(n=e.abort)||void 0===n||n.call(e),Y(!1)},disabled:J,selectedModel:t.model,hasTokenResult:!!re,feedback:(0,b.jsx)($,{usage:re})})}),(0,b.jsx)(Q.Z,{open:q,systemMessage:v,messageList:c,parameters:t,onCancel:function(){H(!1)},title:d.formatMessage({id:"playground.viewcode"})})]})})),ee=X,ne=t(82092),te=t.n(ne),se=t(6451),re=t(63109),ae=function(e){var n=e.children,t=e.label,s=e.status,r=e.className,a=e.disabled,l=e.required,o=e.variant,i=e.style,c=e.description;return(0,b.jsxs)("div",{style:x()({},i),className:d()(re.Z.wrapper,re.Z["validate-status-".concat(s)],a?re.Z["seal-input-wrapper-disabled"]:"","filled"===o?re.Z.filled:"","borderless"===o?re.Z.borderless:"",r?re.Z[r]:""),children:[(0,b.jsx)("label",{className:d()(re.Z.label,re.Z["isfoucs-has-value"]),children:(0,b.jsx)(se.Z,{label:t,required:l,description:c})}),(0,b.jsx)("div",{style:{padding:"0 calc(var(--ant-padding-sm) - 5px)",width:"100%"},children:n})]})},le=t(99494),oe=t(94886),ie=t(73083),ce=t(56280),ue=t(79698),de=t(30629),me=t(55915),pe="label___Im6e1",fe=function(e){var n=e.selectedModel,t=e.setParams,s=(0,o.useIntl)(),a=(0,m.useState)([]),l=r()(a,2),i=l[0],c=l[1],u={seed:null,stop:null,temperature:1,top_p:1,max_tokens:1024},d=ue.Z.useForm(),p=r()(d,1)[0];(0,m.useEffect)((function(){var e=function(){var e=g()(f()().mark((function e(){var s,r,a;return f()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s={embedding_only:!1},e.next=4,O(s);case 4:r=e.sent,a=A().map(r.data||[],(function(e){return{value:e.id,label:e.id}})),c(a),p.setFieldsValue(x()({model:n||A().get(a,"[0].value")},u)),t(x()({model:n||A().get(a,"[0].value")},u)),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),c([]),p.setFieldsValue(x()({model:n||""},u)),t(x()({model:n||""},u));case 16:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var h=function(e,n){var s=p.getFieldsValue();p.setFieldsValue(x()(x()({},s),{},te()({},n,e))),t(x()(x()({},s),{},te()({},n,e)))},v=function(e){return(0,b.jsxs)("span",{className:pe,style:{width:ie.d.mini},children:[(0,b.jsx)("span",{className:"text",children:e.description?(0,b.jsxs)(I.Z,{title:e.description,children:[(0,b.jsxs)("span",{children:[" ",e.label]}),(0,b.jsx)("span",{className:"m-l-5",children:(0,b.jsx)(ce.Z,{})})]}):(0,b.jsx)("span",{children:e.label})}),(0,b.jsx)(de.Z,{className:"label-val",variant:"outlined",size:"small",value:p.getFieldValue(e.field),controls:!1,onChange:function(n){return h(n,e.field)}})]})};return(0,b.jsx)(ue.Z,{name:"modelparams",form:p,onValuesChange:function(e,n){null==t||t(n)},onFinish:function(e){},onFinishFailed:function(e){},children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"m-b-20 m-l-10 font-size-14",children:s.formatMessage({id:"playground.model"})}),(0,b.jsx)(ue.Z.Item,{name:"model",rules:[{required:!0,message:s.formatMessage({id:"common.form.rule.select"},{name:s.formatMessage({id:"playground.model"})})}],children:(0,b.jsx)(oe.Z,{showSearch:!0,options:i,label:s.formatMessage({id:"playground.model"})})}),(0,b.jsx)("h3",{className:"m-b-20 m-l-10 flex-between flex-center font-size-14",children:(0,b.jsx)("span",{children:s.formatMessage({id:"playground.parameters"})})}),(0,b.jsx)(ue.Z.Item,{name:"temperature",rules:[{required:!1}],children:(0,b.jsx)(ae,{label:v({field:"temperature",label:"Temperature",description:s.formatMessage({id:"playground.params.temperature.tips"})}),style:{paddingInline:0},variant:"borderless",children:(0,b.jsx)(me.Z,{defaultValue:1,max:2,step:.1,style:{marginBottom:0,marginTop:16},tooltip:{open:!1},value:p.getFieldValue("temperature")||void 0,onChange:function(e){return h(e,"temperature")}})})}),(0,b.jsx)(ue.Z.Item,{name:"max_tokens",rules:[{required:!1}],children:(0,b.jsx)(ae,{label:v({field:"max_tokens",label:"Max Tokens",description:s.formatMessage({id:"playground.params.maxtokens.tips"})}),style:{paddingInline:0},variant:"borderless",children:(0,b.jsx)(me.Z,{defaultValue:1024,max:2048,step:1,style:{marginBottom:0,marginTop:16},tooltip:{open:!1},value:p.getFieldValue("max_tokens")||void 0,onChange:function(e){return h(e,"max_tokens")}})})}),(0,b.jsx)(ue.Z.Item,{name:"top_p",rules:[{required:!1}],children:(0,b.jsx)(ae,{label:v({field:"top_p",label:"Top P",description:s.formatMessage({id:"playground.params.topp.tips"})}),style:{paddingInline:0},variant:"borderless",children:(0,b.jsx)(me.Z,{defaultValue:1,max:1,step:.1,style:{marginBottom:0,marginTop:16},tooltip:{open:!1},value:p.getFieldValue("top_p")||void 0,onChange:function(e){return h(e,"top_p")}})})}),(0,b.jsx)(ue.Z.Item,{name:"seed",rules:[{required:!1}],children:(0,b.jsx)(le.Z.Number,{label:"Seed",min:0,description:s.formatMessage({id:"playground.params.seed.tips"}),style:{width:ie.d.mini}})}),(0,b.jsx)(ue.Z.Item,{name:"stop",rules:[{required:!1}],normalize:function(e){return e||null},children:(0,b.jsx)(le.Z.Input,{allowClear:!0,label:"Stop Sequence",description:s.formatMessage({id:"playground.params.stop.tips"}),style:{width:ie.d.mini}})})]})})},he=function(){var e=(0,o.useIntl)(),n=(0,o.useSearchParams)(),t=r()(n,1)[0].get("model")||"",s=(0,m.useState)({}),u=r()(s,2),p=u[0],f=u[1],h=(0,m.useState)(!1),g=r()(h,2),v=g[0],x=g[1],j=(0,m.useRef)(null);return(0,b.jsx)(l._z,{ghost:!0,extra:[(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.ZP,{size:"middle",onClick:function(){var e,n;null===(e=j.current)||void 0===e||null===(n=e.viewCode)||void 0===n||n.call(e)},icon:(0,b.jsx)(a.Z,{type:"icon-code",className:"font-size-16"}),children:e.formatMessage({id:"playground.viewcode"})}),(0,b.jsx)(i.ZP,{size:"middle",className:"m-l-5",onClick:function(){return x(!v)},icon:(0,b.jsx)(a.Z,{type:"icon-a-layout6-line",className:"font-size-16"})})]})],className:"playground-container",children:(0,b.jsxs)("div",{className:"play-ground",children:[(0,b.jsx)("div",{className:"chat",children:(0,b.jsx)(ee,{parameters:p,ref:j})}),(0,b.jsxs)("div",{className:d()("left",{collapse:v}),children:[(0,b.jsx)("div",{className:d()("divider-line",{collapse:v}),children:(0,b.jsx)(c.Z,{type:"vertical"})}),(0,b.jsx)("div",{className:d()("params"),children:(0,b.jsx)("div",{className:d()("params-box",{collapse:v}),children:(0,b.jsx)(fe,{setParams:f,selectedModel:t})})})]})]})})}}}]);