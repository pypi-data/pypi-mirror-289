"use strict";(self.webpackChunkknx_frontend=self.webpackChunkknx_frontend||[]).push([[4114],{58636:function(e,n,t){t.d(n,{PE:function(){return s}});t(53501),t(75658);var a=t(67319),i=t(99096),r=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],s=function(e){return e.first_weekday===i.zt.language?"weekInfo"in Intl.Locale.prototype?new Intl.Locale(e.language).weekInfo.firstDay%7:(0,a.S)(e.language)%7:r.includes(e.first_weekday)?r.indexOf(e.first_weekday):1}},13634:function(e,n,t){t.d(n,{LW:function(){return h},Xs:function(){return c},fU:function(){return s},ie:function(){return l}});var a=t(45081),i=t(84656),r=t(49655),s=function(e,n,t){return o(n,t.time_zone).format(e)},o=(0,a.A)((function(e,n){return new Intl.DateTimeFormat(e.language,{hour:"numeric",minute:"2-digit",hourCycle:(0,r.J)(e)?"h12":"h23",timeZone:(0,i.w)(e.time_zone,n)})})),l=function(e,n,t){return d(n,t.time_zone).format(e)},d=(0,a.A)((function(e,n){return new Intl.DateTimeFormat(e.language,{hour:(0,r.J)(e)?"numeric":"2-digit",minute:"2-digit",second:"2-digit",hourCycle:(0,r.J)(e)?"h12":"h23",timeZone:(0,i.w)(e.time_zone,n)})})),c=function(e,n,t){return u(n,t.time_zone).format(e)},u=(0,a.A)((function(e,n){return new Intl.DateTimeFormat(e.language,{weekday:"long",hour:(0,r.J)(e)?"numeric":"2-digit",minute:"2-digit",hourCycle:(0,r.J)(e)?"h12":"h23",timeZone:(0,i.w)(e.time_zone,n)})})),h=function(e,n,t){return f(n,t.time_zone).format(e)},f=(0,a.A)((function(e,n){return new Intl.DateTimeFormat("en-GB",{hour:"numeric",minute:"2-digit",hour12:!1,timeZone:(0,i.w)(e.time_zone,n)})}))},84656:function(e,n,t){t.d(n,{w:function(){return c}});var a,i,r,s,o,l=t(99096),d=null!==(a=null===(i=(r=Intl).DateTimeFormat)||void 0===i||null===(s=(o=i.call(r)).resolvedOptions)||void 0===s?void 0:s.call(o).timeZone)&&void 0!==a?a:"UTC",c=function(e,n){return e===l.Wj.local&&"UTC"!==d?d:n}},49655:function(e,n,t){t.d(n,{J:function(){return r}});t(53501),t(34517);var a=t(45081),i=t(99096),r=(0,a.A)((function(e){if(e.time_format===i.Hg.language||e.time_format===i.Hg.system){var n=e.time_format===i.Hg.language?e.language:void 0;return new Date("January 1, 2023 22:00:00").toLocaleString(n).includes("10")}return e.time_format===i.Hg.am_pm}))},99096:function(e,n,t){t.d(n,{ow:function(){return s},zt:function(){return o},jG:function(){return a},Hg:function(){return i},Wj:function(){return r}});t(94881),t(1781),t(43859);var a=function(e){return e.language="language",e.system="system",e.comma_decimal="comma_decimal",e.decimal_comma="decimal_comma",e.space_comma="space_comma",e.none="none",e}({}),i=function(e){return e.language="language",e.system="system",e.am_pm="12",e.twenty_four="24",e}({}),r=function(e){return e.local="local",e.server="server",e}({}),s=function(e){return e.language="language",e.system="system",e.DMY="DMY",e.MDY="MDY",e.YMD="YMD",e}({}),o=function(e){return e.language="language",e.monday="monday",e.tuesday="tuesday",e.wednesday="wednesday",e.thursday="thursday",e.friday="friday",e.saturday="saturday",e.sunday="sunday",e}({})},44114:function(e,n,t){t.r(n);var a,i,r=t(94881),s=t(1781),o=t(95803),l=t(22481),d=t(66123),c=t(6238),u=t(36683),h=t(89231),f=t(29864),v=t(83647),m=t(8364),g=t(27526),y=(t(77052),t(21950),t(71936),t(60060),t(848),t(43859),t(68113),t(43618),t(66274),t(84531),t(34290),t(8339),t(52345)),_=t(20068),k=t(73330),p=t(63759),w=t(56138),b=t(21513),A=t(94061),x=t(51561),D=t(98597),z=t(196),C=t(58636),I=t(13634),O=t(49655),j=t(33167),E=(t(59373),t(61399)),S=t(99096),F=t(31447),J=t(43799),W={plugins:[p.A,k.Ay],headerToolbar:!1,initialView:"timeGridWeek",editable:!0,selectable:!0,selectMirror:!0,selectOverlap:!1,eventOverlap:!1,allDaySlot:!1,height:"parent",locales:_.A,firstDay:1,dayHeaderFormat:{weekday:"short",month:void 0,day:void 0}};(0,m.A)([(0,z.EM)("ha-schedule-form")],(function(e,n){var t,m=function(n){function t(){var n;(0,h.A)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return n=(0,f.A)(this,t,[].concat(i)),e(n),n}return(0,v.A)(t,n),(0,u.A)(t)}(n);return{F:m,d:[{kind:"field",decorators:[(0,z.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,z.MZ)({type:Boolean})],key:"new",value:function(){return!1}},{kind:"field",decorators:[(0,z.wk)()],key:"_name",value:void 0},{kind:"field",decorators:[(0,z.wk)()],key:"_icon",value:void 0},{kind:"field",decorators:[(0,z.wk)()],key:"_monday",value:void 0},{kind:"field",decorators:[(0,z.wk)()],key:"_tuesday",value:void 0},{kind:"field",decorators:[(0,z.wk)()],key:"_wednesday",value:void 0},{kind:"field",decorators:[(0,z.wk)()],key:"_thursday",value:void 0},{kind:"field",decorators:[(0,z.wk)()],key:"_friday",value:void 0},{kind:"field",decorators:[(0,z.wk)()],key:"_saturday",value:void 0},{kind:"field",decorators:[(0,z.wk)()],key:"_sunday",value:void 0},{kind:"field",decorators:[(0,z.wk)()],key:"calendar",value:void 0},{kind:"field",key:"_item",value:void 0},{kind:"set",key:"item",value:function(e){this._item=e,e?(this._name=e.name||"",this._icon=e.icon||"",this._monday=e.monday||[],this._tuesday=e.tuesday||[],this._wednesday=e.wednesday||[],this._thursday=e.thursday||[],this._friday=e.friday||[],this._saturday=e.saturday||[],this._sunday=e.sunday||[]):(this._name="",this._icon="",this._monday=[],this._tuesday=[],this._wednesday=[],this._thursday=[],this._friday=[],this._saturday=[],this._sunday=[])}},{kind:"method",key:"disconnectedCallback",value:function(){var e,n;(0,g.A)(m,"disconnectedCallback",this,3)([]),null===(e=this.calendar)||void 0===e||e.destroy(),this.calendar=void 0,null===(n=this.renderRoot.querySelector("style[data-fullcalendar]"))||void 0===n||n.remove()}},{kind:"method",key:"connectedCallback",value:function(){(0,g.A)(m,"connectedCallback",this,3)([]),this.hasUpdated&&!this.calendar&&this.setupCalendar()}},{kind:"method",key:"focus",value:function(){var e=this;this.updateComplete.then((function(){var n;return null===(n=e.shadowRoot)||void 0===n||null===(n=n.querySelector("[dialogInitialFocus]"))||void 0===n?void 0:n.focus()}))}},{kind:"method",key:"render",value:function(){return this.hass?(0,D.qy)(a||(a=(0,c.A)(['\n      <div class="form">\n        <ha-textfield\n          .value=',"\n          .configValue=","\n          @input=","\n          .label=","\n          autoValidate\n          required\n          .validationMessage=","\n          dialogInitialFocus\n        ></ha-textfield>\n        <ha-icon-picker\n          .hass=","\n          .value=","\n          .configValue=","\n          @value-changed=","\n          .label=",'\n        ></ha-icon-picker>\n        <div id="calendar"></div>\n      </div>\n    '])),this._name,"name",this._valueChanged,this.hass.localize("ui.dialogs.helper_settings.generic.name"),this.hass.localize("ui.dialogs.helper_settings.required_error_msg"),this.hass,this._icon,"icon",this._valueChanged,this.hass.localize("ui.dialogs.helper_settings.generic.icon")):D.s6}},{kind:"method",key:"willUpdate",value:function(e){if((0,g.A)(m,"willUpdate",this,3)([e]),this.calendar){(e.has("_sunday")||e.has("_monday")||e.has("_tuesday")||e.has("_wednesday")||e.has("_thursday")||e.has("_friday")||e.has("_saturday")||e.has("calendar"))&&(this.calendar.removeAllEventSources(),this.calendar.addEventSource(this._events));var n=e.get("hass");n&&n.language!==this.hass.language&&this.calendar.setOption("locale",this.hass.language)}}},{kind:"method",key:"firstUpdated",value:function(){this.setupCalendar()}},{kind:"method",key:"setupCalendar",value:function(){var e=this,n=Object.assign(Object.assign({},W),{},{locale:this.hass.language,firstDay:(0,C.PE)(this.hass.locale),slotLabelFormat:{hour:"numeric",minute:void 0,hour12:(0,O.J)(this.hass.locale),meridiem:!!(0,O.J)(this.hass.locale)&&"narrow"},eventTimeFormat:{hour:(0,O.J)(this.hass.locale)?"numeric":"2-digit",minute:(0,O.J)(this.hass.locale)?"numeric":"2-digit",hour12:(0,O.J)(this.hass.locale),meridiem:!!(0,O.J)(this.hass.locale)&&"narrow"}});n.eventClick=function(n){return e._handleEventClick(n)},n.select=function(n){return e._handleSelect(n)},n.eventResize=function(n){return e._handleEventResize(n)},n.eventDrop=function(n){return e._handleEventDrop(n)},this.calendar=new y.Vv(this.shadowRoot.getElementById("calendar"),n),this.calendar.render()}},{kind:"get",key:"_events",value:function(){var e,n=this,t=[],a=(0,d.A)(E.mx.entries());try{var i=function(){var a=(0,l.A)(e.value,2),i=a[0],r=a[1];if(!n["_".concat(r)].length)return 1;n["_".concat(r)].forEach((function(e,a){var s=(0,w.s)(new Date,i);(0,b.R)(s,new Date,{weekStartsOn:(0,C.PE)(n.hass.locale)})||(s=(0,A.f)(s,-7));var o=new Date(s),l=e.from.split(":");o.setHours(parseInt(l[0]),parseInt(l[1]),0,0);var d=new Date(s),c=e.to.split(":");d.setHours(parseInt(c[0]),parseInt(c[1]),0,0),t.push({id:"".concat(r,"-").concat(a),start:o.toISOString(),end:d.toISOString()})}))};for(a.s();!(e=a.n()).done;)i()}catch(r){a.e(r)}finally{a.f()}return t}},{kind:"method",key:"_handleSelect",value:function(e){var n=e.start,t=e.end,a=E.mx[n.getDay()],i=(0,o.A)(this["_".concat(a)]),r=Object.assign({},this._item),s=(0,I.LW)(t,Object.assign(Object.assign({},this.hass.locale),{},{time_zone:S.Wj.local}),this.hass.config);i.push({from:(0,I.LW)(n,Object.assign(Object.assign({},this.hass.locale),{},{time_zone:S.Wj.local}),this.hass.config),to:(0,x.r)(n,t)&&"0:00"!==s?s:"24:00"}),r[a]=i,(0,j.r)(this,"value-changed",{value:r}),(0,x.r)(n,t)||this.calendar.unselect()}},{kind:"method",key:"_handleEventResize",value:function(e){var n=e.event,t=n.id,a=n.start,i=n.end,r=t.split("-"),s=(0,l.A)(r,2),o=s[0],d=s[1],c=this["_".concat(o)][parseInt(d)],u=Object.assign({},this._item),h=(0,I.LW)(i,this.hass.locale,this.hass.config);u[o][d]={from:c.from,to:(0,x.r)(a,i)&&"0:00"!==h?h:"24:00"},(0,j.r)(this,"value-changed",{value:u}),(0,x.r)(a,i)||(this.requestUpdate("_".concat(o)),e.revert())}},{kind:"method",key:"_handleEventDrop",value:function(e){var n=e.event,t=n.id,a=n.start,i=n.end,r=t.split("-"),s=(0,l.A)(r,2),d=s[0],c=s[1],u=E.mx[a.getDay()],h=Object.assign({},this._item),f=(0,I.LW)(i,this.hass.locale,this.hass.config),v={from:(0,I.LW)(a,this.hass.locale,this.hass.config),to:(0,x.r)(a,i)&&"0:00"!==f?f:"24:00"};if(u===d)h[d][c]=v;else{h[d].splice(c,1);var m=(0,o.A)(this["_".concat(u)]);m.push(v),h[u]=m}(0,j.r)(this,"value-changed",{value:h}),(0,x.r)(a,i)||(this.requestUpdate("_".concat(d)),e.revert())}},{kind:"method",key:"_handleEventClick",value:(t=(0,s.A)((0,r.A)().mark((function e(n){var t,a,i,s,d,c;return(0,r.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,F.dk)(this,{title:this.hass.localize("ui.dialogs.helper_settings.schedule.delete"),text:this.hass.localize("ui.dialogs.helper_settings.schedule.confirm_delete"),destructive:!0,confirmText:this.hass.localize("ui.common.delete")});case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:t=n.event.id.split("-"),a=(0,l.A)(t,2),i=a[0],s=a[1],d=(0,o.A)(this["_".concat(i)]),c=Object.assign({},this._item),d.splice(parseInt(s),1),c[i]=d,(0,j.r)(this,"value-changed",{value:c});case 10:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{kind:"method",key:"_valueChanged",value:function(e){var n;if(this.new||this._item){e.stopPropagation();var t=e.target.configValue,a=(null===(n=e.detail)||void 0===n?void 0:n.value)||e.target.value;if(this["_".concat(t)]!==a){var i=Object.assign({},this._item);a?i[t]=a:delete i[t],(0,j.r)(this,"value-changed",{value:i})}}}},{kind:"get",static:!0,key:"styles",value:function(){return[J.RF,(0,D.AH)(i||(i=(0,c.A)(['\n        .form {\n          color: var(--primary-text-color);\n        }\n\n        ha-textfield {\n          display: block;\n          margin: 8px 0;\n        }\n\n        #calendar {\n          margin: 8px 0;\n          height: 450px;\n          width: 100%;\n          -webkit-user-select: none;\n          -ms-user-select: none;\n          user-select: none;\n          --fc-border-color: var(--divider-color);\n          --fc-event-border-color: var(--divider-color);\n        }\n\n        .fc-v-event .fc-event-time {\n          white-space: inherit;\n        }\n        .fc-theme-standard .fc-scrollgrid {\n          border: 1px solid var(--divider-color);\n          border-radius: var(--mdc-shape-small, 4px);\n        }\n\n        .fc-scrollgrid-section-header td {\n          border: none;\n        }\n        :host([narrow]) .fc-scrollgrid-sync-table {\n          overflow: hidden;\n        }\n        table.fc-scrollgrid-sync-table\n          tbody\n          tr:first-child\n          .fc-daygrid-day-top {\n          padding-top: 0;\n        }\n        .fc-scroller::-webkit-scrollbar {\n          width: 0.4rem;\n          height: 0.4rem;\n        }\n        .fc-scroller::-webkit-scrollbar-thumb {\n          -webkit-border-radius: 4px;\n          border-radius: 4px;\n          background: var(--scrollbar-thumb-color);\n        }\n        .fc-scroller {\n          overflow-y: auto;\n          scrollbar-color: var(--scrollbar-thumb-color) transparent;\n          scrollbar-width: thin;\n        }\n\n        .fc-timegrid-event-short .fc-event-time:after {\n          content: ""; /* prevent trailing dash in half hour events since we do not have event titles */\n        }\n\n        a {\n          color: inherit !important;\n        }\n\n        th.fc-col-header-cell.fc-day {\n          background-color: var(--table-header-background-color);\n          color: var(--primary-text-color);\n          font-size: 11px;\n          font-weight: bold;\n          text-transform: uppercase;\n        }\n      '])))]}}]}}),D.WF)}}]);