title: SQL scheduler backend
type: object
propertyNames:
  pattern: "^[A-Za-z0-9-]*$"
properties:
  sql:
    type: connection
  sql-ro:
    type: connection
  sql-notifier:
    type: connection
  storage:
    type: storage
  connection-string:
    type: string
  automigrate:
    type: boolean
  connection-timeout:
    type: number
    minimum: 0
  lock-timeout:
    type: number
    minimum: 0
  poll-interval:
    type: number
    minimum: 0
  pool-size:
    type: integer
    minimum: 1
  max-overflow:
    type: integer
    minimum: 0
  pool-timeout:
    type: number
    minimum: 0
  pool-pre-ping:
    type: boolean
  pool-recycle:
    type: number
    minimum: 0
  connect-args:
    type: object
  pruner-job-max-age:
    type: object
    properties:
      weeks:
        type: number
        format: float
        minimum: 0
      days:
        type: number
        format: float
        minimum: 0
      hours:
        type: number
        format: float
        mininum: 0
      minutes:
        type: number
        format: float
        mininum: 0
      seconds:
        type: number
        format: float
        mininum: 0
  pruner-period:
    type: object
    properties:
      weeks:
        type: number
        format: float
        minimum: 0
      days:
        type: number
        format: float
        minimum: 0
      hours:
        type: number
        format: float
        mininum: 0
      minutes:
        type: number
        format: float
        mininum: 0
      seconds:
        type: number
        format: float
        mininum: 0
  pruner-max-delete-window:
    type: integer
    minimum: 1
  queue-timeout-job-max-age:
    type: object
    properties:
      weeks:
        type: number
        format: float
        minimum: 0
      days:
        type: number
        format: float
        minimum: 0
      hours:
        type: number
        format: float
        mininum: 0
      minutes:
        type: number
        format: float
        mininum: 0
      seconds:
        type: number
        format: float
        mininum: 0
  queue-timeout-period:
    type: object
    properties:
      weeks:
        type: number
        format: float
        minimum: 0
      days:
        type: number
        format: float
        minimum: 0
      hours:
        type: number
        format: float
        mininum: 0
      minutes:
        type: number
        format: float
        mininum: 0
      seconds:
        type: number
        format: float
        mininum: 0
  queue-timeout-max-window:
    type: integer
    minimum: 1
  action-cache:
    oneOf:
      - type: cache
      - type: "!action-cache"
  action-browser-url:
    type: string
  scheduler:
    type: scheduler
  data-store:
    type: scheduler
  property-keys:
    oneOf:
      - type: string
      - type: array
        items:
          type: string
  wildcard-property-keys:
    oneOf:
      - type: string
      - type: array
        items:
          type: string
  bot-session-keepalive-timeout:
    type: number
    minimum: 1
  max-execution-timeout:
    type: number
    minimum: 1
  logstream:
    type: object
    properties:
      url:
        type: string
      instance-name:
        type: string
      credentials:
        type: object
        properties:
          tls-client-key:
            type: string
          tls-client-cert:
            type: string
          tls-server-cert:
            type: string
        required:
          - tls-client-key
          - tls-client-cert
          - tls-server-cert
    required:
      - url
      - instance-name
  metering-service-client:
    type: "!metering-service-client"
  asset-client:
    type: "!asset-client"
  queued-action-retention-hours:
    type: number
  completed-action-retention-hours:
    type: number
  action-result-retention-hours:
    type: number
  max-job-attempts:
    type: number
    minimum: 1
required:
  - storage
