"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[76474],{33997:function(t,e,a){a.d(e,{H:function(){return n}});var i=a(94881),r=a(1781),n=(a(27934),a(21950),a(36724),a(68113),a(55888),a(56262),a(98168),a(8339),function(){var t=(0,r.A)((0,i.A)().mark((function t(e){var r,n,s,l;return(0,i.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.parentNode){t.next=2;break}throw new Error("Cannot setup Leaflet map on disconnected element");case 2:return t.next=4,Promise.all([a.e(35894),a.e(8902)]).then(a.t.bind(a,75027,23));case 4:return(r=t.sent.default).Icon.Default.imagePath="/static/images/leaflet/images/",n=r.map(e),(s=document.createElement("link")).setAttribute("href","/static/images/leaflet/leaflet.css"),s.setAttribute("rel","stylesheet"),e.parentNode.appendChild(s),n.setView([52.3731339,4.8903147],13),l=o(r).addTo(n),t.abrupt("return",[n,r,l]);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),o=function(t){return t.tileLayer("https://basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}".concat(t.Browser.retina?"@2x.png":".png"),{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>, &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",minZoom:0,maxZoom:20})}},43656:function(t,e,a){var i,r,n,o=a(6238),s=a(36683),l=a(89231),c=a(29864),d=a(83647),u=a(8364),h=(a(77052),a(40924)),p=a(196),f=a(80204),m=a(77664),v=(0,u.A)(null,(function(t,e){var a=function(e){function a(){var e;(0,l.A)(this,a);for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return e=(0,c.A)(this,a,[].concat(r)),t(e),e}return(0,d.A)(a,e),(0,s.A)(a)}(e);return{F:a,d:[{kind:"field",decorators:[(0,p.MZ)({attribute:"entity-id"})],key:"entityId",value:void 0},{kind:"field",decorators:[(0,p.MZ)({attribute:"entity-name"})],key:"entityName",value:void 0},{kind:"field",decorators:[(0,p.MZ)({attribute:"entity-picture"})],key:"entityPicture",value:void 0},{kind:"field",decorators:[(0,p.MZ)({attribute:"entity-color"})],key:"entityColor",value:void 0},{kind:"method",key:"render",value:function(){return(0,h.qy)(i||(i=(0,o.A)([' <div class="marker ','" style="','" @click="','"> '," </div> "])),this.entityPicture?"picture":"",(0,f.W)({"border-color":this.entityColor}),this._badgeTap,this.entityPicture?(0,h.qy)(r||(r=(0,o.A)(['<div class="entity-picture" style="','"></div>'])),(0,f.W)({"background-image":"url(".concat(this.entityPicture,")")})):this.entityName)}},{kind:"method",key:"_badgeTap",value:function(t){t.stopPropagation(),this.entityId&&(0,m.r)(this,"hass-more-info",{entityId:this.entityId})}},{kind:"get",static:!0,key:"styles",value:function(){return(0,h.AH)(n||(n=(0,o.A)([".marker{display:flex;justify-content:center;align-items:center;box-sizing:border-box;width:48px;height:48px;font-size:var(--ha-marker-font-size, 1.5em);border-radius:var(--ha-marker-border-radius,50%);border:1px solid var(--ha-marker-color,var(--primary-color));color:var(--primary-text-color);background-color:var(--card-background-color)}.marker.picture{overflow:hidden}.entity-picture{background-size:cover;height:100%;width:100%}"])))}}]}}),h.WF);customElements.define("ha-entity-marker",v)},76474:function(t,e,a){var i=a(1781).A,r=a(94881).A;a.a(t,function(){var t=i(r().mark((function t(e,i){var n,o,s,l,c,d,u,h,p,f,m,v,y,k,g,b,_,M,A,w,x,L,z,Z,P,E,I,O,B,C,S,T,F,N,H,V,R;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n=a(6238),o=a(94881),s=a(539),l=a(1781),c=a(66123),d=a(36683),u=a(89231),h=a(29864),p=a(83647),f=a(8364),m=a(76504),v=a(80792),a(49150),y=a(74808),k=a(77052),g=a(53156),b=a(36724),_=a(71936),M=a(848),A=a(650),w=a(68113),x=a(66274),L=a(84531),z=a(98168),Z=a(34290),P=a(79581),E=a(40924),I=a(196),O=a(64854),B=a(60441),C=a(33997),S=a(66596),T=a(82931),F=a(79661),a(12731),a(43656),!(N=e([y,O,B])).then){t.next=56;break}return t.next=52,N;case 52:t.t1=t.sent,t.t0=(0,t.t1)(),t.next=57;break;case 56:t.t0=N;case 57:H=t.t0,y=H[0],O=H[1],B=H[2],R=function(t){return"string"==typeof t?t:t.entity_id},(0,f.A)([(0,I.EM)("ha-map")],(function(t,e){var a,i,r=function(e){function a(){var e;(0,u.A)(this,a);for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return e=(0,h.A)(this,a,[].concat(r)),t(e),e}return(0,p.A)(a,e),(0,d.A)(a)}(e);return{F:r,d:[{kind:"field",decorators:[(0,I.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,I.MZ)({attribute:!1})],key:"entities",value:void 0},{kind:"field",decorators:[(0,I.MZ)({attribute:!1})],key:"paths",value:void 0},{kind:"field",decorators:[(0,I.MZ)({attribute:!1})],key:"layers",value:void 0},{kind:"field",decorators:[(0,I.MZ)({type:Boolean})],key:"autoFit",value:function(){return!1}},{kind:"field",decorators:[(0,I.MZ)({type:Boolean})],key:"renderPassive",value:function(){return!1}},{kind:"field",decorators:[(0,I.MZ)({type:Boolean})],key:"interactiveZones",value:function(){return!1}},{kind:"field",decorators:[(0,I.MZ)({type:Boolean})],key:"fitZones",value:function(){return!1}},{kind:"field",decorators:[(0,I.MZ)({attribute:"theme-mode",type:String})],key:"themeMode",value:function(){return"auto"}},{kind:"field",decorators:[(0,I.MZ)({type:Number})],key:"zoom",value:function(){return 14}},{kind:"field",decorators:[(0,I.wk)()],key:"_loaded",value:function(){return!1}},{kind:"field",key:"leafletMap",value:void 0},{kind:"field",key:"Leaflet",value:void 0},{kind:"field",key:"_resizeObserver",value:void 0},{kind:"field",key:"_mapItems",value:function(){return[]}},{kind:"field",key:"_mapFocusItems",value:function(){return[]}},{kind:"field",key:"_mapZones",value:function(){return[]}},{kind:"field",key:"_mapPaths",value:function(){return[]}},{kind:"method",key:"connectedCallback",value:function(){(0,m.A)((0,v.A)(r.prototype),"connectedCallback",this).call(this),this._loadMap(),this._attachObserver()}},{kind:"method",key:"disconnectedCallback",value:function(){(0,m.A)((0,v.A)(r.prototype),"disconnectedCallback",this).call(this),this.leafletMap&&(this.leafletMap.remove(),this.leafletMap=void 0,this.Leaflet=void 0),this._loaded=!1,this._resizeObserver&&this._resizeObserver.unobserve(this)}},{kind:"method",key:"update",value:function(t){var e,a;if((0,m.A)((0,v.A)(r.prototype),"update",this).call(this,t),this._loaded){var i=!1,n=t.get("hass");if(t.has("_loaded")||t.has("entities"))this._drawEntities(),i=!0;else if(this._loaded&&n&&this.entities){var o,s=(0,c.A)(this.entities);try{for(s.s();!(o=s.n()).done;){var l=o.value;if(n.states[R(l)]!==this.hass.states[R(l)]){this._drawEntities(),i=!0;break}}}catch(d){s.e(d)}finally{s.f()}}(t.has("_loaded")||t.has("paths"))&&this._drawPaths(),(t.has("_loaded")||t.has("layers"))&&(this._drawLayers(t.get("layers")),i=!0),(t.has("_loaded")||this.autoFit&&i)&&this.fitMap(),t.has("zoom")&&this.leafletMap.setZoom(this.zoom),(t.has("themeMode")||t.has("hass")&&(!n||(null===(e=n.themes)||void 0===e?void 0:e.darkMode)!==(null===(a=this.hass.themes)||void 0===a?void 0:a.darkMode)))&&this._updateMapStyle()}}},{kind:"get",key:"_darkMode",value:function(){return"dark"===this.themeMode||"auto"===this.themeMode&&Boolean(this.hass.themes.darkMode)}},{kind:"method",key:"_updateMapStyle",value:function(){var t=this.renderRoot.querySelector("#map");t.classList.toggle("dark",this._darkMode),t.classList.toggle("forced-dark","dark"===this.themeMode),t.classList.toggle("forced-light","light"===this.themeMode)}},{kind:"field",key:"_loading",value:function(){return!1}},{kind:"method",key:"_loadMap",value:(i=(0,l.A)((0,o.A)().mark((function t(){var e,a,i;return(0,o.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._loading){t.next=2;break}return t.abrupt("return");case 2:return(e=this.shadowRoot.getElementById("map"))||((e=document.createElement("div")).id="map",this.shadowRoot.append(e)),this._loading=!0,t.prev=5,t.next=8,(0,C.H)(e);case 8:a=t.sent,i=(0,s.A)(a,2),this.leafletMap=i[0],this.Leaflet=i[1],this._updateMapStyle(),this._loaded=!0;case 14:return t.prev=14,this._loading=!1,t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[5,,14,17]])}))),function(){return i.apply(this,arguments)})},{kind:"method",key:"fitMap",value:function(t){var e,a,i;if(this.leafletMap&&this.Leaflet&&this.hass)if(this._mapFocusItems.length||null!==(e=this.layers)&&void 0!==e&&e.length){var r,n=this.Leaflet.latLngBounds(this._mapFocusItems?this._mapFocusItems.map((function(t){return t.getLatLng()})):[]);if(this.fitZones)null===(r=this._mapZones)||void 0===r||r.forEach((function(t){n.extend("getBounds"in t?t.getBounds():t.getLatLng())}));null===(a=this.layers)||void 0===a||a.forEach((function(t){n.extend("getBounds"in t?t.getBounds():t.getLatLng())})),n=n.pad(null!==(i=null==t?void 0:t.pad)&&void 0!==i?i:.5),this.leafletMap.fitBounds(n,{maxZoom:(null==t?void 0:t.zoom)||this.zoom})}else this.leafletMap.setView(new this.Leaflet.LatLng(this.hass.config.latitude,this.hass.config.longitude),(null==t?void 0:t.zoom)||this.zoom)}},{kind:"method",key:"fitBounds",value:function(t,e){var a;if(this.leafletMap&&this.Leaflet&&this.hass){var i=this.Leaflet.latLngBounds(t).pad(null!==(a=null==e?void 0:e.pad)&&void 0!==a?a:.5);this.leafletMap.fitBounds(i,{maxZoom:(null==e?void 0:e.zoom)||this.zoom})}}},{kind:"method",key:"_drawLayers",value:function(t){if(t&&t.forEach((function(t){return t.remove()})),this.layers){var e=this.leafletMap;this.layers.forEach((function(t){e.addLayer(t)}))}}},{kind:"method",key:"_computePathTooltip",value:function(t,e){var a;return a=t.fullDatetime?(0,O.r6)(e.timestamp,this.hass.locale,this.hass.config):(0,P.c)(e.timestamp)?(0,B.ie)(e.timestamp,this.hass.locale,this.hass.config):(0,B.Xs)(e.timestamp,this.hass.locale,this.hass.config),"".concat(t.name,"<br>").concat(a)}},{kind:"method",key:"_drawPaths",value:function(){var t=this,e=this.hass,a=this.leafletMap,i=this.Leaflet;if(e&&a&&i&&(this._mapPaths.length&&(this._mapPaths.forEach((function(t){return t.remove()})),this._mapPaths=[]),this.paths)){var r=getComputedStyle(this).getPropertyValue("--dark-primary-color");this.paths.forEach((function(e){var n,o;e.gradualOpacity&&(n=e.gradualOpacity/(e.points.length-2),o=1-e.gradualOpacity);for(var s=0;s<e.points.length-1;s++){var l=e.gradualOpacity?o+s*n:void 0;t._mapPaths.push(i.circleMarker(e.points[s].point,{radius:F.C?8:3,color:e.color||r,opacity:l,fillOpacity:l,interactive:!0}).bindTooltip(t._computePathTooltip(e,e.points[s]),{direction:"top"})),t._mapPaths.push(i.polyline([e.points[s].point,e.points[s+1].point],{color:e.color||r,opacity:l,interactive:!1}))}var c=e.points.length-1;if(c>=0){var d=e.gradualOpacity?o+c*n:void 0;t._mapPaths.push(i.circleMarker(e.points[c].point,{radius:F.C?8:3,color:e.color||r,opacity:d,fillOpacity:d,interactive:!0}).bindTooltip(t._computePathTooltip(e,e.points[c]),{direction:"top"}))}t._mapPaths.forEach((function(t){return a.addLayer(t)}))}))}}},{kind:"method",key:"_drawEntities",value:function(){var t=this.hass,e=this.leafletMap,a=this.Leaflet;if(t&&e&&a&&(this._mapItems.length&&(this._mapItems.forEach((function(t){return t.remove()})),this._mapItems=[],this._mapFocusItems=[]),this._mapZones.length&&(this._mapZones.forEach((function(t){return t.remove()})),this._mapZones=[]),this.entities)){var i,r=getComputedStyle(this),n=r.getPropertyValue("--accent-color"),o=r.getPropertyValue("--secondary-text-color"),s=r.getPropertyValue("--dark-primary-color"),l=this._darkMode?"dark":"light",d=(0,c.A)(this.entities);try{for(d.s();!(i=d.n()).done;){var u=i.value,h=t.states[R(u)];if(h){var p="string"!=typeof u?u.name:void 0,f=null!=p?p:(0,T.u)(h),m=h.attributes,v=m.latitude,y=m.longitude,k=m.passive,g=m.icon,b=m.radius,_=m.entity_picture,M=m.gps_accuracy;if(v&&y)if("zone"!==(0,S.t)(h)){var A="string"!=typeof u&&"state"===u.label_mode?this.hass.formatEntityState(h):null!=p?p:f.split(" ").map((function(t){return t[0]})).join("").substr(0,3),w=a.marker([v,y],{icon:a.divIcon({html:'\n              <ha-entity-marker\n                entity-id="'.concat(R(u),'"\n                entity-name="').concat(A,'"\n                entity-picture="').concat(_?this.hass.hassUrl(_):"",'"\n                ').concat("string"!=typeof u?'entity-color="'.concat(u.color,'"'):"","\n              ></ha-entity-marker>\n            "),iconSize:[48,48],className:""}),title:f});this._mapItems.push(w),"string"!=typeof u&&!1===u.focus||this._mapFocusItems.push(w),M&&this._mapItems.push(a.circle([v,y],{interactive:!1,color:s,radius:M}))}else{if(k&&!this.renderPassive)continue;var x="";if(g){var L=document.createElement("ha-icon");L.setAttribute("icon",g),x=L.outerHTML}else{var z=document.createElement("span");z.innerHTML=f,x=z.outerHTML}this._mapZones.push(a.marker([v,y],{icon:a.divIcon({html:x,iconSize:[24,24],className:l}),interactive:this.interactiveZones,title:f})),this._mapZones.push(a.circle([v,y],{interactive:!1,color:k?o:n,radius:b}))}}}}catch(Z){d.e(Z)}finally{d.f()}this._mapItems.forEach((function(t){return e.addLayer(t)})),this._mapZones.forEach((function(t){return e.addLayer(t)}))}}},{kind:"method",key:"_attachObserver",value:(a=(0,l.A)((0,o.A)().mark((function t(){var e=this;return(0,o.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this._resizeObserver||(this._resizeObserver=new ResizeObserver((function(){var t;null===(t=e.leafletMap)||void 0===t||t.invalidateSize({debounceMoveend:!0})}))),this._resizeObserver.observe(this);case 2:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{kind:"get",static:!0,key:"styles",value:function(){return(0,E.AH)(V||(V=(0,n.A)([":host{display:block;height:300px}#map{height:100%}#map.dark{background:#090909}#map.forced-dark{color:#fff;--map-filter:invert(0.9) hue-rotate(170deg) brightness(1.5) contrast(1.2) saturate(0.3)}#map.forced-light{background:#fff;color:#000;--map-filter:invert(0)}#map:active{cursor:grabbing;cursor:-moz-grabbing;cursor:-webkit-grabbing}.leaflet-tile-pane{filter:var(--map-filter)}.dark .leaflet-bar a{background-color:#1c1c1c;color:#fff}.dark .leaflet-bar a:hover{background-color:#313131}.leaflet-marker-draggable{cursor:move!important}.leaflet-edit-resize{border-radius:50%;cursor:nesw-resize!important}.named-icon{display:flex;align-items:center;justify-content:center;flex-direction:column;text-align:center;color:var(--primary-text-color)}.leaflet-pane{z-index:0!important}.leaflet-bottom,.leaflet-control,.leaflet-top{z-index:1!important}.leaflet-tooltip{padding:8px;font-size:90%;background:rgba(80,80,80,.9)!important;color:#fff!important;border-radius:4px;box-shadow:none!important;text-align:center}"])))}}]}}),E.mN),i(),t.next=69;break;case 66:t.prev=66,t.t2=t.catch(0),i(t.t2);case 69:case"end":return t.stop()}}),t,null,[[0,66]])})));return function(e,a){return t.apply(this,arguments)}}())}}]);
//# sourceMappingURL=76474.dSfNcOpNH9E.js.map