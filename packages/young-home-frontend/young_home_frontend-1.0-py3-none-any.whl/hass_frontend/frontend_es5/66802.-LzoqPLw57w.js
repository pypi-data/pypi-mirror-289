"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[66802],{66802:function(t,e,i){i.r(e),i.d(e,{HuiEntityFilterCard:function(){return p}});var n=i(66123),s=i(67234),r=i(36683),a=i(89231),o=i(29864),h=i(83647),l=i(8364),d=i(76504),u=i(80792),c=(i(86176),i(27934),i(77052),i(69466),i(36724),i(43859),i(68113),i(66274),i(38129),i(85038),i(98168),i(22836),i(40924)),f=i(196),y=i(77664),v=i(40068),g=i(67792),_=i(3433),m=i(67990),k=i(60368),p=(0,l.A)([(0,f.EM)("hui-entity-filter-card")],(function(t,e){var i=function(e){function i(){var e;(0,a.A)(this,i);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return e=(0,o.A)(this,i,[].concat(s)),t(e),e}return(0,h.A)(i,e),(0,r.A)(i)}(e);return{F:i,d:[{kind:"method",static:!0,key:"getStubConfig",value:function(t,e,i){var n=(0,_.B)(t,3,e,i,["light","switch","sensor"]);return{type:"entity-filter",entities:n,conditions:n[0]?[{condition:"state",state:t.states[n[0]].state}]:[],card:{type:"entities"}}}},{kind:"field",decorators:[(0,f.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,f.MZ)({type:Boolean})],key:"isPanel",value:function(){return!1}},{kind:"field",decorators:[(0,f.MZ)({type:Boolean})],key:"preview",value:function(){return!1}},{kind:"field",decorators:[(0,f.wk)()],key:"_config",value:void 0},{kind:"field",key:"_element",value:void 0},{kind:"field",key:"_configEntities",value:void 0},{kind:"field",key:"_baseCardConfig",value:void 0},{kind:"field",key:"_oldEntities",value:void 0},{kind:"method",key:"getCardSize",value:function(){return this._element?(0,v.Z)(this._element):1}},{kind:"method",key:"setConfig",value:function(t){if(!t.entities||!t.entities.length||!Array.isArray(t.entities))throw new Error("Entities must be specified");if(!(t.conditions&&Array.isArray(t.conditions)||t.state_filter&&Array.isArray(t.state_filter)||t.entities.every((function(t){return"object"===(0,s.A)(t)&&t.state_filter&&Array.isArray(t.state_filter)}))))throw new Error("Incorrect filter config");this._configEntities=(0,m.L)(t.entities),this._config=t,this._baseCardConfig=Object.assign({type:"entities",entities:[]},this._config.card),this.lastChild&&this.removeChild(this.lastChild),this._element=this._createCardElement(this._baseCardConfig)}},{kind:"method",key:"createRenderRoot",value:function(){return this}},{kind:"method",key:"shouldUpdate",value:function(t){return this._element&&(this._element.hass=this.hass,this._element.preview=this.preview,this._element.isPanel=this.isPanel),!!t.has("_config")||!!t.has("hass")&&this._haveEntitiesChanged(t.get("hass"))}},{kind:"method",key:"update",value:function(t){var e=this;if((0,d.A)((0,u.A)(i.prototype),"update",this).call(this,t),this.hass&&this._config&&this._configEntities&&this._element){var n=this._configEntities.filter((function(t){var i,n,s=e.hass.states[t.entity];if(!s)return!1;var r=null!==(i=t.conditions)&&void 0!==i?i:e._config.conditions;if(r){var a=r.map((function(e){return(0,k.lB)(e,t.entity)}));return(0,k.XH)(a,e.hass)}var o=null!==(n=t.state_filter)&&void 0!==n?n:e._config.state_filter;return!!o&&o.some((function(t){return(0,g.J)(s,t)}))}));if(0!==n.length||!1!==this._config.show_empty){if(this.lastChild)this._oldEntities&&n.length===this._oldEntities.length&&n.every((function(t,i){return t===e._oldEntities[i]}))||(this._oldEntities=n,this._element.config=Object.assign(Object.assign({},this._baseCardConfig),{},{entities:n}));else this._element.config=Object.assign(Object.assign({},this._baseCardConfig),{},{entities:n}),this._oldEntities=n;this.lastChild||this.appendChild(this._element),this.hidden&&(this.style.display="block",this.toggleAttribute("hidden",!1),(0,y.r)(this,"card-visibility-changed",{value:!0}))}else this.hidden||(this.style.display="none",this.toggleAttribute("hidden",!0),(0,y.r)(this,"card-visibility-changed",{value:!1}))}}},{kind:"method",key:"_haveEntitiesChanged",value:function(t){var e;if(!this.hass||!t)return!0;if(!this._configEntities)return!0;if(this.hass.localize!==t.localize)return!0;var i,s=(0,n.A)(this._configEntities);try{for(s.s();!(i=s.n()).done;){var r=i.value;if(this.hass.states[r.entity]!==t.states[r.entity])return!0;if(r.conditions){var a,o=(0,k.Wx)(r.conditions),h=(0,n.A)(o);try{for(h.s();!(a=h.n()).done;){var l=a.value;if(this.hass.states[l]!==t.states[l])return!0}}catch(v){h.e(v)}finally{h.f()}}}}catch(v){s.e(v)}finally{s.f()}if(null!==(e=this._config)&&void 0!==e&&e.conditions){var d,u,c=(0,k.Wx)(null===(d=this._config)||void 0===d?void 0:d.conditions),f=(0,n.A)(c);try{for(f.s();!(u=f.n()).done;){var y=u.value;if(this.hass.states[y]!==t.states[y])return!0}}catch(v){f.e(v)}finally{f.f()}}return!1}},{kind:"method",key:"_createCardElement",value:function(t){var e=document.createElement("hui-card");return e.hass=this.hass,e.preview=this.preview,e.config=t,e.load(),e}}]}}),c.mN)},67792:function(t,e,i){i.d(e,{J:function(){return s}});var n=i(67234),s=(i(53501),i(36724),i(59092),i(650),i(44186),i(90591),i(26777),i(16915),i(4148),i(58971),i(34517),i(64148),i(98168),function(t,e){var i,s,r;if("object"===(0,n.A)(e)?(i=e.operator,s=e.value,r=e.attribute?t.attributes[e.attribute]:t.state):(i="==",s=e,r=t.state),"=="===i||"!="===i){var a="number"==typeof s||"string"==typeof s&&s.trim()&&!isNaN(Number(s)),o="number"==typeof r||"string"==typeof r&&r.trim()&&!isNaN(Number(r));a&&o&&(s=Number(s),r=Number(r))}switch(i){case"==":return r===s;case"<=":return r<=s;case"<":return r<s;case">=":return r>=s;case">":return r>s;case"!=":return r!==s;case"in":return!(!Array.isArray(s)&&"string"!=typeof s)&&(Array.isArray(s)&&(s=s.map((function(t){return"".concat(t)}))),s.includes(r));case"not in":return!(!Array.isArray(s)&&"string"!=typeof s)&&(Array.isArray(s)&&(s=s.map((function(t){return"".concat(t)}))),!s.includes(r));case"regex":return"string"==typeof s&&(null!==r&&"object"===(0,n.A)(r)?RegExp(s).test(JSON.stringify(r)):RegExp(s).test(r));default:return!1}})}}]);
//# sourceMappingURL=66802.-LzoqPLw57w.js.map