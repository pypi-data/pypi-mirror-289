"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[12940],{60368:function(n,t,e){e.d(t,{CZ:function(){return m},Wx:function(){return f},XH:function(){return l},db:function(){return v},gW:function(){return _},lB:function(){return y}});var i=e(66123),r=e(61780),o=(e(77052),e(69466),e(53501),e(21950),e(36724),e(71936),e(19954),e(650),e(43859),e(68113),e(57733),e(34517),e(56262),e(66274),e(38129),e(85038),e(84531),e(98168),e(91078),e(22836),e(15445),e(24483),e(13478),e(46355),e(14612),e(53691),e(48455),e(34290),e(8339),e(68286)),s=e(96516),u=e(55970),a=e(83378);function c(n,t){var e;if((0,u.n)(t)&&n.states[t])return null===(e=n.states[t])||void 0===e?void 0:e.state}function d(n,t){var e,i=n.entity&&t.states[n.entity]?t.states[n.entity].state:a.Hh,s=null!==(e=n.state)&&void 0!==e?e:n.state_not;if(Array.isArray(s)){var u=s.map((function(n){return c(t,n)})).filter((function(n){return void 0!==n}));s=[].concat((0,r.A)(s),(0,r.A)(u))}else if("string"==typeof s){var d=c(t,s);s=[s],d&&s.push(d)}return null!=n.state?(0,o.e)(s).includes(i):!(0,o.e)(s).includes(i)}function l(n,t){return n.every((function(n){if("condition"in n)switch(n.condition){case"screen":return!!(e=n).media_query&&matchMedia(e.media_query).matches;case"user":return function(n,t){var e;return!(!n.users||null===(e=t.user)||void 0===e||!e.id)&&n.users.includes(t.user.id)}(n,t);case"numeric_state":return function(n,t){var e,i,r,o=null===(e=n.entity?t.states[n.entity]:void 0)||void 0===e?void 0:e.state,s=n.above,u=n.below;"string"==typeof s&&(s=null!==(i=c(t,s))&&void 0!==i?i:s),"string"==typeof u&&(u=null!==(r=c(t,u))&&void 0!==r?r:u);var a=Number(o),d=Number(s),l=Number(u);return!isNaN(a)&&(null==n.above||isNaN(d)||d<a)&&(null==n.below||isNaN(l)||l>a)}(n,t);case"and":return function(n,t){return!n.conditions||l(n.conditions,t)}(n,t);case"or":return function(n,t){return!n.conditions||n.conditions.some((function(n){return l([n],t)}))}(n,t);default:return d(n,t)}var e;return d(n,t)}))}function f(n){var t,e=new Set,s=(0,i.A)(n);try{for(s.s();!(t=s.n()).done;){var a=t.value;if("numeric_state"===a.condition)"string"==typeof a.above&&(0,u.n)(a.above)&&e.add(a.above),"string"==typeof a.below&&(0,u.n)(a.below)&&e.add(a.below);else if("state"===a.condition){var c,d;[].concat((0,r.A)(null!==(c=(0,o.e)(a.state))&&void 0!==c?c:[]),(0,r.A)(null!==(d=(0,o.e)(a.state_not))&&void 0!==d?d:[])).forEach((function(n){n&&(0,u.n)(n)&&e.add(n)}))}else if("conditions"in a&&a.conditions)return new Set([].concat((0,r.A)(e),(0,r.A)(f(a.conditions))))}}catch(l){s.e(l)}finally{s.f()}return e}function h(n){return null!=n.entity&&(null!=n.state||null!=n.state_not)}function v(n){return n.every((function(n){if("condition"in n)switch(n.condition){case"screen":return null!=n.media_query;case"user":return function(n){return null!=n.users}(n);case"numeric_state":return function(n){return null!=n.entity&&(null!=n.above||null!=n.below)}(n);case"and":case"or":return function(n){return null!=n.conditions}(n);default:return h(n)}return h(n)}))}function y(n,t){return"conditions"in n&&n.conditions?Object.assign(Object.assign({},n),{},{conditions:n.conditions.map((function(n){return y(n,t)}))}):"state"===n.condition||"numeric_state"===n.condition?Object.assign(Object.assign({},n),{},{entity:t}):n}function _(n){return n.reduce((function(n,t){return"conditions"in t&&t.conditions&&n.push.apply(n,(0,r.A)(_(t.conditions))),"screen"===t.condition&&t.media_query&&n.push(t.media_query),n}),[])}function m(n,t){return _(n).map((function(n){return(0,s.m)(n,(function(n){t(n)}))}))}},3414:function(n,t,e){e.d(t,{E:function(){return v}});var i=e(36683),r=e(89231),o=e(29864),s=e(83647),u=e(8364),a=e(76504),c=e(80792),d=(e(86176),e(27934),e(77052),e(69466),e(68113),e(66274),e(85038),e(84531),e(34290),e(40924)),l=e(196),f=e(61314),h=e(60368),v=(0,u.A)([(0,l.EM)("hui-conditional-base")],(function(n,t){var e=function(t){function e(){var t;(0,r.A)(this,e);for(var i=arguments.length,s=new Array(i),u=0;u<i;u++)s[u]=arguments[u];return t=(0,o.A)(this,e,[].concat(s)),n(t),t}return(0,s.A)(e,t),(0,i.A)(e)}(t);return{F:e,d:[{kind:"field",decorators:[(0,l.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,l.MZ)({type:Boolean})],key:"preview",value:function(){return!1}},{kind:"field",decorators:[(0,l.wk)()],key:"_config",value:void 0},{kind:"field",key:"_element",value:void 0},{kind:"field",key:"_listeners",value:function(){return[]}},{kind:"field",key:"_mediaQueries",value:function(){return[]}},{kind:"method",key:"createRenderRoot",value:function(){return this}},{kind:"method",key:"validateConfig",value:function(n){if(!n.conditions)throw new Error("No conditions configured");if(!Array.isArray(n.conditions))throw new Error("Conditions need to be an array");if(!(0,h.db)(n.conditions))throw new Error("Conditions are invalid");this.lastChild&&this.removeChild(this.lastChild),this._config=n}},{kind:"method",key:"disconnectedCallback",value:function(){(0,a.A)((0,c.A)(e.prototype),"disconnectedCallback",this).call(this),this._clearMediaQueries()}},{kind:"method",key:"connectedCallback",value:function(){(0,a.A)((0,c.A)(e.prototype),"connectedCallback",this).call(this),this._listenMediaQueries(),this._updateVisibility()}},{kind:"method",key:"_clearMediaQueries",value:function(){this._listeners.forEach((function(n){return n()})),this._listeners=[]}},{kind:"method",key:"_listenMediaQueries",value:function(){var n=this;if(this._config&&this.hass){var t=this._config.conditions.filter((function(n){return"condition"in n})),e=(0,h.gW)(t);if(!(0,f.b)(e,this._mediaQueries)){this._clearMediaQueries();var i=this._config.conditions,r=1===i.length&&"condition"in i[0]&&"screen"===i[0].condition&&!!i[0].media_query;this._listeners=(0,h.CZ)(t,(function(t){r?n.setVisibility(t):n._updateVisibility()}))}}}},{kind:"method",key:"update",value:function(n){(0,a.A)((0,c.A)(e.prototype),"update",this).call(this,n),(n.has("_element")||n.has("_config")||n.has("hass")||n.has("preview"))&&(this._listenMediaQueries(),this._updateVisibility())}},{kind:"method",key:"_updateVisibility",value:function(){if(this._element&&this.hass&&this._config){this._element.preview=this.preview;var n=(0,h.XH)(this._config.conditions,this.hass);this.setVisibility(n)}}},{kind:"method",key:"setVisibility",value:function(n){if(this._element&&this.hass){var t=this.preview||n;this.hidden!==!t&&(this.toggleAttribute("hidden",!t),this.style.setProperty("display",t?"":"none")),t?(this._element.hass=this.hass,this._element.parentElement||this.appendChild(this._element)):this._element.parentElement&&this.removeChild(this._element)}}}]}}),d.mN)},12940:function(n,t,e){var i=e(1781).A,r=e(94881).A;e.a(n,function(){var n=i(r().mark((function n(i,o){var s,u,a,c,d,l,f,h,v,y,_,m;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,e.r(t),s=e(36683),u=e(89231),a=e(29864),c=e(83647),d=e(8364),l=e(27934),f=e(77052),h=e(43859),v=e(196),y=e(3414),_=e(52398),!(m=i([_])).then){n.next=24;break}return n.next=20,m;case 20:n.t1=n.sent,n.t0=(0,n.t1)(),n.next=25;break;case 24:n.t0=m;case 25:_=n.t0[0],(0,d.A)([(0,v.EM)("hui-conditional-row")],(function(n,t){var e=function(t){function e(){var t;(0,u.A)(this,e);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return t=(0,a.A)(this,e,[].concat(r)),n(t),t}return(0,c.A)(e,t),(0,s.A)(e)}(t);return{F:e,d:[{kind:"method",key:"setConfig",value:function(n){if(this.validateConfig(n),!n.row)throw new Error("No row configured");this._element=(0,_.T)(n.state_color?Object.assign({state_color:!0},n.row):n.row)}}]}}),y.E),o(),n.next=33;break;case 30:n.prev=30,n.t2=n.catch(0),o(n.t2);case 33:case"end":return n.stop()}}),n,null,[[0,30]])})));return function(t,e){return n.apply(this,arguments)}}())}}]);
//# sourceMappingURL=12940.dY4vHdcPPR8.js.map