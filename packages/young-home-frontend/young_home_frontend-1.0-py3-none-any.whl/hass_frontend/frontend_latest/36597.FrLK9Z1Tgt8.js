export const id=36597;export const ids=[36597];export const modules={85689:(e,i,a)=>{a.a(e,(async(e,i)=>{try{var t=a(62659),s=(a(53501),a(21950),a(55888),a(66274),a(38129),a(85038),a(98168),a(22836),a(8339),a(40924)),l=a(18791),d=a(69760),o=a(45081),r=a(77664),n=a(47038),h=a(38696),c=a(86464),u=a(1169),v=a(98876),_=a(38630),m=a(35641),y=(a(12731),a(39335),a(1683),e([m]));m=(y.then?(await y)():y)[0];const k="M20 2H4C2.9 2 2 2.9 2 4V20C2 21.11 2.9 22 4 22H20C21.11 22 22 21.11 22 20V4C22 2.9 21.11 2 20 2M4 6L6 4H10.9L4 10.9V6M4 13.7L13.7 4H18.6L4 18.6V13.7M20 18L18 20H13.1L20 13.1V18M20 10.3L10.3 20H5.4L20 5.4V10.3Z",p=e=>s.qy`<ha-list-item graphic="icon" class="${(0,d.H)({"add-new":e.area_id===g})}"> ${e.icon?s.qy`<ha-icon slot="graphic" .icon="${e.icon}"></ha-icon>`:s.qy`<ha-svg-icon slot="graphic" .path="${k}"></ha-svg-icon>`} ${e.name} </ha-list-item>`,g="___ADD_NEW___",b="___NO_ITEMS___",f="___ADD_NEW_SUGGESTION___";(0,t.A)([(0,l.EM)("ha-area-picker")],(function(e,i){return{F:class extends i{constructor(...i){super(...i),e(this)}},d:[{kind:"field",decorators:[(0,l.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,l.MZ)()],key:"label",value:void 0},{kind:"field",decorators:[(0,l.MZ)()],key:"value",value:void 0},{kind:"field",decorators:[(0,l.MZ)()],key:"helper",value:void 0},{kind:"field",decorators:[(0,l.MZ)()],key:"placeholder",value:void 0},{kind:"field",decorators:[(0,l.MZ)({type:Boolean,attribute:"no-add"})],key:"noAdd",value:()=>!1},{kind:"field",decorators:[(0,l.MZ)({type:Array,attribute:"include-domains"})],key:"includeDomains",value:void 0},{kind:"field",decorators:[(0,l.MZ)({type:Array,attribute:"exclude-domains"})],key:"excludeDomains",value:void 0},{kind:"field",decorators:[(0,l.MZ)({type:Array,attribute:"include-device-classes"})],key:"includeDeviceClasses",value:void 0},{kind:"field",decorators:[(0,l.MZ)({type:Array,attribute:"exclude-areas"})],key:"excludeAreas",value:void 0},{kind:"field",decorators:[(0,l.MZ)({attribute:!1})],key:"deviceFilter",value:void 0},{kind:"field",decorators:[(0,l.MZ)({attribute:!1})],key:"entityFilter",value:void 0},{kind:"field",decorators:[(0,l.MZ)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,l.MZ)({type:Boolean})],key:"required",value:()=>!1},{kind:"field",decorators:[(0,l.wk)()],key:"_opened",value:void 0},{kind:"field",decorators:[(0,l.P)("ha-combo-box",!0)],key:"comboBox",value:void 0},{kind:"field",key:"_suggestion",value:void 0},{kind:"field",key:"_init",value:()=>!1},{kind:"method",key:"open",value:async function(){var e;await this.updateComplete,await(null===(e=this.comboBox)||void 0===e?void 0:e.open())}},{kind:"method",key:"focus",value:async function(){var e;await this.updateComplete,await(null===(e=this.comboBox)||void 0===e?void 0:e.focus())}},{kind:"field",key:"_getAreas",value(){return(0,o.A)(((e,i,a,t,s,l,d,o,r,h)=>{let c,v,_={};(t||s||l||d||o)&&(_=(0,u.g2)(a),c=i,v=a.filter((e=>e.area_id)),t&&(c=c.filter((e=>{const i=_[e.id];return!(!i||!i.length)&&_[e.id].some((e=>t.includes((0,n.m)(e.entity_id))))})),v=v.filter((e=>t.includes((0,n.m)(e.entity_id))))),s&&(c=c.filter((e=>{const i=_[e.id];return!i||!i.length||a.every((e=>!s.includes((0,n.m)(e.entity_id))))})),v=v.filter((e=>!s.includes((0,n.m)(e.entity_id))))),l&&(c=c.filter((e=>{const i=_[e.id];return!(!i||!i.length)&&_[e.id].some((e=>{const i=this.hass.states[e.entity_id];return!!i&&(i.attributes.device_class&&l.includes(i.attributes.device_class))}))})),v=v.filter((e=>{const i=this.hass.states[e.entity_id];return i.attributes.device_class&&l.includes(i.attributes.device_class)}))),d&&(c=c.filter((e=>d(e)))),o&&(c=c.filter((e=>{const i=_[e.id];return!(!i||!i.length)&&_[e.id].some((e=>{const i=this.hass.states[e.entity_id];return!!i&&o(i)}))})),v=v.filter((e=>{const i=this.hass.states[e.entity_id];return!!i&&o(i)}))));let m,y=e;var k;(c&&(m=c.filter((e=>e.area_id)).map((e=>e.area_id))),v)&&(m=(null!==(k=m)&&void 0!==k?k:[]).concat(v.filter((e=>e.area_id)).map((e=>e.area_id))));return m&&(y=y.filter((e=>m.includes(e.area_id)))),h&&(y=y.filter((e=>!h.includes(e.area_id)))),y.length||(y=[{area_id:b,floor_id:null,name:this.hass.localize("ui.components.area-picker.no_areas"),picture:null,icon:null,aliases:[],labels:[]}]),r?y:[...y,{area_id:g,floor_id:null,name:this.hass.localize("ui.components.area-picker.add_new"),picture:null,icon:"mdi:plus",aliases:[],labels:[]}]}))}},{kind:"method",key:"updated",value:function(e){if(!this._init&&this.hass||this._init&&e.has("_opened")&&this._opened){this._init=!0;const e=this._getAreas(Object.values(this.hass.areas),Object.values(this.hass.devices),Object.values(this.hass.entities),this.includeDomains,this.excludeDomains,this.includeDeviceClasses,this.deviceFilter,this.entityFilter,this.noAdd,this.excludeAreas).map((e=>({...e,strings:[e.area_id,...e.aliases,e.name]})));this.comboBox.items=e,this.comboBox.filteredItems=e}}},{kind:"method",key:"render",value:function(){var e;return s.qy` <ha-combo-box .hass="${this.hass}" .helper="${this.helper}" item-value-path="area_id" item-id-path="area_id" item-label-path="name" .value="${this._value}" .disabled="${this.disabled}" .required="${this.required}" .label="${void 0===this.label&&this.hass?this.hass.localize("ui.components.area-picker.area"):this.label}" .placeholder="${this.placeholder?null===(e=this.hass.areas[this.placeholder])||void 0===e?void 0:e.name:void 0}" .renderer="${p}" @filter-changed="${this._filterChanged}" @opened-changed="${this._openedChanged}" @value-changed="${this._areaChanged}"> </ha-combo-box> `}},{kind:"method",key:"_filterChanged",value:function(e){var i;const a=e.target,t=e.detail.value;if(!t)return void(this.comboBox.filteredItems=this.comboBox.items);const s=(0,h.H)(t,(null===(i=a.items)||void 0===i?void 0:i.filter((e=>![b,g].includes(e.label_id))))||[]);0===s.length?this.noAdd?(this._suggestion=t,this.comboBox.filteredItems=[{area_id:f,floor_id:null,name:this.hass.localize("ui.components.area-picker.add_new_sugestion",{name:this._suggestion}),icon:"mdi:plus",picture:null,labels:[],aliases:[]}]):this.comboBox.filteredItems=[{area_id:b,floor_id:null,name:this.hass.localize("ui.components.area-picker.no_match"),icon:null,picture:null,labels:[],aliases:[]}]:this.comboBox.filteredItems=s}},{kind:"get",key:"_value",value:function(){return this.value||""}},{kind:"method",key:"_openedChanged",value:function(e){this._opened=e.detail.value}},{kind:"method",key:"_areaChanged",value:function(e){e.stopPropagation();let i=e.detail.value;if(i===b)return i="",void this.comboBox.setInputValue("");[f,g].includes(i)?(e.target.value=this._value,this.hass.loadFragmentTranslation("config"),(0,_.J)(this,{suggestedName:i===f?this._suggestion:"",createEntry:async e=>{try{const i=await(0,c.L3)(this.hass,e),a=[...Object.values(this.hass.areas),i];this.comboBox.filteredItems=this._getAreas(a,Object.values(this.hass.devices),Object.values(this.hass.entities),this.includeDomains,this.excludeDomains,this.includeDeviceClasses,this.deviceFilter,this.entityFilter,this.noAdd,this.excludeAreas),await this.updateComplete,await this.comboBox.updateComplete,this._setValue(i.area_id)}catch(e){(0,v.showAlertDialog)(this,{title:this.hass.localize("ui.components.area-picker.failed_create_area"),text:e.message})}}}),this._suggestion=void 0,this.comboBox.setInputValue("")):i!==this._value&&this._setValue(i)}},{kind:"method",key:"_setValue",value:function(e){this.value=e,setTimeout((()=>{(0,r.r)(this,"value-changed",{value:e}),(0,r.r)(this,"change")}),0)}}]}}),s.WF);i()}catch(e){i(e)}}))},36597:(e,i,a)=>{a.a(e,(async(e,t)=>{try{a.r(i);var s=a(62659),l=(a(21950),a(55888),a(8339),a(58068),a(40924)),d=a(18791),o=a(77664),r=(a(12261),a(85689)),n=(a(95439),a(7339)),h=(a(42398),a(1169)),c=a(14126),u=e([r,n]);[r,n]=u.then?(await u)():u;(0,s.A)([(0,d.EM)("dialog-device-registry-detail")],(function(e,i){return{F:class extends i{constructor(...i){super(...i),e(this)}},d:[{kind:"field",decorators:[(0,d.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,d.wk)()],key:"_nameByUser",value:void 0},{kind:"field",decorators:[(0,d.wk)()],key:"_error",value:void 0},{kind:"field",decorators:[(0,d.wk)()],key:"_params",value:void 0},{kind:"field",decorators:[(0,d.wk)()],key:"_areaId",value:void 0},{kind:"field",decorators:[(0,d.wk)()],key:"_labels",value:void 0},{kind:"field",decorators:[(0,d.wk)()],key:"_disabledBy",value:void 0},{kind:"field",decorators:[(0,d.wk)()],key:"_submitting",value:()=>!1},{kind:"method",key:"showDialog",value:async function(e){this._params=e,this._error=void 0,this._nameByUser=this._params.device.name_by_user||"",this._areaId=this._params.device.area_id||"",this._labels=this._params.device.labels||[],this._disabledBy=this._params.device.disabled_by,await this.updateComplete}},{kind:"method",key:"closeDialog",value:function(){this._error="",this._params=void 0,(0,o.r)(this,"dialog-closed",{dialog:this.localName})}},{kind:"method",key:"render",value:function(){if(!this._params)return l.s6;const e=this._params.device;return l.qy` <ha-dialog open @closed="${this.closeDialog}" .heading="${(0,h.xn)(e,this.hass)}"> <div> ${this._error?l.qy`<ha-alert alert-type="error">${this._error}</ha-alert> `:""} <div class="form"> <ha-textfield .value="${this._nameByUser}" @input="${this._nameChanged}" .label="${this.hass.localize("ui.dialogs.device-registry-detail.name")}" .placeholder="${e.name||""}" .disabled="${this._submitting}" dialogInitialFocus></ha-textfield> <ha-area-picker .hass="${this.hass}" .value="${this._areaId}" @value-changed="${this._areaPicked}"></ha-area-picker> <ha-labels-picker .hass="${this.hass}" .value="${this._labels}" @value-changed="${this._labelsChanged}"></ha-labels-picker> <div class="row"> <ha-switch .checked="${!this._disabledBy}" .disabled="${"config_entry"===this._params.device.disabled_by}" @change="${this._disabledByChanged}"> </ha-switch> <div> <div> ${this.hass.localize("ui.dialogs.device-registry-detail.enabled_label",{type:this.hass.localize(`ui.dialogs.device-registry-detail.type.${e.entry_type||"device"}`)})} </div> <div class="secondary"> ${this._disabledBy&&"user"!==this._disabledBy?this.hass.localize("ui.dialogs.device-registry-detail.enabled_cause",{type:this.hass.localize(`ui.dialogs.device-registry-detail.type.${e.entry_type||"device"}`),cause:this.hass.localize(`config_entry.disabled_by.${this._disabledBy}`)}):""} ${this.hass.localize("ui.dialogs.device-registry-detail.enabled_description")} </div> </div> </div> </div> </div> <mwc-button slot="secondaryAction" @click="${this.closeDialog}" .disabled="${this._submitting}"> ${this.hass.localize("ui.common.cancel")} </mwc-button> <mwc-button slot="primaryAction" @click="${this._updateEntry}" .disabled="${this._submitting}"> ${this.hass.localize("ui.dialogs.device-registry-detail.update")} </mwc-button> </ha-dialog> `}},{kind:"method",key:"_nameChanged",value:function(e){this._error=void 0,this._nameByUser=e.target.value}},{kind:"method",key:"_areaPicked",value:function(e){this._areaId=e.detail.value}},{kind:"method",key:"_labelsChanged",value:function(e){this._labels=e.detail.value}},{kind:"method",key:"_disabledByChanged",value:function(e){this._disabledBy=e.target.checked?null:"user"}},{kind:"method",key:"_updateEntry",value:async function(){this._submitting=!0;try{await this._params.updateEntry({name_by_user:this._nameByUser.trim()||null,area_id:this._areaId||null,labels:this._labels||null,disabled_by:this._disabledBy||null}),this.closeDialog()}catch(e){this._error=e.message||this.hass.localize("ui.dialogs.device-registry-detail.unknown_error")}finally{this._submitting=!1}}},{kind:"get",static:!0,key:"styles",value:function(){return[c.RF,c.nA,l.AH`mwc-button.warning{margin-right:auto;margin-inline-end:auto;margin-inline-start:initial}ha-area-picker,ha-labels-picker,ha-textfield{display:block;margin-bottom:16px}ha-switch{margin-right:16px;margin-inline-end:16px;margin-inline-start:initial;direction:var(--direction)}.row{margin-top:8px;color:var(--primary-text-color);display:flex;align-items:center}`]}}]}}),l.WF);t()}catch(e){t(e)}}))}};
//# sourceMappingURL=36597.FrLK9Z1Tgt8.js.map