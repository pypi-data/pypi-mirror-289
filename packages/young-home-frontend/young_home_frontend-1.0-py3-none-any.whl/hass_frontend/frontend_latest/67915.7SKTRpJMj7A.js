export const id=67915;export const ids=[67915];export const modules={15696:(e,i,t)=>{t.d(i,{j:()=>o});const o=["relative","total","date","time","datetime"]},49523:(e,i,t)=>{var o=t(62659),n=(t(21950),t(8339),t(40924)),a=t(18791),s=t(77664);t(12261),t(94484);(0,o.A)([(0,a.EM)("hui-card-visibility-editor")],(function(e,i){return{F:class extends i{constructor(...i){super(...i),e(this)}},d:[{kind:"field",decorators:[(0,a.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,a.MZ)({attribute:!1})],key:"config",value:void 0},{kind:"method",key:"render",value:function(){var e;const i=null!==(e=this.config.visibility)&&void 0!==e?e:[];return n.qy` <p class="intro"> ${this.hass.localize("ui.panel.lovelace.editor.edit_card.visibility.explanation")} </p> <ha-card-conditions-editor .hass="${this.hass}" .conditions="${i}" @value-changed="${this._valueChanged}"> </ha-card-conditions-editor> `}},{kind:"method",key:"_valueChanged",value:function(e){var i;e.stopPropagation();const t=e.detail.value,o={...this.config,visibility:t};0===(null===(i=o.visibility)||void 0===i?void 0:i.length)&&delete o.visibility,(0,s.r)(this,"value-changed",{value:o})}},{kind:"field",static:!0,key:"styles",value:()=>n.AH`.intro{margin:0;color:var(--secondary-text-color);margin-bottom:8px}`}]}}),n.WF)},67915:(e,i,t)=>{t.d(i,{m:()=>k});var o=t(62659),n=t(76504),a=t(80792),s=(t(27934),t(21950),t(55888),t(66274),t(84531),t(98168),t(8339),t(58068),t(47420)),r=t(40924),l=t(18791),d=t(77664),c=t(58279),h=t(61314),u=(t(12261),t(4596),t(26250),t(49523),t(53501),t(85038),t(45081)),g=t(63428),v=t(47038),f=(t(23006),t(30322));const m={none:{},"entity-id":{},"last-changed":{},"last-updated":{},"last-triggered":{domains:["automation","script"]},position:{domains:["cover"]},"tilt-position":{domains:["cover"]},brightness:{domains:["light"]}};(0,o.A)([(0,l.EM)("hui-generic-entity-row-editor")],(function(e,i){return{F:class extends i{constructor(...i){super(...i),e(this)}},d:[{kind:"field",decorators:[(0,l.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,l.wk)()],key:"_config",value:void 0},{kind:"method",key:"setConfig",value:function(e){(0,g.vA)(e,f.l),this._config=e}},{kind:"field",key:"_schema",value:()=>(0,u.A)(((e,i)=>{const t=(0,v.m)(e);return[{name:"entity",required:!0,selector:{entity:{}}},{type:"grid",name:"",schema:[{name:"name",selector:{text:{}}},{name:"icon",selector:{icon:{}},context:{icon_entity:"entity"}}]},{name:"secondary_info",selector:{select:{options:Object.keys(m).filter((e=>!("domains"in m[e])||"domains"in m[e]&&m[e].domains.includes(t))).map((e=>({value:e,label:i(`ui.panel.lovelace.editor.card.entities.secondary_info_values.${e}`)})))}}}]}))},{kind:"method",key:"render",value:function(){if(!this.hass||!this._config)return r.s6;const e=this._schema(this._config.entity,this.hass.localize);return r.qy` <ha-form .hass="${this.hass}" .data="${this._config}" .schema="${e}" .computeLabel="${this._computeLabelCallback}" @value-changed="${this._valueChanged}"></ha-form> `}},{kind:"method",key:"_valueChanged",value:function(e){(0,d.r)(this,"config-changed",{config:e.detail.value})}},{kind:"field",key:"_computeLabelCallback",value(){return e=>"secondary_info"===e.name?this.hass.localize(`ui.panel.lovelace.editor.card.entity-row.${e.name}`):this.hass.localize(`ui.panel.lovelace.editor.card.generic.${e.name}`)}}]}}),r.WF);class y extends Error{constructor(e,i,t){super(e),this.warnings=void 0,this.errors=void 0,this.name="GUISupportError",this.warnings=i,this.errors=t}}let k=(0,o.A)(null,(function(e,i){class o extends i{constructor(...i){super(...i),e(this)}}return{F:o,d:[{kind:"field",decorators:[(0,l.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,l.MZ)({attribute:!1})],key:"lovelace",value:void 0},{kind:"field",decorators:[(0,l.MZ)({attribute:!1})],key:"context",value:void 0},{kind:"field",decorators:[(0,l.wk)()],key:"_yaml",value:void 0},{kind:"field",decorators:[(0,l.wk)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,l.wk)()],key:"_configElement",value:void 0},{kind:"field",decorators:[(0,l.wk)()],key:"_configElementType",value:void 0},{kind:"field",decorators:[(0,l.wk)()],key:"_guiMode",value:()=>!0},{kind:"field",decorators:[(0,l.wk)()],key:"_errors",value:void 0},{kind:"field",decorators:[(0,l.wk)()],key:"_warnings",value:void 0},{kind:"field",decorators:[(0,l.wk)()],key:"_guiSupported",value:void 0},{kind:"field",decorators:[(0,l.wk)()],key:"_loading",value:()=>!1},{kind:"field",decorators:[(0,l.P)("ha-code-editor")],key:"_yamlEditor",value:void 0},{kind:"get",key:"yaml",value:function(){return this._yaml||(this._yaml=(0,s.dump)(this._config)),this._yaml||""}},{kind:"set",key:"yaml",value:function(e){this._yaml=e;try{this._config=(0,s.load)(this.yaml),this._errors=void 0}catch(e){this._errors=[e.message]}this._setConfig()}},{kind:"get",key:"value",value:function(){return this._config}},{kind:"set",key:"value",value:function(e){this._config&&(0,h.b)(e,this._config)||(this._config=e,this._yaml=void 0,this._errors=void 0,this._setConfig())}},{kind:"method",key:"_setConfig",value:function(){if(!this._errors)try{this._updateConfigElement()}catch(e){this._errors=[e.message]}this.updateComplete.then((()=>{var e;(0,d.r)(this,"config-changed",{config:this.value,error:null===(e=this._errors)||void 0===e?void 0:e.join(", "),guiModeAvailable:!(this.hasWarning||this.hasError||!1===this._guiSupported)})}))}},{kind:"get",key:"hasWarning",value:function(){return void 0!==this._warnings&&this._warnings.length>0}},{kind:"get",key:"hasError",value:function(){return void 0!==this._errors&&this._errors.length>0}},{kind:"get",key:"GUImode",value:function(){return this._guiMode}},{kind:"set",key:"GUImode",value:function(e){this._guiMode=e,this.updateComplete.then((()=>{(0,d.r)(this,"GUImode-changed",{guiMode:e,guiModeAvailable:!(this.hasWarning||this.hasError||!1===this._guiSupported)})}))}},{kind:"method",key:"toggleMode",value:function(){this.GUImode=!this.GUImode}},{kind:"method",key:"focusYamlEditor",value:function(){var e,i;null!==(e=this._configElement)&&void 0!==e&&e.focusYamlEditor&&this._configElement.focusYamlEditor(),null!==(i=this._yamlEditor)&&void 0!==i&&i.codemirror&&this._yamlEditor.codemirror.focus()}},{kind:"method",key:"getConfigElement",value:async function(){}},{kind:"method",key:"getConfigForm",value:async function(){}},{kind:"get",key:"configElementType",value:function(){return this.value?this.value.type:void 0}},{kind:"method",key:"renderConfigElement",value:function(){return r.qy`${this._configElement}`}},{kind:"method",key:"render",value:function(){return r.qy` <div class="wrapper"> ${this.GUImode?r.qy` <div class="gui-editor"> ${this._loading?r.qy` <ha-circular-progress indeterminate class="center margin-bot"></ha-circular-progress> `:this.renderConfigElement()} </div> `:r.qy` <div class="yaml-editor"> <ha-code-editor mode="yaml" autofocus autocomplete-entities autocomplete-icons .hass="${this.hass}" .value="${this.yaml}" .error="${Boolean(this._errors)}" @value-changed="${this._handleYAMLChanged}" @keydown="${this._ignoreKeydown}" dir="ltr"></ha-code-editor> </div> `} ${!1===this._guiSupported&&this.configElementType?r.qy` <div class="info"> ${this.hass.localize("ui.errors.config.editor_not_available",{type:this.configElementType})} </div> `:""} ${this.hasError?r.qy` <div class="error"> ${this.hass.localize("ui.errors.config.error_detected")}: <br> <ul> ${this._errors.map((e=>r.qy`<li>${e}</li>`))} </ul> </div> `:""} ${this.hasWarning?r.qy` <ha-alert alert-type="warning" .title="${this.hass.localize("ui.errors.config.editor_not_supported")}:"> ${this._warnings.length>0&&void 0!==this._warnings[0]?r.qy` <ul> ${this._warnings.map((e=>r.qy`<li>${e}</li>`))} </ul>`:""} ${this.hass.localize("ui.errors.config.edit_in_yaml_supported")} </ha-alert> `:""} </div> `}},{kind:"method",key:"updated",value:function(e){(0,n.A)((0,a.A)(o.prototype),"updated",this).call(this,e),this._configElement&&e.has("hass")&&(this._configElement.hass=this.hass),this._configElement&&"lovelace"in this._configElement&&e.has("lovelace")&&(this._configElement.lovelace=this.lovelace),this._configElement&&e.has("context")&&(this._configElement.context=this.context)}},{kind:"method",key:"_handleUIConfigChanged",value:function(e){e.stopPropagation();const i=e.detail.config;Object.keys(i).forEach((e=>{void 0===i[e]&&delete i[e]})),this.value=i}},{kind:"method",key:"_handleYAMLChanged",value:function(e){e.stopPropagation();const i=e.detail.value;i!==this.yaml&&(this.yaml=i)}},{kind:"method",key:"_updateConfigElement",value:async function(){if(!this.value)return;let e;try{if(this._errors=void 0,this._warnings=void 0,this._configElementType!==this.configElementType){if(this._guiSupported=void 0,this._configElement=void 0,!this.configElementType)throw new Error(this.hass.localize("ui.errors.config.no_type_provided"));if(this._configElementType=this.configElementType,this._loading=!0,e=await this.getConfigElement(),!e){const i=await this.getConfigForm();if(i){await t.e(40124).then(t.bind(t,40124)),e=document.createElement("hui-form-editor");const{schema:o,assertConfig:n,computeLabel:a,computeHelper:s}=i;e.schema=o,a&&(e.computeLabel=a),s&&(e.computeHelper=s),n&&(e.assertConfig=n)}}e&&(e.hass=this.hass,"lovelace"in e&&(e.lovelace=this.lovelace),e.context=this.context,e.addEventListener("config-changed",(e=>this._handleUIConfigChanged(e))),this._configElement=e,this._guiSupported=!0)}if(this._configElement)try{this._configElement.setConfig(this.value)}catch(e){const i=(0,c._)(this.hass,e);throw new y("Config is not supported",i.warnings,i.errors)}else this._guiSupported=!1,this.GUImode=!1}catch(e){var i;if(e instanceof y)this._warnings=null!==(i=e.warnings)&&void 0!==i?i:[e.message],this._errors=e.errors||void 0;else this._errors=[e.message];this.GUImode=!1}finally{this._loading=!1}}},{kind:"method",key:"_ignoreKeydown",value:function(e){e.stopPropagation()}},{kind:"get",static:!0,key:"styles",value:function(){return r.AH`:host{display:flex}.wrapper{width:100%}.gui-editor,.yaml-editor{padding:8px 0px}ha-code-editor{--code-mirror-max-height:calc(100vh - 245px)}.error,.info,.warning{word-break:break-word;margin-top:8px}.error{color:var(--error-color)}.warning{color:var(--warning-color)}.error ul,.warning ul{margin:4px 0}.error li,.warning li{white-space:pre-wrap}ha-circular-progress{display:block;margin:auto}`}}]}}),r.WF)},54293:(e,i,t)=>{t.d(i,{k:()=>h});var o=t(63428);const n=(0,o.Ik)({user:(0,o.Yj)()}),a=(0,o.KC)([(0,o.zM)(),(0,o.Ik)({text:(0,o.lq)((0,o.Yj)()),excemptions:(0,o.lq)((0,o.YO)(n))})]),s=(0,o.Ik)({action:(0,o.eu)("url"),url_path:(0,o.Yj)(),confirmation:(0,o.lq)(a)}),r=(0,o.Ik)({action:(0,o.eu)("call-service"),service:(0,o.Yj)(),service_data:(0,o.lq)((0,o.Ik)()),data:(0,o.lq)((0,o.Ik)()),target:(0,o.lq)((0,o.Ik)({entity_id:(0,o.lq)((0,o.KC)([(0,o.Yj)(),(0,o.YO)((0,o.Yj)())])),device_id:(0,o.lq)((0,o.KC)([(0,o.Yj)(),(0,o.YO)((0,o.Yj)())])),area_id:(0,o.lq)((0,o.KC)([(0,o.Yj)(),(0,o.YO)((0,o.Yj)())]))})),confirmation:(0,o.lq)(a)}),l=(0,o.Ik)({action:(0,o.eu)("navigate"),navigation_path:(0,o.Yj)(),navigation_replace:(0,o.lq)((0,o.zM)()),confirmation:(0,o.lq)(a)}),d=(0,o.NW)({action:(0,o.eu)("assist"),pipeline_id:(0,o.lq)((0,o.Yj)()),start_listening:(0,o.lq)((0,o.zM)())}),c=(0,o.Ik)({action:(0,o.vP)(["none","toggle","more-info","call-service","url","navigate","assist"]),confirmation:(0,o.lq)(a)}),h=(0,o.OR)((e=>{if(e&&"object"==typeof e&&"action"in e)switch(e.action){case"call-service":return r;case"navigate":return l;case"url":return s;case"assist":return d}return c}))},30322:(e,i,t)=>{t.d(i,{l:()=>s});var o=t(63428),n=t(15696),a=t(54293);const s=(0,o.KC)([(0,o.Ik)({entity:(0,o.Yj)(),name:(0,o.lq)((0,o.Yj)()),icon:(0,o.lq)((0,o.Yj)()),image:(0,o.lq)((0,o.Yj)()),secondary_info:(0,o.lq)((0,o.Yj)()),format:(0,o.lq)((0,o.vP)(n.j)),state_color:(0,o.lq)((0,o.zM)()),tap_action:(0,o.lq)(a.k),hold_action:(0,o.lq)(a.k),double_tap_action:(0,o.lq)(a.k)}),(0,o.Yj)()])}};
//# sourceMappingURL=67915.7SKTRpJMj7A.js.map