export const id=87501;export const ids=[87501];export const modules={88485:(e,t,i)=>{i.d(t,{O:()=>o});i(21950),i(15445),i(24483),i(13478),i(46355),i(14612),i(53691),i(48455),i(8339),i(45819);var a=i(73765);const s=new Set(["grid"]),n={},o=e=>(0,a.Ue)("section",e,s,n)},43055:(e,t,i)=>{i.d(t,{a:()=>s,u:()=>n});i(21950),i(55888),i(8339);var a=i(77664);const s=()=>Promise.all([i.e(27311),i.e(22658),i.e(49774),i.e(62223),i.e(92717),i.e(80363),i.e(10957),i.e(68639),i.e(51440),i.e(78549)]).then(i.bind(i,52826)),n=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"hui-dialog-create-card",dialogImport:s,dialogParams:t})}},22360:(e,t,i)=>{i.d(t,{D:()=>n,d:()=>s});i(21950),i(55888),i(8339);var a=i(77664);const s=()=>i.e(57831).then(i.bind(i,57831)),n=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"hui-dialog-delete-card",dialogImport:s,dialogParams:t})}},74528:(e,t,i)=>{i.d(t,{a:()=>d});i(27934),i(55888);var a=i(98876),s=i(75610);const n=(e,t,i)=>{const a={message:t.localize("ui.common.successfully_deleted")};i&&(a.action={action:i,text:t.localize("ui.common.undo")}),(0,s.P)(e,a)};var o=i(22360),r=i(44497),l=i(67549);async function d(e,t,i,s){const d=(0,l.S2)(s),{cardIndex:c}=(0,l.gO)(s),h=(0,l.ys)(i.config,d);if("strategy"in h)throw new Error("Deleting cards in a strategy is not supported.");const u=h.cards[c];(0,o.D)(e,{cardConfig:u,deleteCard:async()=>{try{const a=(0,r.GO)(i.config,s);await i.saveConfig(a);n(e,t,(async()=>{await i.saveConfig((0,r.yF)(a,s,u))}))}catch(t){(0,a.showAlertDialog)(e,{text:`Deleting failed: ${t.message}`})}}})}},82298:(e,t,i)=>{i.d(t,{F:()=>a});const a="grid"},87501:(e,t,i)=>{i.a(e,(async(e,t)=>{try{var a=i(62659),s=i(76504),n=i(80792),o=(i(86176),i(21950),i(55888),i(66274),i(84531),i(98168),i(8339),i(40924)),r=i(18791),l=i(77664),d=(i(1683),i(40987)),c=i(77553),h=i(60368),u=i(88485),y=i(43055),v=i(62679),g=i(44497),m=i(74528),f=i(67549),p=i(71964),w=i(82298),_=e([c]);c=(_.then?(await _)():_)[0];(0,a.A)([(0,r.EM)("hui-section")],(function(e,t){class i extends t{constructor(...t){super(...t),e(this)}}return{F:i,d:[{kind:"field",decorators:[(0,r.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,r.MZ)({attribute:!1})],key:"config",value:void 0},{kind:"field",decorators:[(0,r.MZ)({attribute:!1})],key:"lovelace",value:void 0},{kind:"field",decorators:[(0,r.MZ)({type:Boolean,reflect:!0})],key:"preview",value:()=>!1},{kind:"field",decorators:[(0,r.MZ)({type:Number})],key:"index",value:void 0},{kind:"field",decorators:[(0,r.MZ)({type:Number})],key:"viewIndex",value:void 0},{kind:"field",decorators:[(0,r.wk)()],key:"_cards",value:()=>[]},{kind:"field",key:"_layoutElementType",value:void 0},{kind:"field",key:"_layoutElement",value:void 0},{kind:"field",key:"_listeners",value:()=>[]},{kind:"method",key:"_createCardElement",value:function(e){const t=document.createElement("hui-card");return t.hass=this.hass,t.preview=this.preview,t.config=e,t.addEventListener("card-updated",(e=>{e.stopPropagation(),this._cards=[...this._cards]})),t.load(),t}},{kind:"method",key:"createRenderRoot",value:function(){return this}},{kind:"method",key:"willUpdate",value:function(e){(0,s.A)((0,n.A)(i.prototype),"willUpdate",this).call(this,e);const t=e.get("config");!e.has("config")||t&&this.config===t||this._initializeConfig()}},{kind:"method",key:"disconnectedCallback",value:function(){(0,s.A)((0,n.A)(i.prototype),"disconnectedCallback",this).call(this),this._clearMediaQueries()}},{kind:"method",key:"connectedCallback",value:function(){(0,s.A)((0,n.A)(i.prototype),"connectedCallback",this).call(this),this._listenMediaQueries(),this._updateElement()}},{kind:"method",key:"update",value:function(e){(0,s.A)((0,n.A)(i.prototype),"update",this).call(this,e),this._layoutElement&&(e.has("hass")&&(this._cards.forEach((e=>{e.hass=this.hass})),this._layoutElement.hass=this.hass),e.has("lovelace")&&(this._layoutElement.lovelace=this.lovelace),e.has("preview")&&(this._layoutElement.preview=this.preview,this._cards.forEach((e=>{e.preview=this.preview}))),e.has("_cards")&&(this._layoutElement.cards=this._cards),(e.has("hass")||e.has("preview"))&&this._updateElement())}},{kind:"method",key:"_clearMediaQueries",value:function(){this._listeners.forEach((e=>e())),this._listeners=[]}},{kind:"method",key:"_listenMediaQueries",value:function(){var e;if(this._clearMediaQueries(),null===(e=this.config)||void 0===e||!e.visibility)return;const t=this.config.visibility,i=1===t.length&&"screen"===t[0].condition&&null!=t[0].media_query;this._listeners=(0,h.CZ)(this.config.visibility,(e=>{this._updateElement(i&&e)}))}},{kind:"method",key:"_initializeConfig",value:async function(){let e={...this.config},t=!1;(0,d.H)(e)&&(t=!0,e=await(0,p.xC)(e.strategy,this.hass)),e={...e,type:e.type||w.F};let i=!1;if(this._layoutElement&&this._layoutElementType===e.type||(i=!0,this._createLayoutElement(e)),this._createCards(e),this._layoutElement.isStrategy=t,this._layoutElement.hass=this.hass,this._layoutElement.lovelace=this.lovelace,this._layoutElement.index=this.index,this._layoutElement.viewIndex=this.viewIndex,this._layoutElement.cards=this._cards,i){for(;this.lastChild;)this.removeChild(this.lastChild);this._updateElement()}}},{kind:"method",key:"_updateElement",value:function(e){if(!this._layoutElement)return;const t=e||this.preview||!this.config.visibility||(0,h.XH)(this.config.visibility,this.hass);this.hidden!==!t&&(this.style.setProperty("display",t?"":"none"),this.toggleAttribute("hidden",!t),(0,l.r)(this,"section-visibility-changed",{value:t})),!t&&this._layoutElement.parentElement?this.removeChild(this._layoutElement):t&&!this._layoutElement.parentElement&&this.appendChild(this._layoutElement)}},{kind:"method",key:"_createLayoutElement",value:function(e){this._layoutElement=(0,u.O)(e),this._layoutElementType=e.type,this._layoutElement.addEventListener("ll-create-card",(e=>{var t;e.stopPropagation(),this.lovelace&&(0,y.u)(this,{lovelaceConfig:this.lovelace.config,saveConfig:this.lovelace.saveConfig,path:[this.viewIndex,this.index],suggestedCards:null===(t=e.detail)||void 0===t?void 0:t.suggested})})),this._layoutElement.addEventListener("ll-edit-card",(e=>{if(e.stopPropagation(),!this.lovelace)return;const{cardIndex:t}=(0,f.gO)(e.detail.path);(0,v.O)(this,{lovelaceConfig:this.lovelace.config,saveConfig:this.lovelace.saveConfig,path:[this.viewIndex,this.index],cardIndex:t})})),this._layoutElement.addEventListener("ll-delete-card",(e=>{if(e.stopPropagation(),this.lovelace)if(e.detail.confirm)(0,m.a)(this,this.hass,this.lovelace,e.detail.path);else{const t=(0,g.GO)(this.lovelace.config,e.detail.path);this.lovelace.saveConfig(t)}}))}},{kind:"method",key:"_createCards",value:function(e){e&&e.cards&&Array.isArray(e.cards)?this._cards=e.cards.map((e=>this._createCardElement(e))):this._cards=[]}}]}}),o.mN);t()}catch(e){t(e)}}))},71964:(e,t,i)=>{i.d(t,{Nu:()=>l,Xd:()=>h,d4:()=>y,uN:()=>c,xC:()=>u});i(27934),i(21950),i(55888),i(98168),i(8339);if(33524==i.j)var a=i(79861);if(33524==i.j)var s=i(47387);var n=i(50599);const o="custom:",r={dashboard:{"original-states":()=>i.e(86334).then(i.bind(i,86334)),map:()=>i.e(91570).then(i.bind(i,91570)),iframe:()=>i.e(5296).then(i.bind(i,5296))},view:{"original-states":()=>Promise.all([i.e(75064),i.e(91048),i.e(71460),i.e(71518),i.e(52351)]).then(i.bind(i,52351)),energy:()=>Promise.all([i.e(75064),i.e(91048),i.e(71460),i.e(49137),i.e(85685)]).then(i.bind(i,85685)),map:()=>i.e(7979).then(i.bind(i,7979)),iframe:()=>i.e(15421).then(i.bind(i,15421))},section:{}},l=async(e,t)=>{var i;if(t in r[e]){await r[e][t]();const i=`${t}-${e}-strategy`;return customElements.get(i)}if(!t.startsWith(o))throw new Error("Unknown strategy");const a=`ll-strategy-${t.slice(7)}`,s=`ll-strategy-${e}-${t.slice(7)}`;if(!0===await Promise.race([customElements.whenDefined(a),customElements.whenDefined(s),new Promise((e=>{setTimeout((()=>e(!0)),5e3)}))]))throw new Error(`Timeout waiting for strategy element ${s} to be registered`);return null!==(i=customElements.get(s))&&void 0!==i?i:customElements.get(a)},d=async(e,t,i,a)=>{const s=i.type;if(!s)return t("No strategy type found");try{const t=await l(e,s);if((0,n.Xo)(t)){if("dashboard"===e&&"generateDashboard"in t)return await t.generateDashboard({config:{strategy:i,views:[]},hass:a});if("view"===e&&"generateView"in t)return await t.generateView({config:{views:[]},view:{strategy:i},hass:a})}const o=(0,n._V)(i);return await t.generate(o,a)}catch(e){return"timeout"!==e.message&&console.error(e),t(e)}},c=async(e,t)=>d("dashboard",(e=>({views:[{title:"Error",cards:[{type:"markdown",content:`Error loading the dashboard strategy:\n> ${e}`}]}]})),e,t),h=async(e,t)=>d("view",(e=>({cards:[{type:"markdown",content:`Error loading the view strategy:\n> ${e}`}]})),e,t),u=async(e,t)=>d("section",(e=>({cards:[{type:"markdown",content:`Error loading the section strategy:\n> ${e}`}]})),e,t),y=async(e,t)=>{const i=(0,a.Wu)(e)?await c(e.strategy,t):{...e};return i.views=await Promise.all(i.views.map((async e=>{const i=(0,s.R)(e)?await h(e.strategy,t):{...e};return i.sections&&(i.sections=await Promise.all(i.sections.map((async e=>(0,s.R)(e)?await u(e.strategy,t):{...e})))),i}))),i}},50599:(e,t,i)=>{i.d(t,{B2:()=>s,Xo:()=>a,_V:()=>n});const a=e=>!("generate"in e),s=e=>2===Object.keys(e).length&&"options"in e&&"object"==typeof e.options,n=e=>{if(!s(e))return e;const t={...e,...e.options};return delete t.options,t}}};
//# sourceMappingURL=87501.8AqZKsc89ng.js.map