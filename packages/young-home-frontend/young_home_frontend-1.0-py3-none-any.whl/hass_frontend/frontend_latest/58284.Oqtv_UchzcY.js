export const id=58284;export const ids=[58284];export const modules={58284:(t,e,i)=>{i.a(t,(async(t,s)=>{try{i.r(e),i.d(e,{HuiStatisticCard:()=>k});var n=i(62659),a=i(76504),o=i(80792),r=(i(27934),i(21950),i(55888),i(8339),i(40924)),h=i(18791),c=i(60005),d=i(77664),l=i(55970),f=i(56601),u=(i(12261),i(54373),i(40806),i(74959)),_=i(40068),v=i(3433),m=i(15821),y=i(69061),p=t([f]);f=(p.then?(await p)():p)[0];let k=(0,n.A)([(0,h.EM)("hui-statistic-card")],(function(t,e){class s extends e{constructor(...e){super(...e),t(this)}}return{F:s,d:[{kind:"method",static:!0,key:"getConfigElement",value:async function(){return await Promise.all([i.e(23006),i.e(93108)]).then(i.bind(i,66339)),document.createElement("hui-statistic-card-editor")}},{kind:"method",static:!0,key:"getStubConfig",value:function(t,e,i){return{entity:(0,v.B)(t,1,e,i,["sensor"],(t=>"state_class"in t.attributes))[0]||"",period:{calendar:{period:"month"}}}}},{kind:"field",decorators:[(0,h.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,h.wk)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,h.wk)()],key:"_value",value:void 0},{kind:"field",decorators:[(0,h.wk)()],key:"_metadata",value:void 0},{kind:"field",decorators:[(0,h.wk)()],key:"_error",value:void 0},{kind:"field",key:"_interval",value:void 0},{kind:"field",key:"_footerElement",value:void 0},{kind:"method",key:"disconnectedCallback",value:function(){(0,a.A)((0,o.A)(s.prototype),"disconnectedCallback",this).call(this),clearInterval(this._interval)}},{kind:"method",key:"setConfig",value:function(t){if(!t.entity)throw new Error("Entity must be specified");if(!t.stat_type)throw new Error("Statistic type must be specified");if(!t.period)throw new Error("Period must be specified");if(t.entity&&!(0,u.OQ)(t.entity)&&!(0,l.n)(t.entity))throw new Error("Invalid entity");this._config=t,this._error=void 0,this._fetchStatistic(),this._fetchMetadata(),this._config.footer?this._footerElement=(0,y.x)(this._config.footer):this._footerElement&&(this._footerElement=void 0)}},{kind:"method",key:"getCardSize",value:async function(){let t=2;if(this._footerElement){const e=(0,_.Z)(this._footerElement);t+=e instanceof Promise?await e:e}return t}},{kind:"method",key:"render",value:function(){if(!this._config||!this.hass)return r.s6;if(this._error)return r.qy` <ha-alert alert-type="error">${this._error}</ha-alert> `;const t=this.hass.states[this._config.entity],e=this._config.name||(0,u.$O)(this.hass,this._config.entity,this._metadata);return r.qy` <ha-card @click="${this._handleClick}" tabindex="0"> <div class="header"> <div class="name" .title="${e}">${e}</div> <div class="icon"> <ha-state-icon .icon="${this._config.icon}" .stateObj="${t}" .hass="${this.hass}"></ha-state-icon> </div> </div> <div class="info"> <span class="value">${void 0===this._value?"":null===this._value?"?":(0,f.ZV)(this._value,this.hass.locale)}</span> <span class="measurement">${this._config.unit||(0,u.JE)(this.hass,this._config.entity,this._metadata)}</span> </div> ${this._footerElement} </ha-card> `}},{kind:"method",key:"shouldUpdate",value:function(t){return this._footerElement&&(this._footerElement.hass=this.hass),!!(t.has("_value")||t.has("_metadata")||t.has("_error"))||(!this._config||(0,m.LX)(this,t))}},{kind:"method",key:"firstUpdated",value:function(){this._fetchStatistic(),this._fetchMetadata()}},{kind:"method",key:"updated",value:function(t){if((0,a.A)((0,o.A)(s.prototype),"updated",this).call(this,t),!this._config||!this.hass)return;const e=t.get("hass"),i=t.get("_config");e&&i&&e.themes===this.hass.themes&&i.theme===this._config.theme||(0,c.Q)(this,this.hass.themes,this._config.theme)}},{kind:"method",key:"_fetchStatistic",value:async function(){if(this.hass&&this._config){clearInterval(this._interval),this._interval=window.setInterval((()=>this._fetchStatistic()),3e5);try{const t=await(0,u.pJ)(this.hass,this._config.entity,this._config.period);this._value=t[this._config.stat_type],this._error=void 0}catch(t){this._error=t.message}}}},{kind:"method",key:"_fetchMetadata",value:async function(){if(this.hass&&this._config)try{var t;this._metadata=null===(t=await(0,u.Wr)(this.hass,[this._config.entity]))||void 0===t?void 0:t[0]}catch(t){this._error=t.message}}},{kind:"method",key:"_handleClick",value:function(){(0,d.r)(this,"hass-more-info",{entityId:this._config.entity})}},{kind:"get",static:!0,key:"styles",value:function(){return[r.AH`ha-card{height:100%;display:flex;flex-direction:column;justify-content:space-between;cursor:pointer;outline:0}.header{display:flex;padding:8px 16px 0;justify-content:space-between}.name{color:var(--secondary-text-color);line-height:40px;font-weight:500;font-size:16px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.icon{color:var(--state-icon-color,#44739e);line-height:40px}.info{padding:0px 16px 16px;margin-top:-4px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;line-height:28px}.value{font-size:28px;margin-right:4px;margin-inline-end:4px;margin-inline-start:initial}.measurement{font-size:18px;color:var(--secondary-text-color)}`]}}]}}),r.WF);s()}catch(t){s(t)}}))}};
//# sourceMappingURL=58284.Oqtv_UchzcY.js.map