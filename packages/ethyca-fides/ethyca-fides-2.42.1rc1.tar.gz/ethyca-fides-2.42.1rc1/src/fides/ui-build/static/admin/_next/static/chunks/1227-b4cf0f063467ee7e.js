(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1227],{95372:function(e){e.exports=function(e,t,s,a){for(var i=e.length,n=s+(a?1:-1);a?n--:++n<i;)if(t(e[n],n,e))return n;return -1}},56632:function(e,t,s){var a=s(89278),i=s(80068),n=s(50098);e.exports=function(e){return function(t,s,r){var l=Object(t);if(!i(t)){var o=a(s,3);t=n(t),s=function(e){return o(l[e],e,l)}}var c=e(t,s,r);return c>-1?l[o?t[c]:c]:void 0}}},64925:function(e,t,s){var a=s(56632)(s(66259));e.exports=a},66259:function(e,t,s){var a=s(95372),i=s(89278),n=s(47991),r=Math.max;e.exports=function(e,t,s){var l=null==e?0:e.length;if(!l)return -1;var o=null==s?0:n(s);return o<0&&(o=r(l+o,0)),a(e,i(t,3),o)}},94919:function(e,t,s){var a=s(91936),i=1/0;e.exports=function(e){return e?(e=a(e))===i||e===-i?(e<0?-1:1)*17976931348623157e292:e==e?e:0:0===e?e:0}},47991:function(e,t,s){var a=s(94919);e.exports=function(e){var t=a(e),s=t%1;return t==t?s?t-s:t:0}},19310:function(e,t,s){"use strict";var a=s(24246),i=s(64925),n=s.n(i),r=s(44296),l=s(91650),o=s(79851),c=s(47411);let d=()=>{let{isLoading:e}=(0,o.fd)(),t=(0,r.C)(o.U3),{isLoading:s}=(0,c.MO)(),a=(0,r.C)(c.qb),{isLoading:i}=(0,l.te)();return{dataUses:t,dataSubjects:(0,r.C)(l.ZL),dataCategories:a,isLoading:e||s||i}};t.Z=()=>{let{dataUses:e,dataCategories:t,dataSubjects:s,isLoading:i}=d(),r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.split(".").slice(0,t).join(".")},l=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=t(e);if(!i)return e;let n=t(r(e,s));return i.parent_key&&(null==n?void 0:n.name)!==i.name?(0,a.jsxs)("span",{children:[(0,a.jsxs)("strong",{children:[null==n?void 0:n.name,":"]})," ",i.name]},e):(0,a.jsx)("strong",{children:i.name},e)},o=t=>n()(e,{fides_key:t}),c=e=>n()(t,{fides_key:e}),u=e=>n()(s,{fides_key:e});return{getDataUses:()=>e,getDataUseByKey:o,getDataUseDisplayName:e=>l(e,o,1),getDataCategories:()=>t,getDataCategoryByKey:c,getDataCategoryDisplayName:e=>l(e,c,2),getDataSubjects:()=>s,getDataSubjectByKey:u,getDataSubjectDisplayName:e=>{let t=u(e);return t?t.name:e},getPrimaryKey:r,isLoading:i}}},37429:function(e,t,s){"use strict";var a=s(24246),i=s(58727),n=s(27378),r=s(12538),l=s(35682),o=s(6111),c=s(59104),d=s(52962);t.Z=e=>{let{resource:t}=e,s=(0,d.G)(t),[u]=(0,o.cM)(),[g]=(0,o.vi)(),[x,f]=(0,n.useState)(!1),{diff_status:m,child_diff_statuses:j}=t;if(s===c.X.DATABASE)return null;let h=m===r.LL.CLASSIFICATION_ADDITION||m===r.LL.CLASSIFICATION_UPDATE,v=j&&(j[r.LL.CLASSIFICATION_ADDITION]||j[r.LL.CLASSIFICATION_UPDATE]),p=h||v,C=h||v;return(0,a.jsxs)(i.Ugi,{onClick:e=>e.stopPropagation(),children:[p&&(0,a.jsx)(l.Z,{title:"Confirm",icon:(0,a.jsx)(i.nQG,{}),onClick:async()=>{f(!0),await u({staged_resource_urn:t.urn}),f(!1)},disabled:x}),C&&(0,a.jsx)(l.Z,{title:"Ignore",icon:(0,a.jsx)(i.tpL,{}),onClick:async()=>{f(!0),await g({staged_resource_urn:t.urn}),f(!1)},disabled:x}),x?(0,a.jsx)(i.X40,{position:"static"}):null]})}},42320:function(e,t,s){"use strict";s.d(t,{Z:function(){return E}});var a=s(24246),i=s(59003),n=s(92222),r=s(58727),l=s(27378),o=s(52850),c=s(6111),d=s(98320),u=s(21635),g=s(51557),x=s(59104),f=s(15025),m=s(12538),j=s(37429),h=s(36986),v=s(19310),p=s(69883);let C=e=>{let{data:t,setValue:s}=e,{getPrimaryKey:i,getDataCategoryByKey:n}=(0,v.Z)(),l=n(i(t.value,2));return(0,a.jsxs)(r.xuv,{onClick:()=>s(t,"select-option"),cursor:"pointer",borderBottomColor:"gray.100",borderBottomWidth:1,paddingX:3,paddingY:1.5,_hover:{backgroundColor:"gray.100"},"data-testid":"option-".concat(t.value),children:[(0,a.jsxs)(r.Ugi,{gap:0,alignItems:"flex-start",children:[(0,a.jsx)(r.Cts,{paddingX:1,paddingY:0,bgColor:"gray.300",fontSize:"xx-small",children:null==l?void 0:l.name}),(0,a.jsxs)(r.xvT,{fontSize:"xs",whiteSpace:"normal",children:[": ",t.description]})]}),(0,a.jsx)(r.xvT,{fontSize:"xs",color:"gray.500",children:t.value})]})};var I=e=>{let{onChange:t,menuIsOpen:s,showDisabled:i=!1}=e,{getDataCategoryDisplayName:n,getDataCategories:r}=(0,v.Z)(),l=(i?r():r().filter(e=>e.active)).map(e=>({value:e.fides_key,label:n(e.fides_key),description:e.description||""}));return(0,a.jsx)(p.Z,{placeholder:"Select a category",onChange:t,options:l,size:"sm",menuPosition:"absolute",menuPlacement:"auto",components:{Option:C},menuIsOpen:s,chakraStyles:{menuList:e=>({...e,paddingTop:0,paddingBottom:0})}})},S=s(65399),_=e=>{var t,s;let{fidesLangKey:i,isEditable:n=!1,resource:o}=e,[d,u]=(0,l.useState)(!1),{getDataCategoryDisplayName:g}=(0,v.Z)(),[x]=(0,c.NA)(),f=(0,l.useCallback)(()=>{u(!1)},[]),{ref:m}=(0,S.O3)(f);if(!i)return(0,a.jsx)(r.Cts,{textTransform:"none",children:"None"});let j=g((null===(t=o.user_assigned_data_categories)||void 0===t?void 0:t.length)?o.user_assigned_data_categories[0]:i);return(0,a.jsxs)(r.xuv,{display:"flex",h:"100%",alignItems:"center",position:"relative",width:"100%",ref:m,children:[(0,a.jsxs)(r.Cts,{fontWeight:"normal",textTransform:"none",onClick:()=>{n&&u(!0)},cursor:n?"pointer":"default","data-testid":"classification-".concat(null!==(s=o.name)&&void 0!==s?s:o.urn),children:[j," ",n&&(0,a.jsx)(r.dY8,{marginLeft:.5})]}),d&&(0,a.jsx)(r.xuv,{className:"select-wrapper",position:"absolute",zIndex:10,top:"0",left:"0",width:"100%",height:"max",bgColor:"#fff",children:(0,a.jsx)(I,{onChange:e=>{x({staged_resource_urn:o.urn,monitor_config_id:o.monitor_config_id,user_assigned_data_categories:[e.value]})},menuIsOpen:!0})})]})},y=s(63969),L=e=>{let{resourceType:t}=e,s=(0,n.Cl)();return t===x.X.SCHEMA?{columns:[s.accessor(e=>e.name,{id:"name",cell:e=>(0,a.jsx)(h.Z,{result:e.row.original,changeTypeOverride:g.E.CLASSIFICATION}),header:e=>(0,a.jsx)(o.Rr,{value:"Name",...e})}),s.accessor(e=>e.urn,{id:"project",cell:e=>(0,a.jsx)(o.G3,{value:(0,f.Z)(e.getValue())}),header:e=>(0,a.jsx)(o.Rr,{value:"Project",...e})}),s.display({id:"status",cell:e=>(0,a.jsx)(u.Z,{result:e.row.original}),header:e=>(0,a.jsx)(o.Rr,{value:"Status",...e})}),s.accessor(e=>(0,y.Z)(e),{id:"type",cell:e=>(0,a.jsx)(o.G3,{value:e.getValue()}),header:e=>(0,a.jsx)(o.Rr,{value:"Type",...e})}),s.accessor(e=>e.monitor_config_id,{id:"monitor",cell:e=>(0,a.jsx)(o.G3,{value:e.getValue()}),header:e=>(0,a.jsx)(o.Rr,{value:"Detected by",...e})}),s.accessor(e=>e.source_modified,{id:"time",cell:e=>(0,a.jsx)(d.Cy,{time:e.getValue()}),header:e=>(0,a.jsx)(o.Rr,{value:"When",...e})}),s.display({id:"action",cell:e=>e.row.original.diff_status===m.LL.MONITORED?(0,a.jsx)(j.Z,{resource:e.row.original}):(0,a.jsx)(o.G3,{value:"--"}),header:"Actions"})]}:t===x.X.TABLE?{columns:[s.display({id:"select",cell:e=>{var t;let{row:s}=e;return(0,a.jsx)(d.k,{isChecked:s.getIsSelected(),onChange:s.getToggleSelectedHandler(),dataTestId:"select-".concat(null!==(t=s.original.name)&&void 0!==t?t:s.id)})},header:e=>{let{table:t}=e;return(0,a.jsx)(d.k,{isChecked:t.getIsAllPageRowsSelected(),isIndeterminate:t.getIsSomeRowsSelected(),onChange:t.getToggleAllRowsSelectedHandler(),dataTestId:"select-all-rows"})},maxSize:25}),s.accessor(e=>e.name,{id:"tables",cell:e=>(0,a.jsx)(h.Z,{result:e.row.original}),header:e=>(0,a.jsx)(o.Rr,{value:"Table name",...e})}),s.display({id:"status",cell:e=>(0,a.jsx)(u.Z,{result:e.row.original}),header:e=>(0,a.jsx)(o.Rr,{value:"Status",...e})}),s.display({id:"type",cell:()=>(0,a.jsx)(o.G3,{value:"Table"}),header:"Type"}),s.accessor(e=>e.source_modified,{id:"time",cell:e=>(0,a.jsx)(d.Cy,{time:e.getValue()}),header:"Time"}),s.display({id:"actions",cell:e=>(0,a.jsx)(j.Z,{resource:e.row.original}),header:"Actions"})]}:t===x.X.FIELD?{columns:[s.accessor(e=>e.name,{id:"name",cell:e=>(0,a.jsx)(h.Z,{result:e.row.original}),header:e=>(0,a.jsx)(o.Rr,{value:"Field name",...e})}),s.display({id:"status",cell:e=>(0,a.jsx)(u.Z,{result:e.row.original}),header:e=>(0,a.jsx)(o.Rr,{value:"Status",...e})}),s.display({id:"type",cell:()=>(0,a.jsx)(o.G3,{value:"Field"}),header:"Type"}),s.accessor(e=>e.classifications,{id:"classifications",cell:e=>{var t;let s=(null===(t=e.getValue())||void 0===t?void 0:t.length)?e.getValue()[0]:null;return(0,a.jsx)(_,{fidesLangKey:null==s?void 0:s.label,isEditable:!0,resource:e.row.original})},meta:{overflow:"visible"},header:"Data category",minSize:280}),s.accessor(e=>e.source_modified,{id:"time",cell:e=>(0,a.jsx)(d.Cy,{time:e.getValue()}),header:e=>(0,a.jsx)(o.Rr,{value:"When",...e})}),s.display({id:"actions",cell:e=>(0,a.jsx)(j.Z,{resource:e.row.original}),header:"Actions"})]}:{columns:[]}},A=s(38637),T=s(87573),b=s(35682),w=e=>{let{resourceUrn:t}=e,[s,{isLoading:i}]=(0,c.Hf)(),[n,{isLoading:l}]=(0,c.zV)(),o=i||l,d=async e=>{await n({staged_resource_urns:e})},u=async e=>{await s({staged_resource_urns:e})};return(0,a.jsx)(r.kCb,{direction:"row",align:"center",justify:"center",w:"full","data-testid":"bulk-actions-menu",children:(0,a.jsxs)(r.hE2,{children:[(0,a.jsx)(b.Z,{title:"Confirm all",icon:(0,a.jsx)(r.nQG,{}),onClick:()=>u([t]),disabled:o,variant:"solid",colorScheme:"primary"}),(0,a.jsx)(b.Z,{title:"Ignore all",icon:(0,a.jsx)(r.tpL,{}),disabled:o,onClick:()=>d([t])})]})})},k=e=>{let{selectedUrns:t}=e,[s,{isLoading:i}]=(0,c.Hf)(),[n,{isLoading:l}]=(0,c.zV)(),o=i||l,d=async e=>{await s({staged_resource_urns:e})},u=async e=>{await n({staged_resource_urns:e})};return t.length?(0,a.jsxs)(r.kCb,{direction:"row",align:"center",justify:"center",w:"full","data-testid":"bulk-actions-menu",children:[(0,a.jsx)(r.xvT,{fontSize:"xs",fontWeight:"semibold",minW:16,mr:6,children:"".concat(t.length," selected")}),(0,a.jsxs)(r.hE2,{children:[(0,a.jsx)(b.Z,{title:"Confirm",icon:(0,a.jsx)(r.nQG,{}),onClick:()=>d(t),disabled:o,variant:"solid",colorScheme:"primary"}),(0,a.jsx)(b.Z,{title:"Ignore",icon:(0,a.jsx)(r.tpL,{}),disabled:o,onClick:()=>u(t)})]})]}):null},D=s(52962),Z=s(71329),N=s(22770);let R={items:[],total:0,page:1,size:50,pages:1},O=()=>(0,a.jsx)(r.gCW,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"empty-state",alignSelf:"center",margin:"auto",children:(0,a.jsxs)(r.gCW,{children:[(0,a.jsx)(r.xvT,{fontSize:"md",fontWeight:"600",children:"No activity found"}),(0,a.jsx)(r.xvT,{fontSize:"sm",children:"You're up to date!"})]})});var E=e=>{let{resourceUrn:t}=e,s=[m.LL.CLASSIFICATION_ADDITION,m.LL.CLASSIFICATION_UPDATE],d=[m.LL.CLASSIFICATION_ADDITION,m.LL.CLASSIFICATION_UPDATE],[u,g]=(0,l.useState)(""),[f,j]=(0,l.useState)({}),{PAGE_SIZES:h,pageSize:v,setPageSize:p,onPreviousPageClick:C,isPreviousPageDisabled:I,onNextPageClick:S,isNextPageDisabled:_,startRange:y,endRange:b,pageIndex:E,setTotalPages:z}=(0,o.oi)(),{isFetching:F,isLoading:P,data:G}=(0,c.z8)({staged_resource_urn:t,page:E,size:v,child_diff_status:d,diff_status:s,search:u}),U=(0,D.G)(null==G?void 0:G.items[0]),M=U===x.X.FIELD,{items:V,total:W,pages:X}=(0,l.useMemo)(()=>null!=G?G:R,[G]);(0,l.useEffect)(()=>{z(X)},[X,z]);let{columns:B}=L({resourceType:U}),H=(0,l.useMemo)(()=>B,[B]),{navigateToDiscoveryResults:Q}=(0,A.Z)(),Y=(0,i.b7)({getCoreRowModel:(0,n.sC)(),getGroupedRowModel:(0,n.qe)(),getExpandedRowModel:(0,n.rV)(),columns:H,manualPagination:!0,onRowSelectionChange:j,state:{rowSelection:f},getRowId:Z.Z,data:V}),q=Object.keys(f).filter(e=>f[e]);return P?(0,a.jsx)(o.I4,{rowHeight:36,numRows:36}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Q$,{children:(0,a.jsxs)(r.kCb,{gap:6,align:"center",children:[(0,a.jsx)(r.xuv,{w:400,flexShrink:0,children:(0,a.jsx)(N.M,{value:u,onChange:g})}),(0,a.jsx)(T.Z,{}),!!q.length&&(0,a.jsx)(r.kCb,{align:"center",children:U===x.X.TABLE&&(0,a.jsx)(k,{selectedUrns:q})}),U===x.X.FIELD&&(0,a.jsx)(w,{resourceUrn:t})]})}),(0,a.jsx)(o.ZK,{tableInstance:Y,onRowClick:M?void 0:e=>Q({resourceUrn:e.urn}),emptyTableNotice:(0,a.jsx)(O,{}),overflow:"visible"}),(0,a.jsx)(o.s8,{totalRows:W,pageSizes:h,setPageSize:p,onPreviousPageClick:C,isPreviousPageDisabled:I||F,onNextPageClick:S,isNextPageDisabled:_||F,startRange:y,endRange:b})]})}},22236:function(e,t,s){"use strict";var a,i;s.d(t,{z:function(){return a}}),(i=a||(a={})).DATASET="Dataset",i.CLASSIFICATION="Classification"},63969:function(e,t,s){"use strict";var a=s(51557),i=s(58525),n=s(22236);t.Z=e=>(0,i.Z)(e)===a.E.CLASSIFICATION?n.z.CLASSIFICATION:n.z.DATASET}}]);