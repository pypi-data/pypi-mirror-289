(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1227],{95372:function(e){e.exports=function(e,t,i,s){for(var a=e.length,n=i+(s?1:-1);s?n--:++n<a;)if(t(e[n],n,e))return n;return -1}},56632:function(e,t,i){var s=i(89278),a=i(80068),n=i(50098);e.exports=function(e){return function(t,i,r){var l=Object(t);if(!a(t)){var o=s(i,3);t=n(t),i=function(e){return o(l[e],e,l)}}var c=e(t,i,r);return c>-1?l[o?t[c]:c]:void 0}}},64925:function(e,t,i){var s=i(56632)(i(66259));e.exports=s},66259:function(e,t,i){var s=i(95372),a=i(89278),n=i(47991),r=Math.max;e.exports=function(e,t,i){var l=null==e?0:e.length;if(!l)return -1;var o=null==i?0:n(i);return o<0&&(o=r(l+o,0)),s(e,a(t,3),o)}},94919:function(e,t,i){var s=i(91936),a=1/0;e.exports=function(e){return e?(e=s(e))===a||e===-a?(e<0?-1:1)*17976931348623157e292:e==e?e:0:0===e?e:0}},47991:function(e,t,i){var s=i(94919);e.exports=function(e){var t=s(e),i=t%1;return t==t?i?t-i:t:0}},19310:function(e,t,i){"use strict";var s=i(24246),a=i(64925),n=i.n(a),r=i(44296),l=i(91650),o=i(79851),c=i(47411);let d=()=>{let{isLoading:e}=(0,o.fd)(),t=(0,r.C)(o.U3),{isLoading:i}=(0,c.MO)(),s=(0,r.C)(c.qb),{isLoading:a}=(0,l.te)();return{dataUses:t,dataSubjects:(0,r.C)(l.ZL),dataCategories:s,isLoading:e||i||a}};t.Z=()=>{let{dataUses:e,dataCategories:t,dataSubjects:i,isLoading:a}=d(),r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.split(".").slice(0,t).join(".")},l=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=t(e);if(!a)return e;let n=t(r(e,i));return a.parent_key&&(null==n?void 0:n.name)!==a.name?(0,s.jsxs)("span",{children:[(0,s.jsxs)("strong",{children:[null==n?void 0:n.name,":"]})," ",a.name]},e):(0,s.jsx)("strong",{children:a.name},e)},o=t=>n()(e,{fides_key:t}),c=e=>n()(t,{fides_key:e}),u=e=>n()(i,{fides_key:e});return{getDataUses:()=>e,getDataUseByKey:o,getDataUseDisplayName:e=>l(e,o,1),getDataCategories:()=>t,getDataCategoryByKey:c,getDataCategoryDisplayName:e=>l(e,c,2),getDataSubjects:()=>i,getDataSubjectByKey:u,getDataSubjectDisplayName:e=>{let t=u(e);return t?t.name:e},getPrimaryKey:r,isLoading:a}}},37429:function(e,t,i){"use strict";var s=i(24246),a=i(17749),n=i(27378),r=i(12538),l=i(35682),o=i(6111),c=i(59104),d=i(52962);t.Z=e=>{let{resource:t}=e,i=(0,d.G)(t),[u]=(0,o.cM)(),[g]=(0,o.vi)(),[x,m]=(0,n.useState)(!1),{diff_status:h,child_diff_statuses:f}=t;if(i===c.X.DATABASE)return null;let j=h===r.LL.CLASSIFICATION_ADDITION||h===r.LL.CLASSIFICATION_UPDATE,p=f&&(f[r.LL.CLASSIFICATION_ADDITION]||f[r.LL.CLASSIFICATION_UPDATE]),v=j||p,C=j||p;return(0,s.jsxs)(a.Ugi,{onClick:e=>e.stopPropagation(),children:[v&&(0,s.jsx)(l.Z,{title:"Confirm",icon:(0,s.jsx)(a.nQG,{}),onClick:async()=>{m(!0),await u({staged_resource_urn:t.urn}),m(!1)},disabled:x}),C&&(0,s.jsx)(l.Z,{title:"Ignore",icon:(0,s.jsx)(a.tpL,{}),onClick:async()=>{m(!0),await g({staged_resource_urn:t.urn}),m(!1)},disabled:x}),x?(0,s.jsx)(a.X40,{position:"static"}):null]})}},42320:function(e,t,i){"use strict";i.d(t,{Z:function(){return F}});var s=i(24246),a=i(59003),n=i(92222),r=i(17749),l=i(27378),o=i(52850),c=i(6111),d=i(98320),u=i(21635),g=i(51557),x=i(59104),m=i(15025),h=i(12538),f=i(37429),j=i(36986),p=i(19310),v=i(69883),C=i(34803),S=i(94167);let _=e=>{let{data:t,setValue:i}=e,{getPrimaryKey:a,getDataCategoryByKey:n}=(0,p.Z)(),l=n(a(t.value,2));return(0,s.jsxs)(r.xuv,{onClick:()=>i(t,"select-option"),cursor:"pointer",borderBottomColor:"gray.100",borderBottomWidth:1,paddingX:3,paddingY:1.5,_hover:{backgroundColor:"gray.100"},"data-testid":"option-".concat(t.value),children:[(0,s.jsxs)(r.Ugi,{gap:1,alignItems:"center",children:[(0,s.jsx)(r.Vp9,{paddingX:2,paddingY:0,fontWeight:600,colorScheme:"gray",fontSize:"xs",children:(0,S.G8)((null==l?void 0:l.name)||"")}),(0,s.jsxs)(r.xvT,{fontSize:"sm",whiteSpace:"normal",children:[": ",t.value]})]}),(0,s.jsx)(r.xvT,{fontSize:"xs",lineHeight:"18px",mt:1,color:"gray.500",whiteSpace:"normal",children:t.description})]})};var I=e=>{let{onChange:t,menuIsOpen:i,showDisabled:a=!1}=e,{getDataCategoryDisplayName:n,getDataCategories:r}=(0,p.Z)(),l=(a?r():r().filter(e=>e.active)).map(e=>({value:e.fides_key,label:n(e.fides_key),description:e.description||""}));return(0,s.jsx)(v.Z,{placeholder:"Select a category...",onChange:t,options:l,size:"sm",menuPosition:"absolute",autoFocus:!0,isSearchable:!0,menuPlacement:"auto",components:{Option:_},menuIsOpen:i,chakraStyles:{...C.hP,control:e=>({...e,border:"none"}),menuList:e=>({...e,paddingTop:0,paddingBottom:0,mt:10,position:"fixed",overflowX:"hidden",maxWidth:"lg"})}})},y=i(65399),b=e=>{var t,i;let{resource:a}=e,[n,o]=(0,l.useState)(!1),{getDataCategoryDisplayName:d}=(0,p.Z)(),[u]=(0,c.NA)(),g=(0,l.useCallback)(()=>{o(!1)},[]),{ref:x}=(0,y.O3)(g),m=(null===(t=a.classifications)||void 0===t?void 0:t.length)?a.classifications[0].label:null,h=null!==(i=a.user_assigned_data_categories)&&void 0!==i?i:[];if(!m&&!(null==h?void 0:h.length))return(0,s.jsx)(r.Cts,{textTransform:"none",children:"None"});let f=e=>{var t;u({staged_resource_urn:a.urn,monitor_config_id:a.monitor_config_id,user_assigned_data_categories:null!==(t=null==h?void 0:h.filter(t=>t!==e))&&void 0!==t?t:[]})},j=!n&&!!h.length,v=!n&&!!m&&!h.length;return(0,s.jsxs)(r.Eq9,{py:2,alignItems:"center",position:"relative",width:"100%",gap:2,overflowX:"auto",ref:x,children:[j&&(0,s.jsxs)(s.Fragment,{children:[h.map(e=>(0,s.jsxs)(r.Cts,{fontWeight:"normal",textTransform:"none","data-testid":"classification-".concat(e),px:1.5,children:[d(e),(0,s.jsx)(r.hU,{onClick:()=>f(e),icon:(0,s.jsx)(r.Two,{boxSize:2}),size:"2xs",mt:-.5,ml:2,"aria-label":"Remove category"})]},e)),(0,s.jsx)(r.hU,{w:"20px",h:"20px",minW:"20px",borderRadius:"sm",icon:(0,s.jsx)(r.jBn,{}),onClick:()=>o(!0),"data-testid":"add-category-btn","aria-label":"Add category"})]}),v&&(0,s.jsxs)(r.Cts,{fontWeight:"normal",textTransform:"none",px:1.5,onClick:()=>o(!0),cursor:"pointer","data-testid":"classification-".concat(m),children:[d(m)," ",(0,s.jsx)(r.dY8,{ml:.5,mt:-.5})]}),n&&(0,s.jsx)(r.xuv,{className:"select-wrapper",position:"absolute",zIndex:10,top:"0",left:"0",width:"100%",height:"max",bgColor:"#fff",children:(0,s.jsx)(I,{onChange:e=>{u({staged_resource_urn:a.urn,monitor_config_id:a.monitor_config_id,user_assigned_data_categories:[...h,e.value]})},menuIsOpen:!0})})]})},T=i(63969),A=e=>{let{resourceType:t}=e,i=(0,n.Cl)();return t===x.X.SCHEMA?{columns:[i.accessor(e=>e.name,{id:"name",cell:e=>(0,s.jsx)(j.Z,{result:e.row.original,changeTypeOverride:g.E.CLASSIFICATION}),header:e=>(0,s.jsx)(o.Rr,{value:"Name",...e})}),i.accessor(e=>e.urn,{id:"project",cell:e=>(0,s.jsx)(o.G3,{value:(0,m.Z)(e.getValue())}),header:e=>(0,s.jsx)(o.Rr,{value:"Project",...e})}),i.display({id:"status",cell:e=>(0,s.jsx)(u.Z,{result:e.row.original}),header:e=>(0,s.jsx)(o.Rr,{value:"Status",...e})}),i.accessor(e=>(0,T.Z)(e),{id:"type",cell:e=>(0,s.jsx)(o.G3,{value:e.getValue()}),header:e=>(0,s.jsx)(o.Rr,{value:"Type",...e})}),i.accessor(e=>e.monitor_config_id,{id:"monitor",cell:e=>(0,s.jsx)(o.G3,{value:e.getValue()}),header:e=>(0,s.jsx)(o.Rr,{value:"Detected by",...e})}),i.accessor(e=>e.source_modified,{id:"time",cell:e=>(0,s.jsx)(d.Cy,{time:e.getValue()}),header:e=>(0,s.jsx)(o.Rr,{value:"When",...e})}),i.display({id:"action",cell:e=>e.row.original.diff_status===h.LL.MONITORED?(0,s.jsx)(f.Z,{resource:e.row.original}):(0,s.jsx)(o.G3,{value:"--"}),header:"Actions"})]}:t===x.X.TABLE?{columns:[i.display({id:"select",cell:e=>{var t;let{row:i}=e;return(0,s.jsx)(d.k,{isChecked:i.getIsSelected(),onChange:i.getToggleSelectedHandler(),dataTestId:"select-".concat(null!==(t=i.original.name)&&void 0!==t?t:i.id)})},header:e=>{let{table:t}=e;return(0,s.jsx)(d.k,{isChecked:t.getIsAllPageRowsSelected(),isIndeterminate:t.getIsSomeRowsSelected(),onChange:t.getToggleAllRowsSelectedHandler(),dataTestId:"select-all-rows"})},maxSize:25}),i.accessor(e=>e.name,{id:"tables",cell:e=>(0,s.jsx)(j.Z,{result:e.row.original}),header:e=>(0,s.jsx)(o.Rr,{value:"Table name",...e})}),i.display({id:"status",cell:e=>(0,s.jsx)(u.Z,{result:e.row.original}),header:e=>(0,s.jsx)(o.Rr,{value:"Status",...e})}),i.display({id:"type",cell:()=>(0,s.jsx)(o.G3,{value:"Table"}),header:"Type"}),i.accessor(e=>e.source_modified,{id:"time",cell:e=>(0,s.jsx)(d.Cy,{time:e.getValue()}),header:"Time"}),i.display({id:"actions",cell:e=>(0,s.jsx)(f.Z,{resource:e.row.original}),header:"Actions"})]}:t===x.X.FIELD?{columns:[i.accessor(e=>e.name,{id:"name",cell:e=>(0,s.jsx)(j.Z,{result:e.row.original}),header:e=>(0,s.jsx)(o.Rr,{value:"Field name",...e})}),i.display({id:"status",cell:e=>(0,s.jsx)(u.Z,{result:e.row.original}),header:e=>(0,s.jsx)(o.Rr,{value:"Status",...e})}),i.display({id:"type",cell:()=>(0,s.jsx)(o.G3,{value:"Field"}),header:"Type"}),i.display({id:"classifications",cell:e=>{let{row:t}=e;return(0,s.jsx)(b,{resource:t.original})},meta:{overflow:"visible"},header:"Data category",minSize:280}),i.accessor(e=>e.source_modified,{id:"time",cell:e=>(0,s.jsx)(d.Cy,{time:e.getValue()}),header:e=>(0,s.jsx)(o.Rr,{value:"When",...e})}),i.display({id:"actions",cell:e=>(0,s.jsx)(f.Z,{resource:e.row.original}),header:"Actions"})]}:{columns:[]}},L=i(38637),w=i(87573),k=i(35682),D=e=>{let{resourceUrn:t}=e,[i,{isLoading:a}]=(0,c.Hf)(),[n,{isLoading:l}]=(0,c.zV)(),o=a||l,d=async e=>{await n({staged_resource_urns:e})},u=async e=>{await i({staged_resource_urns:e})};return(0,s.jsx)(r.kCb,{direction:"row",align:"center",justify:"center",w:"full","data-testid":"bulk-actions-menu",children:(0,s.jsxs)(r.hE2,{children:[(0,s.jsx)(k.Z,{title:"Confirm all",icon:(0,s.jsx)(r.nQG,{}),onClick:()=>u([t]),disabled:o,variant:"solid",colorScheme:"primary"}),(0,s.jsx)(k.Z,{title:"Ignore all",icon:(0,s.jsx)(r.tpL,{}),disabled:o,onClick:()=>d([t])})]})})},Z=e=>{let{selectedUrns:t}=e,[i,{isLoading:a}]=(0,c.Hf)(),[n,{isLoading:l}]=(0,c.zV)(),o=a||l,d=async e=>{await i({staged_resource_urns:e})},u=async e=>{await n({staged_resource_urns:e})};return t.length?(0,s.jsxs)(r.kCb,{direction:"row",align:"center",justify:"center",w:"full","data-testid":"bulk-actions-menu",children:[(0,s.jsx)(r.xvT,{fontSize:"xs",fontWeight:"semibold",minW:16,mr:6,children:"".concat(t.length," selected")}),(0,s.jsxs)(r.hE2,{children:[(0,s.jsx)(k.Z,{title:"Confirm",icon:(0,s.jsx)(r.nQG,{}),onClick:()=>d(t),disabled:o,variant:"solid",colorScheme:"primary"}),(0,s.jsx)(k.Z,{title:"Ignore",icon:(0,s.jsx)(r.tpL,{}),disabled:o,onClick:()=>u(t)})]})]}):null},N=i(52962),R=i(71329),O=i(22770);let E={items:[],total:0,page:1,size:50,pages:1},z=()=>(0,s.jsx)(r.gCW,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"empty-state",alignSelf:"center",margin:"auto",children:(0,s.jsxs)(r.gCW,{children:[(0,s.jsx)(r.xvT,{fontSize:"md",fontWeight:"600",children:"No activity found"}),(0,s.jsx)(r.xvT,{fontSize:"sm",children:"You're up to date!"})]})});var F=e=>{let{resourceUrn:t}=e,i=[h.LL.CLASSIFICATION_ADDITION,h.LL.CLASSIFICATION_UPDATE],d=[h.LL.CLASSIFICATION_ADDITION,h.LL.CLASSIFICATION_UPDATE],[u,g]=(0,l.useState)(""),[m,f]=(0,l.useState)({}),{PAGE_SIZES:j,pageSize:p,setPageSize:v,onPreviousPageClick:C,isPreviousPageDisabled:S,onNextPageClick:_,isNextPageDisabled:I,startRange:y,endRange:b,pageIndex:T,setTotalPages:k}=(0,o.oi)(),{isFetching:F,isLoading:P,data:U}=(0,c.z8)({staged_resource_urn:t,page:T,size:p,child_diff_status:d,diff_status:i,search:u}),W=(0,N.G)(null==U?void 0:U.items[0]),G=W===x.X.FIELD,{items:X,total:M,pages:V}=(0,l.useMemo)(()=>null!=U?U:E,[U]);(0,l.useEffect)(()=>{k(V)},[V,k]);let{columns:B}=A({resourceType:W}),H=(0,l.useMemo)(()=>B,[B]),{navigateToDiscoveryResults:Q}=(0,L.Z)(),Y=(0,a.b7)({getCoreRowModel:(0,n.sC)(),getGroupedRowModel:(0,n.qe)(),getExpandedRowModel:(0,n.rV)(),columns:H,manualPagination:!0,onRowSelectionChange:f,state:{rowSelection:m},getRowId:R.Z,data:X}),q=Object.keys(m).filter(e=>m[e]);return P?(0,s.jsx)(o.I4,{rowHeight:36,numRows:36}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Q$,{children:(0,s.jsxs)(r.kCb,{gap:6,align:"center",children:[(0,s.jsx)(r.xuv,{w:400,flexShrink:0,children:(0,s.jsx)(O.M,{value:u,onChange:g})}),(0,s.jsx)(w.Z,{}),!!q.length&&(0,s.jsx)(r.kCb,{align:"center",children:W===x.X.TABLE&&(0,s.jsx)(Z,{selectedUrns:q})}),W===x.X.FIELD&&(0,s.jsx)(D,{resourceUrn:t})]})}),(0,s.jsx)(o.ZK,{tableInstance:Y,onRowClick:G?void 0:e=>Q({resourceUrn:e.urn}),emptyTableNotice:(0,s.jsx)(z,{}),overflow:"visible"}),(0,s.jsx)(o.s8,{totalRows:M,pageSizes:j,setPageSize:v,onPreviousPageClick:C,isPreviousPageDisabled:S||F,onNextPageClick:_,isNextPageDisabled:I||F,startRange:y,endRange:b})]})}},22236:function(e,t,i){"use strict";var s,a;i.d(t,{z:function(){return s}}),(a=s||(s={})).DATASET="Dataset",a.CLASSIFICATION="Classification"},63969:function(e,t,i){"use strict";var s=i(51557),a=i(58525),n=i(22236);t.Z=e=>(0,a.Z)(e)===s.E.CLASSIFICATION?n.z.CLASSIFICATION:n.z.DATASET}}]);