"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[9738],{8756:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ye});var o=a(641),s=a(33);const l=(0,o.Lk)("h1",{class:"planner-header"},"My Planner",-1),r={class:"my-planner"},n={class:"my-planner--header"},i=(0,o.Lk)("br",null,null,-1),d={class:"text-instructions"},c={class:"my-planner--body"},u=["data-user-job-id"],b={key:0,class:"card-priority-line priority-normal"},h={class:"text-instructions"},m={class:"text-instructions"};var p=a(432),y=a.n(p),k=a(6285),g=a(9336),j=a(2321),L=a(8083),v=a(9827),f=a(2243);const _={class:"modal fade",id:"confirmUserJobDeleteModal",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"confirmUserJobDelete","aria-hidden":"true"},w={class:"modal-dialog"},A={class:"modal-content"},D=(0,o.Lk)("div",{class:"modal-header"},[(0,o.Lk)("h5",{class:"modal-title",id:"confirmUserJobDelete"}," Please confirm User Job Deletion "),(0,o.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"confirmUserJobDeleteButton"})],-1),M=(0,o.Lk)("div",{class:"modal-body"}," Are you sure you want to remove the current object from your planner? ",-1),C={class:"modal-footer"};var E=a(2124);const S={name:"confirmUserJobDelete",props:{userJobId:{type:Number,default:0}},computed:{...(0,E.L8)({rootUrl:"getRootUrl"})},methods:{deleteUserJob(){const e=new FormData;e.set("user_job_id",`${this.userJobId}`),this.axios.post(`${this.rootUrl}my_planner/delete_user_job/`,e).then((()=>{this.$emit("remove_user_job",{})})).catch((e=>{this.$store.dispatch("newToast",{header:"Error removing user job from my planner",message:`We encounted an error removing user job from the planner. Error -> ${e}`,extra_classes:"bg-danger",delay:0})})),this.closeModal()},closeModal(){document.getElementById("confirmUserJobDeleteButton").click()}}};var I=a(6262);const T=(0,I.A)(S,[["render",function(e,t,a,s,l,r){return(0,o.uX)(),(0,o.CE)("div",_,[(0,o.Lk)("div",w,[(0,o.Lk)("div",A,[D,M,(0,o.Lk)("div",C,[(0,o.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[0]||(t[0]=(...e)=>r.closeModal&&r.closeModal(...e))}," No "),(0,o.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>r.deleteUserJob&&r.deleteUserJob(...e))}," Yes ")])])])])}]]);var x=a(3751);const U={class:"modal fade",id:"newPlannerObjectWizardModal",tabindex:"-1","aria-labelledby":"newPlannerObjectModel","aria-hidden":"true"},O={class:"modal-dialog modal-lg modal-fullscreen-lg-down"},$={class:"modal-content"},P=(0,o.Lk)("div",{class:"modal-header"},[(0,o.Lk)("h2",null," New Planner Object Wizard "),(0,o.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"newPlannerObjectButton"},[(0,o.Lk)("span",{"aria-hidden":"true"})])],-1),F={class:"modal-body"},J={class:"row"},R=(0,o.Lk)("div",{class:"col-md-4"},[(0,o.Lk)("strong",null,"Object Selector"),(0,o.Lk)("p",{class:"text-instructions"}," Please select which object you would like to link to this requirement. ")],-1),W={class:"col-md-8"},X={key:1,class:"alert alert-success"},N=(0,o.Lk)("hr",null,null,-1),B={class:"row"},Q=(0,o.Lk)("div",{class:"col-md-4"},[(0,o.Lk)("strong",null,"Select Day"),(0,o.Lk)("p",{class:"text-instructions"}," Select the appropriate day for this object. ")],-1),z={class:"col-md-8"},H={class:"row"},K={class:"col-md-6 mt-4"},q=(0,o.Lk)("label",null,"Day",-1),G=(0,o.Lk)("hr",null,null,-1),Y={class:"row"},V=(0,o.Lk)("div",{class:"col-md-4"},[(0,o.Lk)("strong",null,"Select Links"),(0,o.Lk)("p",{class:"text-instructions"}," Please select which of the objects you want to connect to this requirement. ")],-1),Z={class:"col-md-8"},ee={key:0,class:"alert alert-info"},te={key:1,class:"alert alert-warning"},ae={key:2,class:"form-group mb-4"},oe=(0,o.Lk)("label",null,"Search Terms",-1),se={key:3,class:"wizard-results"},le={class:"wizard-results--card--tick"},re=["value","id"],ne={class:"wizard-results--card--content"},ie={class:"text-instructions"},de={class:"text-instructions"},ce={class:"modal-footer"},ue=(0,o.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),be=["disabled"],he={name:"NewPlannerObjectWizard",components:{NSelect:a(1080).A},props:{},computed:{...(0,E.L8)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},data:()=>({dayModel:"",isSearching:!1,linkModel:[],listOfDays:[],objectModel:null,objectFilteredResults:[],objectResults:[],objectSelection:[{value:"kanban_card",label:"Kanban Card"},{value:"project",label:"Project"},{value:"task",label:"Task"}],searchTermModel:""}),methods:{renderObjectId(e){switch(e.destination){case"kanban_card":return`Card${e.location_id}`;case"project":return`Pro${e.location_id}`;case"task":return`Task${e.location_id}`;default:return"----"}},saveLinks(){if(0===this.linkModel.length)return;this.$store.dispatch("newToast",{header:"Currenty updating your Planner",message:"Currently updating your planner. Please wait",extra_classes:"bg-warning",delay:0,unique_type:"add-objects-to-planner"});const e=new FormData;e.set("destination",this.objectModel),this.linkModel.forEach((t=>{e.append(this.objectModel,t)})),e.set("job_date",this.dayModel),this.axios.post(`${this.rootUrl}my_planner/add_object/`,e).then((e=>{this.$emit("update_date_array",e.data),this.objectModel=null,document.getElementById("newPlannerObjectButton").click(),this.$store.dispatch("newToast",{header:"Updated your Planner",message:"We have successfully updated your planner",extra_classes:"bg-success",unique_type:"add-objects-to-planner"})})).catch((e=>{this.$store.dispatch("newToast",{header:"Error adding objects to your planner",message:`Sorry we could not add any objects to your planner. ${e}`,extra_classes:"bg-danger",delay:0,unique_type:"add-objects-to-planner"})}))}},watch:{objectModel(){this.linkModel=[],null!==this.objectModel?(this.isSearching=!0,this.axios.post(`${this.rootUrl}my_planner/get_object_list/${this.objectModel}/`).then((e=>{this.objectResults=e.data,this.objectFilteredResults=e.data,this.isSearching=!1,this.searchTermModel=""})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Getting Object List",message:`We had an issue getting Object List. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))):this.isSearching=!1},searchTermModel(){""!==this.searchTermModel&&null!==this.searchTermModel?this.objectFilteredResults=this.objectResults.filter((e=>e.title.toLowerCase().includes(this.searchTermModel.toLowerCase()))):this.objectFilteredResults=this.objectResults}},mounted(){const e=k.c9.now();for(let t=0;t<7;t++){let a=e.plus({days:t}),o=a.toFormat("yyyy-LL-dd"),s=a.toFormat("cccc");this.listOfDays.push({label:`${s} - ${o}`,value:o})}this.dayModel=this.listOfDays[0].value}},me=(0,I.A)(he,[["render",function(e,t,a,l,r,n){const i=(0,o.g2)("n-select");return(0,o.uX)(),(0,o.CE)("div",U,[(0,o.Lk)("div",O,[(0,o.Lk)("div",$,[P,(0,o.Lk)("div",F,[(0,o.Q3)(" CHOOSING A OBJECT TYPE "),(0,o.Lk)("div",J,[R,(0,o.Lk)("div",W,[r.isSearching?((0,o.uX)(),(0,o.CE)("div",X," Searching for "+(0,s.toDisplayString)(r.objectModel)+"s ",1)):((0,o.uX)(),(0,o.Wv)(i,{key:0,options:r.objectSelection,value:r.objectModel,"onUpdate:value":t[0]||(t[0]=e=>r.objectModel=e),class:"object-selection"},null,8,["options","value"]))])]),(0,o.Q3)(" OBJECT LOCATION "),N,(0,o.Lk)("div",B,[Q,(0,o.Lk)("div",z,[(0,o.Lk)("div",H,[(0,o.Lk)("div",K,[q,(0,o.bF)(i,{options:r.listOfDays,label:"column",value:r.dayModel,"onUpdate:value":t[1]||(t[1]=e=>r.dayModel=e)},null,8,["options","value"])])])])]),(0,o.Q3)(" SELECTING WHICH OBJECTS TO LINK TO "),G,(0,o.Lk)("div",Y,[V,(0,o.Lk)("div",Z,[(0,o.Q3)(" LOADING PLACEHOLDER "),r.isSearching||null==r.objectModel?((0,o.uX)(),(0,o.CE)("div",ee," Please select the object type. ")):(0,o.Q3)("v-if",!0),0===r.objectResults.length&&null!=r.objectModel?((0,o.uX)(),(0,o.CE)("div",te," Sorry. It currently looks like there are no "+(0,s.toDisplayString)(this.objectModel)+"s assigned to you. Only assigned "+(0,s.toDisplayString)(this.objectModel)+"s will show up here. ",1)):(0,o.Q3)("v-if",!0),(0,o.Q3)(" SEARCH RESULTS "),!r.isSearching&&r.objectResults.length>0&&null!=r.objectModel?((0,o.uX)(),(0,o.CE)("div",ae,[oe,(0,o.bo)((0,o.Lk)("input",{id:"search_terms",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>r.searchTermModel=e),type:"text"},null,512),[[x.vModelText,r.searchTermModel]])])):(0,o.Q3)("v-if",!0),!r.isSearching&&r.objectFilteredResults.length>0&&null!=r.objectModel?((0,o.uX)(),(0,o.CE)("div",se,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.objectFilteredResults,(e=>((0,o.uX)(),(0,o.CE)("div",{class:"wizard-results--card",key:e.location_id},[(0,o.Lk)("div",le,[(0,o.bo)((0,o.Lk)("input",{class:"form-check-input",type:"checkbox",name:"link-option",value:e.location_id,id:`checkbox_${e.location_id}`,"onUpdate:modelValue":t[3]||(t[3]=e=>r.linkModel=e)},null,8,re),[[x.vModelCheckbox,r.linkModel]])]),(0,o.Lk)("div",ne,[(0,o.Lk)("div",ie,(0,s.toDisplayString)(n.renderObjectId(e)),1),(0,o.Lk)("div",null,[(0,o.Lk)("strong",null,(0,s.toDisplayString)(e.title),1)]),(0,o.Lk)("div",null,[(0,o.eW)(" Status: "),(0,o.Lk)("span",de,(0,s.toDisplayString)(e.status),1)])])])))),128))])):(0,o.Q3)("v-if",!0)])])]),(0,o.Lk)("div",ce,[ue,(0,o.Lk)("button",{type:"button",class:"btn btn-primary",disabled:0===r.linkModel.length,onClick:t[4]||(t[4]=(...e)=>n.saveLinks&&n.saveLinks(...e))}," Save changes ",8,be)])])])])}]]),pe={name:"MyPlanner",components:{ConfirmUserJobDelete:T,draggable:y(),Icon:j.In,NewPlannerObjectWizard:me},props:{rootUrl:{type:String,default:"/"},objectData:{type:Array,default:()=>[]},staticUrl:{type:String,default:"/"},theme:{type:String,default:""}},data:()=>({confirmIdToDelete:0,confirmIndex:0,dateArray:[]}),mixins:[L.A,v.A,f.A],methods:{confirmCardDelete(e,t){this.confirmIdToDelete=e,this.confirmIndex=t,new g.aF(document.getElementById("confirmUserJobDeleteModal")).show()},getClass:e=>"Closed"===e?"text-decoration-line-through":"",formatObjectId(e){const t=this.getNiceDatetime(e.end_date);switch(e.object_type){case"card":return`Card${e.location_id}`;case"project":return`Pro${e.location_id} - ${t}`;case"task":return`Task${e.location_id} - ${t}`;default:return"----"}},removeUserJob(){this.dateArray[this.confirmIndex].data=this.dateArray[this.confirmIndex].data.filter((e=>e.user_job_id!==this.confirmIdToDelete))},onEnd(e){const t=e.to,a=e.from,o=e.item.dataset.userJobId,s=new FormData;s.set("user_job_id",o),s.set("job_date",t.dataset.jobDate);const l=t.dataset.index,r=a.dataset.index;this.dateArray[l].data.forEach((e=>{s.append("new_destination",e.user_job_id)})),l!==r&&this.dateArray[r].data.forEach((e=>{s.append("old_destination",e.user_job_id)})),this.axios.post(`${this.rootUrl}my_planner/update_object_list/`,s).catch((e=>{this.$store.dispatch("newToast",{header:"Error updating my planner",message:`Sorry, we could not update your planner. ${e}`,extra_classes:"bg-danger",delay:0})}))},showModal(){new g.aF(document.getElementById("newPlannerObjectWizardModal")).show()},updateDateArray(e){this.dateArray=this.dateArray.map((t=>{const a=e.filter((e=>e.job_date===t.date));return{date:t.date,day:t.day,data:a}}))}},mounted(){this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl,staticUrl:this.staticUrl});const e=k.c9.now();for(let t=0;t<7;t++){let a=e.plus({days:t});const o=this.objectData.filter((e=>e.job_date===a.toFormat("yyyy-LL-dd")));this.dateArray.push({date:a.toFormat("yyyy-LL-dd"),day:a.toFormat("cccc"),data:o})}}},ye=(0,I.A)(pe,[["render",function(e,t,a,p,y,k){const g=(0,o.g2)("Icon"),j=(0,o.g2)("draggable"),L=(0,o.g2)("confirm-user-job-delete"),v=(0,o.g2)("new-planner-object-wizard"),f=(0,o.g2)("n-config-provider");return(0,o.uX)(),(0,o.Wv)(f,{theme:e.getTheme(a.theme)},{default:(0,o.k6)((()=>[l,(0,o.Lk)("button",{class:"btn btn-primary planner-button",onClick:t[0]||(t[0]=(...e)=>k.showModal&&k.showModal(...e))},"Add Object"),(0,o.Lk)("div",r,[(0,o.Q3)(" HEADER "),(0,o.Lk)("div",n,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(y.dateArray,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.date,class:"my-planner--header-single-day"},[(0,o.Lk)("p",null,[(0,o.eW)((0,s.toDisplayString)(e.day),1),i,(0,o.Lk)("span",d,(0,s.toDisplayString)(e.date),1)])])))),128))]),(0,o.Q3)(" BODY "),(0,o.Lk)("div",c,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(y.dateArray,((a,l)=>((0,o.uX)(),(0,o.Wv)(j,{class:"my-planner--single-day list-group",group:"objects","ghost-class":"ghost",itemKey:"user_job_id","data-job-date":a.date,"data-index":l,key:a.date,list:a.data,onEnd:t[1]||(t[1]=e=>k.onEnd(e))},{item:(0,o.k6)((({element:t})=>[(0,o.Lk)("div",{class:"list-group-item","data-user-job-id":t.user_job_id},["Closed"!==t.higher_order_status?((0,o.uX)(),(0,o.CE)("div",b)):(0,o.Q3)("v-if",!0),(0,o.Lk)("div",h,(0,s.toDisplayString)(k.formatObjectId(t)),1),(0,o.Lk)("div",null,[(0,o.Lk)("strong",{class:(0,s.normalizeClass)(k.getClass(t.higher_order_status))},(0,s.toDisplayString)(t.title),3)]),(0,o.Lk)("div",null,[(0,o.eW)("Status: "),(0,o.Lk)("span",m,(0,s.toDisplayString)(t.status),1)]),(0,o.bF)(g,{class:"kanban-card-info-icon",style:{color:"red"},icon:e.icons.trashCan,onClick:e=>k.confirmCardDelete(t.user_job_id,l),onDblclick:e=>k.confirmCardDelete(t.user_job_id,l)},null,8,["icon","onClick","onDblclick"])],8,u)])),_:2},1032,["data-job-date","data-index","list"])))),128))])]),(0,o.bF)(L,{"user-job-id":y.confirmIdToDelete,onRemove_user_job:k.removeUserJob},null,8,["user-job-id","onRemove_user_job"]),(0,o.bF)(v,{onUpdate_date_array:t[2]||(t[2]=e=>k.updateDateArray(e))})])),_:1},8,["theme"])}]])},8083:(e,t,a)=>{a.d(t,{A:()=>s});var o=a(6285);const s={methods:{getNiceDatetime:e=>""===e||null==e?"":o.c9.fromISO(e).toLocaleString(o.c9.DATETIME_MED),getNiceDatetimeFromInt:e=>""===e||null==e?"":o.c9.fromMillis(e).toLocaleString(o.c9.DATETIME_MED),getNiceDate:e=>""===e||null==e?"":o.c9.fromISO(e).toLocaleString(o.c9.DATE_MED_WITH_WEEKDAY),disableDate(e){const t=new Date;return t.setMilliseconds(0),t.setSeconds(0),t.setHours(0),e<=t.getTime()-36e5}}}},9827:(e,t,a)=>{a.d(t,{A:()=>s});var o=a(7413);const s={data:()=>({darkTheme:o.a}),methods:{getTheme:e=>"dark"===e?o.a:null}}},2243:(e,t,a)=>{a.d(t,{A:()=>C});var o=a(8998),s=a(102),l=a(9394),r=a(2438),n=a(9605),i=a(3438),d=a(5666),c=a(6375),u=a(1647),b=a(7066),h=a(4397),m=a(4603),p=a(7432),y=a(1758),k=a(8959),g=a(9587),j=a(9675),L=a(386),v=a(6120),f=a(8086),_=a(5617),w=a(6325),A=a(6500),D=a(5707),M=a(1511);const C={data:()=>({icons:{arrowUp:o.A,bugIcon:s.A,bxBriefcase:l.A,cardChecklist:r.A,clipboardIcon:n.A,documentPdf:i.A,documentText:d.A,folderIcon:c.A,groupPresentation:u.A,imageIcon:b.A,infoCircle:h.A,linkIcon:m.A,linkIcon2:p.A,linkOut:y.A,mailIcon:k.A,microsoftExcel:g.A,microsoftPowerpoint:j.A,microsoftWord:L.A,noteAdd:v.A,objectStorage:f.A,passwordIcon:_.A,trashCan:w.A,userIcon:A.A,usersIcon:D.A,xCircle:M.A}})}}}]);