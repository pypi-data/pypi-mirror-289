Metadata-Version: 2.1
Name: scrapy_huo_utilities
Version: 0.0.4
Summary: scrapy_huo_utilities是自用的一些scrapy工具代码合集。
Home-page: https://gitee.com/ranvane/scrapy_huo_utilities
License: MIT
Author: ranvane
Author-email: ranvane@gmail.com
Requires-Python: >=3.5,<4.0
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.5
Classifier: Programming Language :: Python :: 3.6
Classifier: Programming Language :: Python :: 3.7
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Requires-Dist: fake-agent (>=0.1.4,<0.2.0)
Requires-Dist: loguru (>=0.7.2,<0.8.0)
Requires-Dist: lxml (>=4.8.0,<5.0.0)
Requires-Dist: plyvel_wheels (>=1.3.0,<2.0.0)
Requires-Dist: scrapy (>=2.0.0,<3.0.0)
Project-URL: Repository, https://gitee.com/ranvane/scrapy_huo_utilities
Description-Content-Type: text/markdown

# scrapy_huo_utilities

#### 介绍

包含一个随机UserAgent和基于leveldb的DuplicateUrls中间件、几个清洗html的函数,自用的几个常用功能。

#### 安装教程

`pip install scrapy_huo_utilities`

#### 使用说明

1. RandomUserAgent_DOWNLOADER_MIDDLEWARES:

   在`settings.py`的`DOWNLOADER_MIDDLEWARES`中修改添加：
   `"scrapy_huo_utilities.MIDDLEWARES.Downloader_Middleware_Utils.RandomUserAgent_DOWNLOADER_MIDDLEWARES": 543,`


2. DuplicateUrls_SPIDER_MIDDLEWARES:
   在`settings.py`的`SPIDER_MIDDLEWARES`中修改添加：
   `"scrapy_huo_utilities.MIDDLEWARES.Spider_Middleware_Utils.DuplicateUrls_SPIDER_MIDDLEWARES": 543,`

3. html_clean:
   `from scrapy_huo_utilities.PROCESSORS import clean_html_attributes,clean_html_tags,clean_empty_img_tags`

   `clean_empty_img_tags`:清除没有src属性或src属性为空字符串的img标签。

   `clean_empty_a_tags`:清除没有href属性或href属性为空字符串的a标签。

   `clean_html_tags`:用于清除指定列表中的HTML标签。
   ```
   :param html_data:  传入html
   :param remove_tags:删除标签列表
   :param reserve_content:是否保留删除标签的文本内容，默认保留。
   :return: 处理后的html
   ```

   `clean_html_attributes`：用于清除HTML标签中的属性，除了白名单中包含的属性。
   ```
   :param html_data:传入html
   :param whitelist:白名单
   :return: html_data处理后的html
   ```

