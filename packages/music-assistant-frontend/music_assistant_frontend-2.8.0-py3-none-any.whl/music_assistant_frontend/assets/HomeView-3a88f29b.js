import{C as Q}from"./Container-2a9ded95.js";import{d as g,o as X,n as k,c as i,e as v,w as s,a1 as J,u as l,X as $,g as n,f as u,i as f,t as p,a0 as Z,F as A,h as V,M as b,j as q,W as U,s as d,b as c,r as G,aj as x,ak as ee,Y as I,a4 as te,a3 as w,_ as ae,z as ie,N as se,ai as re}from"./index-f6d6d5f3.js";import{p as ne,k as oe,l as Y,M as le,i as ue,c as de}from"./VCheckbox-a96acb8a.js";import{P as me}from"./PanelviewItemCompact-bd25855a.js";import{w as P,V as ce,s as pe,y as _e}from"./VListItem-79e9844f.js";import{V as ye,T as ve}from"./Toolbar-4dbf8f22.js";import{V as K}from"./VToolbar-0d490162.js";import{_ as C}from"./_plugin-vue_export-helper-c27b6911.js";import{V as we}from"./VCard-0040a03b.js";/* empty css              */import"./eventbus-72e8654e.js";import"./VCheckboxBtn-c1335d51.js";import"./VList-bf612667.js";import"./VCardText-b34629f4.js";import"./VMenu-5246b81b.js";const fe=g({__name:"Carousel",setup(h){return X(()=>{document.documentElement.style.setProperty("--swiper-navigation-color","primary")}),(t,_)=>{const a=k("swiper");return i(),v(a,{"slides-per-view":l(ne)(t.$vuetify.display.width)+.5,"space-between":24,"free-mode":!0,navigation:!l($)({breakpoint:"mobile"})},{default:s(()=>[J(t.$slots,"default")]),_:3},8,["slides-per-view","navigation"])}}}),he={key:0,class:"widget-row"},ge={class:"mr-3"},be={key:1,class:"mr-3"},ke=g({__name:"HomeWidgetRow",props:{widgetRow:{}},setup(h){const t=function(e,r,m){const o=Array.isArray(e)?e:[e];oe(o,void 0,r,m)},_=function(e,r,m){if(!Y(e)){t(e,r,m);return}e.media_type==b.FOLDER?U.push({name:"browse",query:{path:e.path}}):U.push({name:e.media_type,params:{itemId:e.item_id,provider:e.provider}})},a=function(e,r,m){if(!Y(e)){t(e,r,m);return}if(!d.activePlayerId){d.showPlayersMenu=!0;return}c.playMedia(e.uri,void 0)};return(e,r)=>{const m=k("swiper-slide");return e.widgetRow.items.length?(i(),n("div",he,[u(K,{class:"header",color:"transparent",style:Z(e.widgetRow.path?"cursor: pointer; width: fit-content;":"width: fit-content;"),onClick:r[0]||(r[0]=o=>e.widgetRow.path?e.$router.push(e.widgetRow.path):"")},{prepend:s(()=>[u(P,{icon:e.widgetRow.icon},null,8,["icon"])]),title:s(()=>[e.widgetRow.count?(i(),v(ye,{key:0,inline:"",color:"grey",content:e.widgetRow.count},{default:s(()=>[f("span",ge,p(e.$t(e.widgetRow.label)),1)]),_:1},8,["content"])):(i(),n("span",be,p(e.$t(e.widgetRow.label)),1))]),_:1},8,["style"]),u(fe,null,{default:s(()=>[(i(!0),n(A,null,V(e.widgetRow.items,o=>(i(),v(m,{key:o.uri},{default:s(()=>[u(me,{item:o,"permanent-overlay":![l(b).ALBUM,l(b).TRACK,l(b).RADIO].includes(o.media_type),onMenu:t,onClick:_,onPlay:a},null,8,["item","permanent-overlay"])]),_:2},1024))),128))]),_:1})])):q("",!0)}}});const qe=C(ke,[["__scopeId","data-v-00198094"]]),Pe=g({__name:"HomeWidgetRows",async setup(h){let t,_;const a=G({recently_played:{label:"recently_played",icon:"mdi-motion-play",items:[]},artists:{label:"artists",icon:"mdi-account-music",path:"/artists",items:[]},albums:{label:"albums",icon:"mdi-album",path:"/albums",items:[]},playlists:{label:"playlists",icon:"mdi-playlist-music",path:"/playlists",items:[]},tracks:{label:"tracks",icon:"mdi-file-music",path:"/tracks",items:[]},radios:{label:"radios",icon:"mdi-radio",path:"/radios",items:[]},browse:{label:"browse",icon:"mdi-folder",path:"/browse",items:[]}}),e=async function(){a.value.recently_played.items=await c.getRecentlyPlayedItems(10),a.value.artists.items=await c.getLibraryArtists(void 0,void 0,20,void 0,"random"),a.value.artists.count=d.libraryArtistsCount,a.value.albums.items=await c.getLibraryAlbums(void 0,void 0,20,void 0,"timestamp_added_desc"),a.value.albums.count=d.libraryAlbumsCount,a.value.playlists.items=await c.getLibraryPlaylists(void 0,void 0,20,void 0,"timestamp_added_desc"),a.value.playlists.count=d.libraryPlaylistsCount,a.value.radios.items=await c.getLibraryRadios(void 0,void 0,20,void 0,"timestamp_added_desc"),a.value.radios.count=d.libraryRadiosCount,a.value.tracks.items=await c.getLibraryTracks(void 0,void 0,20,void 0,"timestamp_added_desc"),a.value.tracks.count=d.libraryTracksCount};return[t,_]=x(()=>e()),await t,_(),ee(()=>{e()}),(r,m)=>(i(!0),n(A,null,V(a.value,o=>(i(),n("div",{key:o.label},[u(qe,{"widget-row":o},null,8,["widget-row"])]))),128))}}),Ce={class:"media-thumb player-media-thumb"},Re={style:{cursor:"pointer"}},Ie={key:0},$e={key:0},Ae={key:1},Ve={key:2},Le={style:{cursor:"pointer"},class:"line-clamp-1"},Me={key:0},Se={key:1},He={key:2,class:"line-clamp-1"},Te={key:3,class:"line-clamp-1"},De={key:4,class:"line-clamp-1"},ze={key:5,class:"line-clamp-1"},Be=g({__name:"PanelviewPlayerCard",props:{queue:{}},setup(h){return(t,_)=>(i(),v(we,{class:ae(["panel-item",{"panel-item-selected":l(d).activePlayerId==t.queue.queue_id,"panel-item-idle":t.queue.state==l(w).PAUSED}])},{default:s(()=>[u(ce,{class:"panel-item-details",flat:""},{prepend:s(()=>{var a;return[f("div",Ce,[u(le,{size:"60",item:((a=t.queue.current_item)==null?void 0:a.media_item)||t.queue.current_item,fallback:l(ue),style:{cursor:"pointer"}},null,8,["item","fallback"])])]}),title:s(()=>{var a,e,r,m,o,y;return[f("div",Re,[(a=t.queue.current_item)!=null&&a.media_item?(i(),n("div",Ie,[I(p((e=t.queue.current_item)==null?void 0:e.media_item.name)+" ",1),"version"in((r=t.queue.current_item)==null?void 0:r.media_item)&&((m=t.queue.current_item)!=null&&m.media_item.version)?(i(),n("span",$e,"("+p((o=t.queue.current_item)==null?void 0:o.media_item.version)+")",1)):q("",!0)])):t.queue.current_item?(i(),n("div",Ae,p((y=t.queue.current_item)==null?void 0:y.name),1)):(i(),n("div",Ve,p(t.queue.display_name),1))])]}),subtitle:s(()=>{var a,e,r,m,o,y,R,L,M,S,H,T,D,z,B,N,E,F,W,O,j;return[f("div",Le,[(a=t.queue.current_item)!=null&&a.media_item&&((r=(e=t.queue.current_item)==null?void 0:e.media_item)==null?void 0:r.media_type)==l(b).TRACK&&"album"in((m=t.queue.current_item)==null?void 0:m.media_item)&&((o=t.queue.current_item)!=null&&o.media_item.album)?(i(),n("div",Me,p(l(de)((y=t.queue.current_item)==null?void 0:y.media_item.artists))+" â€¢ "+p((R=t.queue.current_item)==null?void 0:R.media_item.album.name),1)):(L=t.queue.current_item)!=null&&L.media_item&&"artists"in((M=t.queue.current_item)==null?void 0:M.media_item)&&((S=t.queue.current_item)==null?void 0:S.media_item.artists.length)>0?(i(),n("div",Se,p((H=t.queue.current_item)==null?void 0:H.media_item.artists[0].name),1)):(D=(T=t.queue.current_item)==null?void 0:T.streamdetails)!=null&&D.stream_title?(i(),n("div",He,p((B=(z=t.queue.current_item)==null?void 0:z.streamdetails)==null?void 0:B.stream_title),1)):(E=(N=t.queue.current_item)==null?void 0:N.media_item)!=null&&E.metadata.description?(i(),n("div",Te,p((F=t.queue.current_item)==null?void 0:F.media_item.metadata.description),1)):t.queue.items==0?(i(),n("div",De,p(t.$t("queue_empty")),1)):((W=l(d).activePlayer)==null?void 0:W.active_source)!=((O=l(d).activePlayer)==null?void 0:O.player_id)?(i(),n("div",ze,p(t.$t("external_source_active",[(j=l(d).activePlayer)==null?void 0:j.active_source])),1)):q("",!0)])]}),default:s(()=>[f("h6",null,p(t.queue.display_name),1)]),append:s(()=>[u(pe,{icon:"",variant:"text",onClick:_[0]||(_[0]=te(a=>l(c).queueCommandPlayPause(t.queue.queue_id),["stop"]))},{default:s(()=>[t.queue.state==l(w).PLAYING?(i(),v(P,{key:0,size:l($)({breakpoint:"phone"})?"24":"32"},{default:s(()=>[I("mdi-pause-circle-outline")]),_:1},8,["size"])):(i(),v(P,{key:1,size:l($)({breakpoint:"phone"})?"24":"32"},{default:s(()=>[I("mdi-play-circle-outline")]),_:1},8,["size"]))]),_:1})]),_:1})]),_:1},8,["class"]))}});const Ne=C(Be,[["__scopeId","data-v-ca997964"]]),Ee={key:0,class:"widget-row"},Fe={class:"mr-3"},We=g({__name:"HomeCurrentlyPlayingRow",setup(h){const t={[w.PLAYING]:1,[w.PAUSED]:2,[w.IDLE]:2},_=ie(()=>Object.values(c.queues).filter(e=>e.active&&e.items>0&&e.queue_id in c.players&&c.players[e.queue_id].powered&&[w.PLAYING,w.PAUSED].includes(c.players[e.queue_id].state)).sort((e,r)=>e.display_name.localeCompare(r.display_name)).sort((e,r)=>t[e.state]-t[r.state]));function a(e){e&&e.queue_id in c.players&&(d.activePlayerId==e.queue_id?d.showFullscreenPlayer=!0:d.activePlayerId=e.queue_id)}return(e,r)=>{const m=k("swiper-slide"),o=k("swiper");return _.value.length?(i(),n("div",Ee,[u(K,{class:"header",color:"transparent",style:{width:"fit-content"}},{prepend:s(()=>[u(P,{icon:"mdi-play-circle-outline"})]),title:s(()=>[f("span",Fe,p(e.$t("currently_playing")),1)]),_:1}),u(o,null,{default:s(()=>[(i(!0),n(A,null,V(_.value,y=>(i(),v(m,{key:y.queue_id,style:{"max-width":"400px",width:"300px"}},{default:s(()=>[u(Ne,{queue:y,onClick:R=>a(y)},null,8,["queue","onClick"])]),_:2},1024))),128))]),_:1})])):q("",!0)}}});const Oe=C(We,[["__scopeId","data-v-7d6eddfa"]]),je=g({__name:"HomeView",props:{player:{}},setup(h){const t=h,_=G(localStorage.getItem("frontend.settings.hide_settings")=="true");return se(()=>t.player,a=>{if(console.error("props.player",a),!(!a||a=="false")){if(typeof a=="string"){if(a in c.players)d.activePlayerId=c.players[a].player_id;else for(const e of Object.values(c.players))if(e.display_name.toLowerCase()===a.toLowerCase()){d.activePlayerId=e.player_id;break}}d.showFullscreenPlayer=!0}},{immediate:!0}),(a,e)=>(i(),n("div",null,[u(ve,{title:"Music Assistant","show-loading":!0,"menu-items":_.value?[]:[{label:"settings.settings",icon:"mdi-cog-outline",action:()=>{a.$router.push({path:"settings"})}}]},null,8,["menu-items"]),u(Q,{variant:"panel"},{default:s(()=>[(i(),v(re,null,{fallback:s(()=>[u(_e,{indeterminate:""})]),default:s(()=>[f("div",null,[u(Oe),u(Pe)])]),_:1}))]),_:1})]))}});const nt=C(je,[["__scopeId","data-v-d9760ef2"]]);export{nt as default};
