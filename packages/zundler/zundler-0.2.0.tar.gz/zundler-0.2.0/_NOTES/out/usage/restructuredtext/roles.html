<!DOCTYPE html>
<html lang="en">
<head><script>/*
 * Monkeypatch URLSearchParams
 *
 * Sphinx documents that use `searchtool.js` rely on passing information via
 * GET parameters (aka search parameters). Unfortunately, this doesn't work
 * in our approach due to the same origin policy, so we have to get ...
 * creative.
 *
 * Here, we patch the `URLSearchParams` class so it returns the information
 * stored in `window.global_context.get_parameters`.
 *
 */

const originalGet = URLSearchParams.prototype.get;

var myGet = function (arg) {
    const originalResult = originalGet.apply(this, [arg]);
    // If searchtools.js of sphinx is used
    if (
        window.global_context.get_parameters &&
        (window.location.search === "") &&
        (Array.from(this.entries()).length == 0)
    ) {
        const params = new URLSearchParams('?' + window.global_context.get_parameters);
        const result = params.get(arg);
        // console.log("Return virtual get parameter:", arg, result);
        return result;
    } else {
        return originalResult;
    }
};

URLSearchParams.prototype.get = myGet;

/*
 * Monkeypatch fetch
 */

const { fetch: originalFetch } = window;

window.fetch = async (...args) => {
    let [resource, config ] = args;
    var path = normalize_path(resource);
    var response;
    if (is_virtual(path)) {
        var data = retrieve_file(path);
        response = new Response(data);

    } else {
        response = await originalFetch(resource, config);
    }
    return response;
};
//# sourceURL=inject_pre.js</script>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><meta content="Docutils 0.17.1: http://docutils.sourceforge.net/" name="generator"/>
<title>Roles — Sphinx documentation</title>
<link href="../../_static/pygments.css" rel="stylesheet" type="text/css"/>
<link href="../../_static/basic.css" rel="stylesheet" type="text/css"/>
<link href="../../_static/graphviz.css" rel="stylesheet" type="text/css"/>
<link href="../../_static/sphinx13.css" rel="stylesheet" type="text/css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.13.1/underscore-min.js"></script>
<script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
<script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
<script src="../../_static/jquery.js"></script>
<script src="../../_static/underscore.js"></script>
<script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
<script src="../../_static/doctools.js"></script>
<script src="../../_static/sphinx_highlight.js"></script>
<link href="https://www.sphinx-doc.org/en/master/usage/restructuredtext/roles.html" rel="canonical"/>
<link href="../../_static/opensearch.xml" rel="search" title="Search within Sphinx documentation" type="application/opensearchdescription+xml"/>
<link href="../../_static/favicon.svg" rel="shortcut icon"/>
<link href="../../genindex.html" rel="index" title="Index"/>
<link href="../../search.html" rel="search" title="Search"/>
<link href="directives.html" rel="next" title="Directives"/>
<link href="basics.html" rel="prev" title="reStructuredText Primer"/>
</head><body>
<div class="pageheader">
<a href="../../index.html">
<img alt="SPHINX" src="../../_static/sphinxheader.png"/>
</a>
</div>
<div aria-label="related navigation" class="related" role="navigation">
<h3>Navigation</h3>
<ul>
<li><a href="../../index.html">Documentation</a> »</li>
<li class="nav-item nav-item-1"><a href="../index.html">Using Sphinx</a> »</li>
<li class="nav-item nav-item-2"><a accesskey="U" href="index.html">reStructuredText</a> »</li>
<li class="nav-item nav-item-this"><a href="">Roles</a></li>
</ul>
</div>
<div class="document">
<div aria-label="main navigation" class="sphinxsidebar" role="navigation">
<div id="searchbox" role="search" style="display: none">
<h3 id="searchlabel">Quick search</h3>
<div class="searchformwrapper">
<form action="../../search.html" class="search" method="get">
<input aria-labelledby="searchlabel" autocapitalize="off" autocomplete="off" autocorrect="off" name="q" spellcheck="false" type="text"/>
<input type="submit" value="Go"/>
</form>
</div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
<div class="sphinxsidebar-navigation__contents">
<h3>On this page</h3>
<ul>
<li><a class="reference internal" href="#">Roles</a><ul>
<li><a class="reference internal" href="#cross-referencing-syntax">Cross-referencing syntax</a><ul>
<li><a class="reference internal" href="#cross-referencing-anything">Cross-referencing anything</a><ul>
<li><a class="reference internal" href="#role-any"><code class="docutils literal notranslate"><span class="pre">:any:</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#cross-referencing-objects">Cross-referencing objects</a></li>
<li><a class="reference internal" href="#cross-referencing-arbitrary-locations">Cross-referencing arbitrary locations</a><ul>
<li><a class="reference internal" href="#role-ref"><code class="docutils literal notranslate"><span class="pre">:ref:</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#cross-referencing-documents">Cross-referencing documents</a><ul>
<li><a class="reference internal" href="#role-doc"><code class="docutils literal notranslate"><span class="pre">:doc:</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#referencing-downloadable-files">Referencing downloadable files</a><ul>
<li><a class="reference internal" href="#role-download"><code class="docutils literal notranslate"><span class="pre">:download:</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#cross-referencing-figures-by-figure-number">Cross-referencing figures by figure number</a><ul>
<li><a class="reference internal" href="#role-numref"><code class="docutils literal notranslate"><span class="pre">:numref:</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#cross-referencing-other-items-of-interest">Cross-referencing other items of interest</a><ul>
<li><a class="reference internal" href="#role-envvar"><code class="docutils literal notranslate"><span class="pre">:envvar:</span></code></a></li>
<li><a class="reference internal" href="#role-token"><code class="docutils literal notranslate"><span class="pre">:token:</span></code></a></li>
<li><a class="reference internal" href="#role-keyword"><code class="docutils literal notranslate"><span class="pre">:keyword:</span></code></a></li>
<li><a class="reference internal" href="#role-option"><code class="docutils literal notranslate"><span class="pre">:option:</span></code></a></li>
<li><a class="reference internal" href="#role-term"><code class="docutils literal notranslate"><span class="pre">:term:</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#inline-code-highlighting">Inline code highlighting</a><ul>
<li><a class="reference internal" href="#role-code"><code class="docutils literal notranslate"><span class="pre">:code:</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#math">Math</a><ul>
<li><a class="reference internal" href="#role-math"><code class="docutils literal notranslate"><span class="pre">:math:</span></code></a></li>
<li><a class="reference internal" href="#role-eq"><code class="docutils literal notranslate"><span class="pre">:eq:</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#other-semantic-markup">Other semantic markup</a><ul>
<li><a class="reference internal" href="#role-abbr"><code class="docutils literal notranslate"><span class="pre">:abbr:</span></code></a></li>
<li><a class="reference internal" href="#role-command"><code class="docutils literal notranslate"><span class="pre">:command:</span></code></a></li>
<li><a class="reference internal" href="#role-dfn"><code class="docutils literal notranslate"><span class="pre">:dfn:</span></code></a></li>
<li><a class="reference internal" href="#role-file"><code class="docutils literal notranslate"><span class="pre">:file:</span></code></a></li>
<li><a class="reference internal" href="#role-guilabel"><code class="docutils literal notranslate"><span class="pre">:guilabel:</span></code></a></li>
<li><a class="reference internal" href="#role-kbd"><code class="docutils literal notranslate"><span class="pre">:kbd:</span></code></a></li>
<li><a class="reference internal" href="#role-mailheader"><code class="docutils literal notranslate"><span class="pre">:mailheader:</span></code></a></li>
<li><a class="reference internal" href="#role-makevar"><code class="docutils literal notranslate"><span class="pre">:makevar:</span></code></a></li>
<li><a class="reference internal" href="#role-manpage"><code class="docutils literal notranslate"><span class="pre">:manpage:</span></code></a></li>
<li><a class="reference internal" href="#role-menuselection"><code class="docutils literal notranslate"><span class="pre">:menuselection:</span></code></a></li>
<li><a class="reference internal" href="#role-mimetype"><code class="docutils literal notranslate"><span class="pre">:mimetype:</span></code></a></li>
<li><a class="reference internal" href="#role-newsgroup"><code class="docutils literal notranslate"><span class="pre">:newsgroup:</span></code></a></li>
<li><a class="reference internal" href="#role-program"><code class="docutils literal notranslate"><span class="pre">:program:</span></code></a></li>
<li><a class="reference internal" href="#role-regexp"><code class="docutils literal notranslate"><span class="pre">:regexp:</span></code></a></li>
<li><a class="reference internal" href="#role-samp"><code class="docutils literal notranslate"><span class="pre">:samp:</span></code></a></li>
<li><a class="reference internal" href="#role-pep"><code class="docutils literal notranslate"><span class="pre">:pep:</span></code></a></li>
<li><a class="reference internal" href="#role-rfc"><code class="docutils literal notranslate"><span class="pre">:rfc:</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#substitutions">Substitutions</a></li>
</ul>
</li>
</ul>
</div>
<div class="sphinxsidebar-navigation__pages">
<h3>Site navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Get started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installing Sphinx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial/index.html">Tutorial: Build your first project</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Guides</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Using Sphinx</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">reStructuredText</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="basics.html">reStructuredText Primer</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Roles</a></li>
<li class="toctree-l3"><a class="reference internal" href="directives.html">Directives</a></li>
<li class="toctree-l3"><a class="reference internal" href="field-lists.html">Field Lists</a></li>
<li class="toctree-l3"><a class="reference internal" href="domains.html">Domains</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../markdown.html">Markdown</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration.html">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../builders/index.html">Builders</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extensions/index.html">Extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../theming.html">HTML Theming</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced/intl.html">Internationalization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced/setuptools.html">Setuptools integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced/websupport/index.html">Sphinx Web Support</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../development/index.html">Extending Sphinx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../templating.html">Templating</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../latex.html">LaTeX customization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../extdev/index.html">Developing extensions for Sphinx</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Community</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../support.html">Get support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../internals/index.html">Contribute to Sphinx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">Sphinx FAQ</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../man/index.html">Command-Line Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changes.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples.html">Projects using Sphinx</a></li>
</ul>
</div>
</div>
<div class="body" role="main">
<section id="roles">
<h1>Roles<a class="headerlink" href="#roles" title="Permalink to this heading">¶</a></h1>
<p>Sphinx uses interpreted text roles to insert semantic markup into documents.
They are written as <code class="docutils literal notranslate"><span class="pre">:rolename:`content`</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The default role (<code class="docutils literal notranslate"><span class="pre">`content`</span></code>) has no special meaning by default.  You are
free to use it for anything you like, e.g. variable names; use the
<a class="reference internal" href="../configuration.html#confval-default_role"><code class="xref std std-confval docutils literal notranslate"><span class="pre">default_role</span></code></a> config value to set it to a known role – the
<a class="reference internal" href="#role-any" title="any role"><code class="xref rst rst-role docutils literal notranslate"><span class="pre">any</span></code></a> role to find anything or the <a class="reference internal" href="domains.html#role-py-obj" title="py:obj role"><code class="xref rst rst-role docutils literal notranslate"><span class="pre">py:obj</span></code></a> role to find
Python objects are very useful for this.</p>
</div>
<p>See <a class="reference internal" href="domains.html"><span class="doc">Domains</span></a> for roles added by domains.</p>
<section id="cross-referencing-syntax">
<span id="xref-syntax"></span><h2>Cross-referencing syntax<a class="headerlink" href="#cross-referencing-syntax" title="Permalink to this heading">¶</a></h2>
<p>Cross-references are generated by many semantic interpreted text roles.
Basically, you only need to write <code class="docutils literal notranslate"><span class="pre">:role:`target`</span></code>, and a link will be
created to the item named <em>target</em> of the type indicated by <em>role</em>.  The link’s
text will be the same as <em>target</em>.</p>
<p>There are some additional facilities, however, that make cross-referencing
roles more versatile:</p>
<ul>
<li><p>You may supply an explicit title and reference target, like in reST direct
hyperlinks: <code class="docutils literal notranslate"><span class="pre">:role:`title</span> <span class="pre">&lt;target&gt;`</span></code> will refer to <em>target</em>, but the link
text will be <em>title</em>.</p></li>
<li><p>If you prefix the content with <code class="docutils literal notranslate"><span class="pre">!</span></code>, no reference/hyperlink will be created.</p></li>
<li><p>If you prefix the content with <code class="docutils literal notranslate"><span class="pre">~</span></code>, the link text will only be the last
component of the target.  For example, <code class="docutils literal notranslate"><span class="pre">:py:meth:`~Queue.Queue.get`</span></code> will
refer to <code class="docutils literal notranslate"><span class="pre">Queue.Queue.get</span></code> but only display <code class="docutils literal notranslate"><span class="pre">get</span></code> as the link text.  This
does not work with all cross-reference roles, but is domain specific.</p>
<p>In HTML output, the link’s <code class="docutils literal notranslate"><span class="pre">title</span></code> attribute (that is e.g. shown as a
tool-tip on mouse-hover) will always be the full target name.</p>
</li>
</ul>
<section id="cross-referencing-anything">
<span id="any-role"></span><h3>Cross-referencing anything<a class="headerlink" href="#cross-referencing-anything" title="Permalink to this heading">¶</a></h3>
<dl class="rst role">
<dt class="sig sig-object rst" id="role-any">
<span class="sig-name descname"><span class="pre">:any:</span></span><a class="headerlink" href="#role-any" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">New in version 1.3.</span></p>
</div>
<p>This convenience role tries to do its best to find a valid target for its
reference text.</p>
<ul>
<li><p>First, it tries standard cross-reference targets that would be referenced
by <a class="reference internal" href="#role-doc" title="doc role"><code class="xref rst rst-role docutils literal notranslate"><span class="pre">doc</span></code></a>, <a class="reference internal" href="#role-ref" title="ref role"><code class="xref rst rst-role docutils literal notranslate"><span class="pre">ref</span></code></a> or <a class="reference internal" href="#role-option" title="option role"><code class="xref rst rst-role docutils literal notranslate"><span class="pre">option</span></code></a>.</p>
<p>Custom objects added to the standard domain by extensions (see
<a class="reference internal" href="../../extdev/appapi.html#sphinx.application.Sphinx.add_object_type" title="sphinx.application.Sphinx.add_object_type"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Sphinx.add_object_type()</span></code></a>) are also searched.</p>
</li>
<li><p>Then, it looks for objects (targets) in all loaded domains.  It is up to
the domains how specific a match must be.  For example, in the Python
domain a reference of <code class="docutils literal notranslate"><span class="pre">:any:`Builder`</span></code> would match the
<code class="docutils literal notranslate"><span class="pre">sphinx.builders.Builder</span></code> class.</p></li>
</ul>
<p>If none or multiple targets are found, a warning will be emitted.  In the
case of multiple targets, you can change “any” to a specific role.</p>
<p>This role is a good candidate for setting <a class="reference internal" href="../configuration.html#confval-default_role"><code class="xref std std-confval docutils literal notranslate"><span class="pre">default_role</span></code></a>.  If you
do, you can write cross-references without a lot of markup overhead.  For
example, in this Python function documentation</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">function</span><span class="p">::</span> install()

   This function installs a <span class="nv">`handler`</span> for every signal known by the
   <span class="nv">`signal`</span> module.  See the section <span class="nv">`about-signals`</span> for more information.
</pre></div>
</div>
<p>there could be references to a glossary term (usually <code class="docutils literal notranslate"><span class="pre">:term:`handler`</span></code>), a
Python module (usually <code class="docutils literal notranslate"><span class="pre">:py:mod:`signal`</span></code> or <code class="docutils literal notranslate"><span class="pre">:mod:`signal`</span></code>) and a
section (usually <code class="docutils literal notranslate"><span class="pre">:ref:`about-signals`</span></code>).</p>
<p>The <a class="reference internal" href="#role-any" title="any role"><code class="xref rst rst-role docutils literal notranslate"><span class="pre">any</span></code></a> role also works together with the
<a class="reference internal" href="../extensions/intersphinx.html#module-sphinx.ext.intersphinx" title="sphinx.ext.intersphinx: Link to other Sphinx documentation."><code class="xref py py-mod docutils literal notranslate"><span class="pre">intersphinx</span></code></a> extension: when no local cross-reference is
found, all object types of intersphinx inventories are also searched.</p>
</dd></dl>
</section>
<section id="cross-referencing-objects">
<h3>Cross-referencing objects<a class="headerlink" href="#cross-referencing-objects" title="Permalink to this heading">¶</a></h3>
<p>These roles are described with their respective domains:</p>
<ul class="simple">
<li><p><a class="reference internal" href="domains.html#python-roles"><span class="std std-ref">Python</span></a></p></li>
<li><p><a class="reference internal" href="domains.html#c-roles"><span class="std std-ref">C</span></a></p></li>
<li><p><a class="reference internal" href="domains.html#cpp-roles"><span class="std std-ref">C++</span></a></p></li>
<li><p><a class="reference internal" href="domains.html#js-roles"><span class="std std-ref">JavaScript</span></a></p></li>
<li><p><a class="reference internal" href="domains.html#rst-roles"><span class="std std-ref">ReST</span></a></p></li>
</ul>
</section>
<section id="cross-referencing-arbitrary-locations">
<span id="ref-role"></span><h3>Cross-referencing arbitrary locations<a class="headerlink" href="#cross-referencing-arbitrary-locations" title="Permalink to this heading">¶</a></h3>
<dl class="rst role">
<dt class="sig sig-object rst" id="role-ref">
<span class="sig-name descname"><span class="pre">:ref:</span></span><a class="headerlink" href="#role-ref" title="Permalink to this definition">¶</a></dt>
<dd><p>To support cross-referencing to arbitrary locations in any document, the
standard reST labels are used.  For this to work label names must be unique
throughout the entire documentation.  There are two ways in which you can
refer to labels:</p>
<ul>
<li><p>If you place a label directly before a section title, you can reference to
it with <code class="docutils literal notranslate"><span class="pre">:ref:`label-name`</span></code>.  For example:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="nt">_my-reference-label:</span>

<span class="gh">Section to cross-reference</span>
<span class="gh">--------------------------</span>

This is the text of the section.

It refers to the section itself, see <span class="na">:ref:</span><span class="nv">`my-reference-label`</span>.
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">:ref:</span></code> role would then generate a link to the section, with the
link title being “Section to cross-reference”.  This works just as well
when section and reference are in different source files.</p>
<p>Automatic labels also work with figures. For example:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="nt">_my-figure:</span>

<span class="p">..</span> <span class="ow">figure</span><span class="p">::</span> whatever

   Figure caption
</pre></div>
</div>
<p>In this case, a  reference <code class="docutils literal notranslate"><span class="pre">:ref:`my-figure`</span></code> would insert a reference
to the figure with link text “Figure caption”.</p>
<p>The same works for tables that are given an explicit caption using the
<a class="reference external" href="https://docutils.sourceforge.io/docs/ref/rst/directives.html#table">table</a> directive.</p>
</li>
<li><p>Labels that aren’t placed before a section title can still be referenced,
but you must give the link an explicit title, using this syntax:
<code class="docutils literal notranslate"><span class="pre">:ref:`Link</span> <span class="pre">title</span> <span class="pre">&lt;label-name&gt;`</span></code>.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Reference labels must start with an underscore. When referencing a label,
the underscore must be omitted (see examples above).</p>
</div>
<p>Using <a class="reference internal" href="#role-ref" title="ref role"><code class="xref rst rst-role docutils literal notranslate"><span class="pre">ref</span></code></a> is advised over standard reStructuredText links to
sections (like <code class="docutils literal notranslate"><span class="pre">`Section</span> <span class="pre">title`_</span></code>) because it works across files, when
section headings are changed, will raise warnings if incorrect, and works
for all builders that support cross-references.</p>
</dd></dl>
</section>
<section id="cross-referencing-documents">
<h3>Cross-referencing documents<a class="headerlink" href="#cross-referencing-documents" title="Permalink to this heading">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.6.</span></p>
</div>
<p>There is also a way to directly link to documents:</p>
<dl class="rst role">
<dt class="sig sig-object rst" id="role-doc">
<span class="sig-name descname"><span class="pre">:doc:</span></span><a class="headerlink" href="#role-doc" title="Permalink to this definition">¶</a></dt>
<dd><p>Link to the specified document; the document name can be specified in
absolute or relative fashion.  For example, if the reference
<code class="docutils literal notranslate"><span class="pre">:doc:`parrot`</span></code> occurs in the document <code class="docutils literal notranslate"><span class="pre">sketches/index</span></code>, then the link
refers to <code class="docutils literal notranslate"><span class="pre">sketches/parrot</span></code>.  If the reference is <code class="docutils literal notranslate"><span class="pre">:doc:`/people`</span></code> or
<code class="docutils literal notranslate"><span class="pre">:doc:`../people`</span></code>, the link refers to <code class="docutils literal notranslate"><span class="pre">people</span></code>.</p>
<p>If no explicit link text is given (like usual: <code class="docutils literal notranslate"><span class="pre">:doc:`Monty</span> <span class="pre">Python</span> <span class="pre">members</span>
<span class="pre">&lt;/people&gt;`</span></code>), the link caption will be the title of the given document.</p>
</dd></dl>
</section>
<section id="referencing-downloadable-files">
<h3>Referencing downloadable files<a class="headerlink" href="#referencing-downloadable-files" title="Permalink to this heading">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.6.</span></p>
</div>
<dl class="rst role">
<dt class="sig sig-object rst" id="role-download">
<span class="sig-name descname"><span class="pre">:download:</span></span><a class="headerlink" href="#role-download" title="Permalink to this definition">¶</a></dt>
<dd><p>This role lets you link to files within your source tree that are not reST
documents that can be viewed, but files that can be downloaded.</p>
<p>When you use this role, the referenced file is automatically marked for
inclusion in the output when building (obviously, for HTML output only).
All downloadable files are put into a <code class="docutils literal notranslate"><span class="pre">_downloads/&lt;unique</span> <span class="pre">hash&gt;/</span></code>
subdirectory of the output directory; duplicate filenames are handled.</p>
<p>An example:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>See <span class="na">:download:</span><span class="nv">`this example script &lt;../example.py&gt;`</span>.
</pre></div>
</div>
<p>The given filename is usually relative to the directory the current source
file is contained in, but if it absolute (starting with <code class="docutils literal notranslate"><span class="pre">/</span></code>), it is taken
as relative to the top source directory.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">example.py</span></code> file will be copied to the output directory, and a
suitable link generated to it.</p>
<p>Not to show unavailable download links, you should wrap whole paragraphs that
have this role:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">only</span><span class="p">::</span> builder_html

   See <span class="na">:download:</span><span class="nv">`this example script &lt;../example.py&gt;`</span>.
</pre></div>
</div>
</dd></dl>
</section>
<section id="cross-referencing-figures-by-figure-number">
<h3>Cross-referencing figures by figure number<a class="headerlink" href="#cross-referencing-figures-by-figure-number" title="Permalink to this heading">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.3.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.5: </span><cite>numref</cite> role can also refer sections.
And <cite>numref</cite> allows <cite>{name}</cite> for the link text.</p>
</div>
<dl class="rst role">
<dt class="sig sig-object rst" id="role-numref">
<span class="sig-name descname"><span class="pre">:numref:</span></span><a class="headerlink" href="#role-numref" title="Permalink to this definition">¶</a></dt>
<dd><p>Link to the specified figures, tables, code-blocks and sections; the standard
reST labels are used.  When you use this role, it will insert a reference to
the figure with link text by its figure number like “Fig. 1.1”.</p>
<p>If an explicit link text is given (as usual: <code class="docutils literal notranslate"><span class="pre">:numref:`Image</span> <span class="pre">of</span> <span class="pre">Sphinx</span> <span class="pre">(Fig.</span>
<span class="pre">%s)</span> <span class="pre">&lt;my-figure&gt;`</span></code>), the link caption will serve as title of the reference.
As placeholders, <cite>%s</cite> and <cite>{number}</cite> get replaced by the figure
number and  <cite>{name}</cite> by the figure caption.
If no explicit link text is given, the <a class="reference internal" href="../configuration.html#confval-numfig_format"><code class="xref std std-confval docutils literal notranslate"><span class="pre">numfig_format</span></code></a> setting is
used as fall-back default.</p>
<p>If <a class="reference internal" href="../configuration.html#confval-numfig"><code class="xref std std-confval docutils literal notranslate"><span class="pre">numfig</span></code></a> is <code class="docutils literal notranslate"><span class="pre">False</span></code>, figures are not numbered,
so this role inserts not a reference but the label or the link text.</p>
</dd></dl>
</section>
<section id="cross-referencing-other-items-of-interest">
<h3>Cross-referencing other items of interest<a class="headerlink" href="#cross-referencing-other-items-of-interest" title="Permalink to this heading">¶</a></h3>
<p>The following roles do possibly create a cross-reference, but do not refer to
objects:</p>
<dl class="rst role">
<dt class="sig sig-object rst" id="role-envvar">
<span class="sig-name descname"><span class="pre">:envvar:</span></span><a class="headerlink" href="#role-envvar" title="Permalink to this definition">¶</a></dt>
<dd><p>An environment variable.  Index entries are generated.  Also generates a link
to the matching <a class="reference internal" href="domains.html#directive-envvar" title="envvar directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">envvar</span></code></a> directive, if it exists.</p>
</dd></dl>
<dl class="rst role">
<dt class="sig sig-object rst" id="role-token">
<span class="sig-name descname"><span class="pre">:token:</span></span><a class="headerlink" href="#role-token" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of a grammar token (used to create links between
<a class="reference internal" href="directives.html#directive-productionlist" title="productionlist directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">productionlist</span></code></a> directives).</p>
</dd></dl>
<dl class="rst role">
<dt class="sig sig-object rst" id="role-keyword">
<span class="sig-name descname"><span class="pre">:keyword:</span></span><a class="headerlink" href="#role-keyword" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of a keyword in Python.  This creates a link to a reference label
with that name, if it exists.</p>
</dd></dl>
<dl class="rst role">
<dt class="sig sig-object rst" id="role-option">
<span class="sig-name descname"><span class="pre">:option:</span></span><a class="headerlink" href="#role-option" title="Permalink to this definition">¶</a></dt>
<dd><p>A command-line option to an executable program.  This generates a link to
a <a class="reference internal" href="domains.html#directive-option" title="option directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">option</span></code></a> directive, if it exists.</p>
</dd></dl>
<p>The following role creates a cross-reference to a term in a
<a class="reference internal" href="directives.html#glossary-directive"><span class="std std-ref">glossary</span></a>:</p>
<dl class="rst role">
<dt class="sig sig-object rst" id="role-term">
<span class="sig-name descname"><span class="pre">:term:</span></span><a class="headerlink" href="#role-term" title="Permalink to this definition">¶</a></dt>
<dd><p>Reference to a term in a glossary.  A glossary is created using the
<code class="docutils literal notranslate"><span class="pre">glossary</span></code> directive containing a definition list with terms and
definitions.  It does not have to be in the same file as the <code class="docutils literal notranslate"><span class="pre">term</span></code> markup,
for example the Python docs have one global glossary in the <code class="docutils literal notranslate"><span class="pre">glossary.rst</span></code>
file.</p>
<p>If you use a term that’s not explained in a glossary, you’ll get a warning
during build.</p>
</dd></dl>
</section>
</section>
<section id="inline-code-highlighting">
<h2>Inline code highlighting<a class="headerlink" href="#inline-code-highlighting" title="Permalink to this heading">¶</a></h2>
<dl class="rst role">
<dt class="sig sig-object rst" id="role-code">
<span class="sig-name descname"><span class="pre">:code:</span></span><a class="headerlink" href="#role-code" title="Permalink to this definition">¶</a></dt>
<dd><p>An <em>inline</em> code example.  When used directly, this role just displays the
text <em>without</em> syntax highlighting, as a literal.</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>By default, inline code such as <span class="na">:code:</span><span class="nv">`1 + 2`</span> just displays without
highlighting.
</pre></div>
</div>
<p>Unlike the <a class="reference internal" href="directives.html#directive-code-block" title="code-block directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">code-block</span></code></a> directive, this role does not respect the
default language set by the <a class="reference internal" href="directives.html#directive-highlight" title="highlight directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">highlight</span></code></a> directive.</p>
<p>To enable syntax highlighting, you must first use the Docutils <a class="reference external" href="https://docutils.sourceforge.io/docs/ref/rst/directives.html#role">role</a>
directive to define a custom role associated with a specific language:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">role</span><span class="p">::</span> python(code)
   <span class="nc">:language:</span> python

In Python, <span class="na">:python:</span><span class="nv">`1 + 2`</span> is equal to <span class="na">:python:</span><span class="nv">`3`</span>.
</pre></div>
</div>
<p>To display a multi-line code example, use the <a class="reference internal" href="directives.html#directive-code-block" title="code-block directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">code-block</span></code></a> directive
instead.</p>
</dd></dl>
</section>
<section id="math">
<h2>Math<a class="headerlink" href="#math" title="Permalink to this heading">¶</a></h2>
<dl class="rst role">
<dt class="sig sig-object rst" id="role-math">
<span class="sig-name descname"><span class="pre">:math:</span></span><a class="headerlink" href="#role-math" title="Permalink to this definition">¶</a></dt>
<dd><p>Role for inline math.  Use like this:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>Since Pythagoras, we know that <span class="na">:math:</span><span class="nv">`a^2 + b^2 = c^2`</span>.
</pre></div>
</div>
</dd></dl>
<dl class="rst role">
<dt class="sig sig-object rst" id="role-eq">
<span class="sig-name descname"><span class="pre">:eq:</span></span><a class="headerlink" href="#role-eq" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as <a class="reference internal" href="domains.html#role-math-numref" title="math:numref role"><code class="xref rst rst-role docutils literal notranslate"><span class="pre">math:numref</span></code></a>.</p>
</dd></dl>
</section>
<section id="other-semantic-markup">
<h2>Other semantic markup<a class="headerlink" href="#other-semantic-markup" title="Permalink to this heading">¶</a></h2>
<p>The following roles don’t do anything special except formatting the text in a
different style:</p>
<dl class="rst role">
<dt class="sig sig-object rst" id="role-abbr">
<span class="sig-name descname"><span class="pre">:abbr:</span></span><a class="headerlink" href="#role-abbr" title="Permalink to this definition">¶</a></dt>
<dd><p>An abbreviation.  If the role content contains a parenthesized explanation,
it will be treated specially: it will be shown in a tool-tip in HTML, and
output only once in LaTeX.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">:abbr:`LIFO</span> <span class="pre">(last-in,</span> <span class="pre">first-out)`</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.6.</span></p>
</div>
</dd></dl>
<dl class="rst role">
<dt class="sig sig-object rst" id="role-command">
<span class="sig-name descname"><span class="pre">:command:</span></span><a class="headerlink" href="#role-command" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of an OS-level command, such as <code class="docutils literal notranslate"><span class="pre">rm</span></code>.</p>
</dd></dl>
<dl class="rst role">
<dt class="sig sig-object rst" id="role-dfn">
<span class="sig-name descname"><span class="pre">:dfn:</span></span><a class="headerlink" href="#role-dfn" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark the defining instance of a term in the text.  (No index entries are
generated.)</p>
</dd></dl>
<dl class="rst role">
<dt class="sig sig-object rst" id="role-file">
<span class="sig-name descname"><span class="pre">:file:</span></span><a class="headerlink" href="#role-file" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of a file or directory.  Within the contents, you can use curly
braces to indicate a “variable” part, for example:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="cp">... is installed in :file:`/usr/lib/python3.{x}/site-packages` ...</span>
</pre></div>
</div>
<p>In the built documentation, the <code class="docutils literal notranslate"><span class="pre">x</span></code> will be displayed differently to
indicate that it is to be replaced by the Python minor version.</p>
</dd></dl>
<dl class="rst role">
<dt class="sig sig-object rst" id="role-guilabel">
<span class="sig-name descname"><span class="pre">:guilabel:</span></span><a class="headerlink" href="#role-guilabel" title="Permalink to this definition">¶</a></dt>
<dd><p>Labels presented as part of an interactive user interface should be marked
using <code class="docutils literal notranslate"><span class="pre">guilabel</span></code>.  This includes labels from text-based interfaces such as
those created using <a class="reference external" href="https://docs.python.org/3/library/curses.html#module-curses" title="(in Python v3.10)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">curses</span></code></a> or other text-based libraries.  Any label
used in the interface should be marked with this role, including button
labels, window titles, field names, menu and menu selection names, and even
values in selection lists.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.0: </span>An accelerator key for the GUI label can be included using an ampersand;
this will be stripped and displayed underlined in the output (example:
<code class="docutils literal notranslate"><span class="pre">:guilabel:`&amp;Cancel`</span></code>).  To include a literal ampersand, double it.</p>
</div>
</dd></dl>
<dl class="rst role">
<dt class="sig sig-object rst" id="role-kbd">
<span class="sig-name descname"><span class="pre">:kbd:</span></span><a class="headerlink" href="#role-kbd" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark a sequence of keystrokes.  What form the key sequence takes may depend
on platform- or application-specific conventions.  When there are no
relevant conventions, the names of modifier keys should be spelled out, to
improve accessibility for new users and non-native speakers.  For example,
an <em>xemacs</em> key sequence may be marked like <code class="docutils literal notranslate"><span class="pre">:kbd:`C-x</span> <span class="pre">C-f`</span></code>, but without
reference to a specific application or platform, the same sequence should be
marked as <code class="docutils literal notranslate"><span class="pre">:kbd:`Control-x</span> <span class="pre">Control-f`</span></code>.</p>
</dd></dl>
<dl class="rst role">
<dt class="sig sig-object rst" id="role-mailheader">
<span class="sig-name descname"><span class="pre">:mailheader:</span></span><a class="headerlink" href="#role-mailheader" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of an RFC 822-style mail header.  This markup does not imply that
the header is being used in an email message, but can be used to refer to
any header of the same “style.”  This is also used for headers defined by
the various MIME specifications.  The header name should be entered in the
same way it would normally be found in practice, with the camel-casing
conventions being preferred where there is more than one common usage. For
example: <code class="docutils literal notranslate"><span class="pre">:mailheader:`Content-Type`</span></code>.</p>
</dd></dl>
<dl class="rst role">
<dt class="sig sig-object rst" id="role-makevar">
<span class="sig-name descname"><span class="pre">:makevar:</span></span><a class="headerlink" href="#role-makevar" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of a <strong class="command">make</strong> variable.</p>
</dd></dl>
<dl class="rst role">
<dt class="sig sig-object rst" id="role-manpage">
<span class="sig-name descname"><span class="pre">:manpage:</span></span><a class="headerlink" href="#role-manpage" title="Permalink to this definition">¶</a></dt>
<dd><p>A reference to a Unix manual page including the section, e.g.
<code class="docutils literal notranslate"><span class="pre">:manpage:`ls(1)`</span></code>. Creates a hyperlink to an external site rendering the
manpage if <a class="reference internal" href="../configuration.html#confval-manpages_url"><code class="xref std std-confval docutils literal notranslate"><span class="pre">manpages_url</span></code></a> is defined.</p>
</dd></dl>
<dl class="rst role">
<dt class="sig sig-object rst" id="role-menuselection">
<span class="sig-name descname"><span class="pre">:menuselection:</span></span><a class="headerlink" href="#role-menuselection" title="Permalink to this definition">¶</a></dt>
<dd><p>Menu selections should be marked using the <code class="docutils literal notranslate"><span class="pre">menuselection</span></code> role.  This is
used to mark a complete sequence of menu selections, including selecting
submenus and choosing a specific operation, or any subsequence of such a
sequence.  The names of individual selections should be separated by
<code class="docutils literal notranslate"><span class="pre">--&gt;</span></code>.</p>
<p>For example, to mark the selection “Start &gt; Programs”, use this markup:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="na">:menuselection:</span><span class="nv">`Start --&gt; Programs`</span>
</pre></div>
</div>
<p>When including a selection that includes some trailing indicator, such as
the ellipsis some operating systems use to indicate that the command opens a
dialog, the indicator should be omitted from the selection name.</p>
<p><code class="docutils literal notranslate"><span class="pre">menuselection</span></code> also supports ampersand accelerators just like
<a class="reference internal" href="#role-guilabel" title="guilabel role"><code class="xref rst rst-role docutils literal notranslate"><span class="pre">guilabel</span></code></a>.</p>
</dd></dl>
<dl class="rst role">
<dt class="sig sig-object rst" id="role-mimetype">
<span class="sig-name descname"><span class="pre">:mimetype:</span></span><a class="headerlink" href="#role-mimetype" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of a MIME type, or a component of a MIME type (the major or minor
portion, taken alone).</p>
</dd></dl>
<dl class="rst role">
<dt class="sig sig-object rst" id="role-newsgroup">
<span class="sig-name descname"><span class="pre">:newsgroup:</span></span><a class="headerlink" href="#role-newsgroup" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of a Usenet newsgroup.</p>
</dd></dl>
<div class="admonition-todo admonition" id="id1">
<p class="admonition-title">Todo</p>
<p>Is this not part of the standard domain?</p>
</div>
<dl class="rst role">
<dt class="sig sig-object rst" id="role-program">
<span class="sig-name descname"><span class="pre">:program:</span></span><a class="headerlink" href="#role-program" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of an executable program.  This may differ from the file name for
the executable for some platforms.  In particular, the <code class="docutils literal notranslate"><span class="pre">.exe</span></code> (or other)
extension should be omitted for Windows programs.</p>
</dd></dl>
<dl class="rst role">
<dt class="sig sig-object rst" id="role-regexp">
<span class="sig-name descname"><span class="pre">:regexp:</span></span><a class="headerlink" href="#role-regexp" title="Permalink to this definition">¶</a></dt>
<dd><p>A regular expression. Quotes should not be included.</p>
</dd></dl>
<dl class="rst role">
<dt class="sig sig-object rst" id="role-samp">
<span class="sig-name descname"><span class="pre">:samp:</span></span><a class="headerlink" href="#role-samp" title="Permalink to this definition">¶</a></dt>
<dd><p>A piece of literal text, such as code.  Within the contents, you can use
curly braces to indicate a “variable” part, as in <a class="reference internal" href="#role-file" title="file role"><code class="xref rst rst-role docutils literal notranslate"><span class="pre">file</span></code></a>.  For
example, in <code class="docutils literal notranslate"><span class="pre">:samp:`print</span> <span class="pre">1+{variable}`</span></code>, the part <code class="docutils literal notranslate"><span class="pre">variable</span></code> would be
emphasized.</p>
<p>If you don’t need the “variable part” indication, use the standard
<a class="reference internal" href="#role-code" title="code role"><code class="xref rst rst-role docutils literal notranslate"><span class="pre">code</span></code></a> role instead.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.8: </span>Allowed to escape curly braces with backslash</p>
</div>
</dd></dl>
<p>There is also an <a class="reference internal" href="directives.html#role-index" title="index role"><code class="xref rst rst-role docutils literal notranslate"><span class="pre">index</span></code></a> role to generate index entries.</p>
<p>The following roles generate external links:</p>
<dl class="rst role">
<dt class="sig sig-object rst" id="role-pep">
<span class="sig-name descname"><span class="pre">:pep:</span></span><a class="headerlink" href="#role-pep" title="Permalink to this definition">¶</a></dt>
<dd><p>A reference to a Python Enhancement Proposal.  This generates appropriate
index entries. The text “PEP <em>number</em>” is generated; in the HTML output,
this text is a hyperlink to an online copy of the specified PEP.  You can
link to a specific section by saying <code class="docutils literal notranslate"><span class="pre">:pep:`number#anchor`</span></code>.</p>
</dd></dl>
<dl class="rst role">
<dt class="sig sig-object rst" id="role-rfc">
<span class="sig-name descname"><span class="pre">:rfc:</span></span><a class="headerlink" href="#role-rfc" title="Permalink to this definition">¶</a></dt>
<dd><p>A reference to an Internet Request for Comments.  This generates appropriate
index entries. The text “RFC <em>number</em>” is generated; in the HTML output,
this text is a hyperlink to an online copy of the specified RFC.  You can
link to a specific section by saying <code class="docutils literal notranslate"><span class="pre">:rfc:`number#anchor`</span></code>.</p>
</dd></dl>
<p>Note that there are no special roles for including hyperlinks as you can use
the standard reST markup for that purpose.</p>
</section>
<section id="substitutions">
<span id="default-substitutions"></span><h2>Substitutions<a class="headerlink" href="#substitutions" title="Permalink to this heading">¶</a></h2>
<p>The documentation system provides three substitutions that are defined by
default. They are set in the build configuration file.</p>
<dl class="describe">
<dt class="sig sig-object">
<span class="sig-name descname"><span class="pre">|release|</span></span></dt>
<dd><p>Replaced by the project release the documentation refers to.  This is meant
to be the full version string including alpha/beta/release candidate tags,
e.g. <code class="docutils literal notranslate"><span class="pre">2.5.2b3</span></code>.  Set by <a class="reference internal" href="../configuration.html#confval-release"><code class="xref std std-confval docutils literal notranslate"><span class="pre">release</span></code></a>.</p>
</dd></dl>
<dl class="describe">
<dt class="sig sig-object">
<span class="sig-name descname"><span class="pre">|version|</span></span></dt>
<dd><p>Replaced by the project version the documentation refers to. This is meant to
consist only of the major and minor version parts, e.g. <code class="docutils literal notranslate"><span class="pre">2.5</span></code>, even for
version 2.5.1.  Set by <a class="reference internal" href="../configuration.html#confval-version"><code class="xref std std-confval docutils literal notranslate"><span class="pre">version</span></code></a>.</p>
</dd></dl>
<dl class="describe">
<dt class="sig sig-object">
<span class="sig-name descname"><span class="pre">|today|</span></span></dt>
<dd><p>Replaced by either today’s date (the date on which the document is read), or
the date set in the build configuration file.  Normally has the format
<code class="docutils literal notranslate"><span class="pre">April</span> <span class="pre">14,</span> <span class="pre">2007</span></code>.  Set by <a class="reference internal" href="../configuration.html#confval-today_fmt"><code class="xref std std-confval docutils literal notranslate"><span class="pre">today_fmt</span></code></a> and <a class="reference internal" href="../configuration.html#confval-today"><code class="xref std std-confval docutils literal notranslate"><span class="pre">today</span></code></a>.</p>
</dd></dl>
</section>
</section>
</div>
</div>
<div class="footer" role="contentinfo">
  © <a href="../../copyright.html">Copyright</a> 2007-2022, the Sphinx developers.
  Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
</div>
<script>var embed_css = function() {
    Array.from(document.querySelectorAll("link")).forEach( link => {
        if (link.getAttribute('rel') == 'stylesheet') {
            const style = document.createElement("style");
            var href = link.getAttribute('href');
            let [path, get_parameters, anchor] = split_url(href);
            path = normalize_path(path);
            style.innerText = retrieve_file(path);
            link.replaceWith(style);
        };
    });
};


var embed_js = function() {
    Array.from(document.querySelectorAll("script")).forEach( oldScript => {
        const newScript = document.createElement("script");
        Array.from(oldScript.attributes).forEach( attr => {
            newScript.setAttribute(attr.name, attr.value);
        });
        try {
            if (newScript.hasAttribute('src') && is_virtual(newScript.getAttribute('src'))) {
                var src = newScript.getAttribute('src');
                let [path, get_parameters, anchor] = split_url(src);
                path = normalize_path(path);
                var src = retrieve_file(path) + ' //# sourceMap=' + path;
                newScript.appendChild(document.createTextNode(src));
                newScript.removeAttribute('src');
                oldScript.parentNode.replaceChild(newScript, oldScript);
            }
        } catch (e) {
            // Make sure all scripts are loaded
            console.error("Caught error in " + oldScript.getAttribute("src"), e);
        }
    });
};


var split_url = function(url) {
    // Return a list of three elements: path, GET parameters, anchor
    var anchor = url.split('#')[1] || "";
    var get_parameters = url.split('#')[0].split('?')[1] || "";
    var path = url.split('#')[0];
    path = path.split('?')[0];
    let result = [path, get_parameters, anchor];
    // console.log("Split URL", url, result);
    return result;
}


var virtual_click = function(evnt) {
    // Handle GET parameters and anchors
    // console.log("Virtual click", evnt);

    var el = evnt.currentTarget;
    var name = el.tagName.toLowerCase();

    if (name == 'a') {
        var [path, get_parameters, anchor] = split_url(el.getAttribute('href'));
    } else if (name == 'form') {
        var [path, get_parameters, anchor] = split_url(el.getAttribute('action'));
        const formData = new FormData(el);
        get_parameters = new URLSearchParams(formData).toString();
    } else {
        console.error("Invalid element", el);
    }

    path = normalize_path(path);

    window.parent.postMessage({
        action: "virtual_click",
        argument: {
            path: path,
            get_parameters: get_parameters,
            anchor: anchor,
        }
    }, '*');
    evnt.preventDefault();
    evnt.stopPropagation();
    return false;
};

var fix_links = function() {
    Array.from(document.querySelectorAll("a")).forEach( a => {
        fix_link(a);
    });
};

var fix_link = function(a) {
    if (is_virtual(a.getAttribute('href'))) {
        a.addEventListener('click', virtual_click);
    } else if (a.getAttribute('href').startsWith('#')) {
        a.setAttribute('href', "about:srcdoc" + a.getAttribute('href'))
    } else {
        // External links should open in a new tab. Browsers block links to
        // sites of different origin within an iframe for security reasons.
        a.setAttribute('target', "_blank");
    }
};

var fix_form = function(form) {
    var href = form.getAttribute('action');
    if (is_virtual(href) && form.getAttribute('method').toLowerCase() == 'get') {
        form.addEventListener('submit', virtual_click);
    }
};


var fix_forms = function() {
    Array.from(document.querySelectorAll("form")).forEach( form => {
        fix_form(form);
    });
};


var embed_img = function(img) {
    if (img.hasAttribute('src')) {
        const src = img.getAttribute('src');
        if (is_virtual(src)) {
            var path = normalize_path(src);
            const file = retrieve_file(path);
            const mime_type = window.global_context.file_tree[path].mime_type;
            if (mime_type == 'image/svg+xml') {
                img.setAttribute('src', "data:image/svg+xml;charset=utf-8;base64, " + btoa(file));
            } else {
                img.setAttribute('src', `data:${mime_type};base64, ${file}`);
            }
        };
    };
};

var embed_imgs = function() {
    Array.from(document.querySelectorAll("img")).forEach( img => {
        embed_img(img);
    });
};

var is_virtual = function(url) {
    // Return true if the url should be retrieved from the virtual file tree
    var _url = url.toString().toLowerCase();
    return (! (
        _url == "" ||
        _url[0] == "#" ||
        _url.startsWith('https://') ||
        _url.startsWith('http://') ||
        _url.startsWith('data:') ||
        _url.startsWith('blob:')
    ));
};

var retrieve_file = function(path) {
    // console.log("Retrieving file: " + path);
    var file_tree = window.global_context.file_tree;
    var file = file_tree[path];
    if (!file) {
        console.warn("File not found: " + path);
        return "";
    } else {
        return file.data;
    }
};

var normalize_path = function(path) {
    // make relative paths absolute in context of our virtual file tree

    while (path && path[0] == '/') {
        path = path.substr(1);
    }

    var result = window.global_context.current_path;
    result = result.split('/');
    result.pop();
    result = result.concat(path.split('/'));

    // resolve relative directories
    var array = [];
    Array.from(result).forEach( component => {
        if (component == '..') {
            if (array) {
                array.pop();
            }
        } else if (component == '.') {
        } else {
            if (component) { array.push(component); }
        }
    });

    result = array.join('/');
    // console.log(`Normalized path: ${path} -> ${result} (@${window.global_context.current_path})`);
    return result;
};


var fix_document = function() {
    embed_js(); // This might change the DOM, so do this first
    monkey_patch();
    embed_css();
    embed_imgs();
    fix_links();
    fix_forms();
};


var on_set_data = function(argument) {
    window.global_context = argument;
    console.log("Received data from parent", window.global_context);
    // dynamically fix elements on this page
    try {
        fix_document();
        // Trigger DOMContentLoaded again, some scripts that have just
        // been executed expect it.
        window.document.dispatchEvent(new Event("DOMContentLoaded", {
            bubbles: true,
            cancelable: true
        }));
    } finally {
        observer.observe(window.document.body, {subtree: true, childList: true});
        window.parent.postMessage({
            action: "show_iframe",
            argument: "",
        }, '*');
    }
}


var on_scroll_to_anchor = function(argument) {
    if (window.global_context.anchor) {
        document.location.replace("about:srcdoc#" + window.global_context.anchor);
    }
}


const observer = new MutationObserver((mutationList) => {
    // console.log("Fix mutated elements...", mutationList);
    mutationList.forEach((mutation) => {
        if (mutation.type == 'childList') {
            Array.from(mutation.target.querySelectorAll("a")).forEach( a => {
                fix_link(a);
            });
            Array.from(mutation.target.querySelectorAll("img")).forEach( img => {
                embed_img(img);
            });
            Array.from(mutation.target.querySelectorAll("form")).forEach( form => {
                fix_form(form);
            });
        }
    });
});


var monkey_patch = function() {
    if (typeof jQuery === 'undefined') {return;} // Only for jQuery at the moment
    /**
     * Monkey patch getQueryParameters
     * This function is defined in Sphinx' (v4) doctools.js and incompatible with our
     * approach.
     * This is a copy with effectively only the third line changed.
     * See: https://github.com/sphinx-doc/sphinx/blob/2329fdef8c20c6c75194f5d842b8f62ebad5c79d/sphinx/themes/basic/static/doctools.js#L54
     */
    jQuery._getQueryParameters = jQuery.getQueryParameters;
    jQuery.getQueryParameters = function(s) {
      if (typeof s === 'undefined')
        s = '?' + window.global_context.get_parameters;
      return jQuery._getQueryParameters(s);
    };

    /**
     * Monkey patch jQuery.ajax
     * Only settings.url and settings.complete are supported for virtual
     * URLs.
     */
    jQuery._ajax = jQuery.ajax;
    jQuery.ajax = function(settings) {
        url = normalize_path(settings.url);
        if (is_virtual(url)) {
            var result;
            var data;
            data = retrieve_file(url);
            result = settings.complete({responseText: data}, "");
            return; // Return value not actually needed in searchtools.js
        } else {
            return jQuery.ajax(settings);
        };
    };
}


var on_load = function() {
    // Set up message listener
    window.addEventListener("message", (evnt) => {
        console.log("Received message in iframe", evnt);
        if (evnt.data.action == 'set_data') {
            on_set_data(evnt.data.argument);
        } else if (evnt.data.action == 'scroll_to_anchor') {
            on_scroll_to_anchor(evnt.data.argument);
        }
    }, false);

    // Set parent window title and trigger data transmission
    var favicon = window.document.querySelector("link[rel*='icon']");
    if (favicon) { favicon = favicon.getAttribute('href'); }
    var title = window.document.querySelector('head>title');
    if (title) { title = title.innerText; }

    window.parent.postMessage({
        action: "set_title",
        argument: {
            title: title,
            favicon: favicon
        }
    }, '*');

};


window.addEventListener('load', on_load);
//# sourceURL=inject_post.js</script></body>
</html>