<!DOCTYPE html>
<html lang="en">
<head><script>/*
 * Monkeypatch URLSearchParams
 *
 * Sphinx documents that use `searchtool.js` rely on passing information via
 * GET parameters (aka search parameters). Unfortunately, this doesn't work
 * in our approach due to the same origin policy, so we have to get ...
 * creative.
 *
 * Here, we patch the `URLSearchParams` class so it returns the information
 * stored in `window.global_context.get_parameters`.
 *
 */

const originalGet = URLSearchParams.prototype.get;

var myGet = function (arg) {
    const originalResult = originalGet.apply(this, [arg]);
    // If searchtools.js of sphinx is used
    if (
        window.global_context.get_parameters &&
        (window.location.search === "") &&
        (Array.from(this.entries()).length == 0)
    ) {
        const params = new URLSearchParams('?' + window.global_context.get_parameters);
        const result = params.get(arg);
        // console.log("Return virtual get parameter:", arg, result);
        return result;
    } else {
        return originalResult;
    }
};

URLSearchParams.prototype.get = myGet;

/*
 * Monkeypatch fetch
 */

const { fetch: originalFetch } = window;

window.fetch = async (...args) => {
    let [resource, config ] = args;
    var path = normalize_path(resource);
    var response;
    if (is_virtual(path)) {
        var data = retrieve_file(path);
        response = new Response(data);

    } else {
        response = await originalFetch(resource, config);
    }
    return response;
};
//# sourceURL=inject_pre.js</script>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><meta content="Docutils 0.17.1: http://docutils.sourceforge.net/" name="generator"/>
<title>Math support for HTML outputs in Sphinx — Sphinx documentation</title>
<link href="../../_static/pygments.css" rel="stylesheet" type="text/css"/>
<link href="../../_static/basic.css" rel="stylesheet" type="text/css"/>
<link href="../../_static/graphviz.css" rel="stylesheet" type="text/css"/>
<link href="../../_static/sphinx13.css" rel="stylesheet" type="text/css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.13.1/underscore-min.js"></script>
<script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
<script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
<script src="../../_static/jquery.js"></script>
<script src="../../_static/underscore.js"></script>
<script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
<script src="../../_static/doctools.js"></script>
<script src="../../_static/sphinx_highlight.js"></script>
<link href="https://www.sphinx-doc.org/en/master/usage/extensions/math.html" rel="canonical"/>
<link href="../../_static/opensearch.xml" rel="search" title="Search within Sphinx documentation" type="application/opensearchdescription+xml"/>
<link href="../../_static/favicon.svg" rel="shortcut icon"/>
<link href="../../genindex.html" rel="index" title="Index"/>
<link href="../../search.html" rel="search" title="Search"/>
<link href="napoleon.html" rel="next" title="sphinx.ext.napoleon – Support for NumPy and Google style docstrings"/>
<link href="linkcode.html" rel="prev" title="sphinx.ext.linkcode – Add external links to source code"/>
</head><body>
<div class="pageheader">
<a href="../../index.html">
<img alt="SPHINX" src="../../_static/sphinxheader.png"/>
</a>
</div>
<div aria-label="related navigation" class="related" role="navigation">
<h3>Navigation</h3>
<ul>
<li><a href="../../index.html">Documentation</a> »</li>
<li class="nav-item nav-item-1"><a href="../index.html">Using Sphinx</a> »</li>
<li class="nav-item nav-item-2"><a accesskey="U" href="index.html">Extensions</a> »</li>
<li class="nav-item nav-item-this"><a href="">Math support for HTML outputs in Sphinx</a></li>
</ul>
</div>
<div class="document">
<div aria-label="main navigation" class="sphinxsidebar" role="navigation">
<div id="searchbox" role="search" style="display: none">
<h3 id="searchlabel">Quick search</h3>
<div class="searchformwrapper">
<form action="../../search.html" class="search" method="get">
<input aria-labelledby="searchlabel" autocapitalize="off" autocomplete="off" autocorrect="off" name="q" spellcheck="false" type="text"/>
<input type="submit" value="Go"/>
</form>
</div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
<div class="sphinxsidebar-navigation__contents">
<h3>On this page</h3>
<ul>
<li><a class="reference internal" href="#">Math support for HTML outputs in Sphinx</a><ul>
<li><a class="reference internal" href="#module-sphinx.ext.imgmath"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sphinx.ext.imgmath</span></code> – Render math as images</a></li>
<li><a class="reference internal" href="#module-sphinx.ext.mathjax"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sphinx.ext.mathjax</span></code> – Render math via JavaScript</a></li>
<li><a class="reference internal" href="#module-sphinx.ext.jsmath"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sphinx.ext.jsmath</span></code> – Render math via JavaScript</a></li>
</ul>
</li>
</ul>
</div>
<div class="sphinxsidebar-navigation__pages">
<h3>Site navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Get started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installing Sphinx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial/index.html">Tutorial: Build your first project</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Guides</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Using Sphinx</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../restructuredtext/index.html">reStructuredText</a></li>
<li class="toctree-l2"><a class="reference internal" href="../markdown.html">Markdown</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration.html">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../builders/index.html">Builders</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Extensions</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="autodoc.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sphinx.ext.autodoc</span></code> – Include documentation from docstrings</a></li>
<li class="toctree-l3"><a class="reference internal" href="autosectionlabel.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sphinx.ext.autosectionlabel</span></code> – Allow reference sections using its title</a></li>
<li class="toctree-l3"><a class="reference internal" href="autosummary.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sphinx.ext.autosummary</span></code> – Generate autodoc summaries</a></li>
<li class="toctree-l3"><a class="reference internal" href="coverage.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sphinx.ext.coverage</span></code> – Collect doc coverage stats</a></li>
<li class="toctree-l3"><a class="reference internal" href="doctest.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sphinx.ext.doctest</span></code> – Test snippets in the documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="duration.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sphinx.ext.duration</span></code> – Measure durations of Sphinx processing</a></li>
<li class="toctree-l3"><a class="reference internal" href="extlinks.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sphinx.ext.extlinks</span></code> – Markup to shorten external links</a></li>
<li class="toctree-l3"><a class="reference internal" href="githubpages.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sphinx.ext.githubpages</span></code> – Publish HTML docs in GitHub Pages</a></li>
<li class="toctree-l3"><a class="reference internal" href="graphviz.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sphinx.ext.graphviz</span></code> – Add Graphviz graphs</a></li>
<li class="toctree-l3"><a class="reference internal" href="ifconfig.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sphinx.ext.ifconfig</span></code> – Include content based on configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="imgconverter.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sphinx.ext.imgconverter</span></code> – A reference image converter using Imagemagick</a></li>
<li class="toctree-l3"><a class="reference internal" href="inheritance.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sphinx.ext.inheritance_diagram</span></code> – Include inheritance diagrams</a></li>
<li class="toctree-l3"><a class="reference internal" href="intersphinx.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sphinx.ext.intersphinx</span></code> – Link to other projects’ documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="linkcode.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sphinx.ext.linkcode</span></code> – Add external links to source code</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Math support for HTML outputs in Sphinx</a></li>
<li class="toctree-l3"><a class="reference internal" href="napoleon.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sphinx.ext.napoleon</span></code> – Support for NumPy and Google style docstrings</a></li>
<li class="toctree-l3"><a class="reference internal" href="todo.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sphinx.ext.todo</span></code> – Support for todo items</a></li>
<li class="toctree-l3"><a class="reference internal" href="viewcode.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sphinx.ext.viewcode</span></code> – Add links to highlighted source code</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../theming.html">HTML Theming</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced/intl.html">Internationalization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced/setuptools.html">Setuptools integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced/websupport/index.html">Sphinx Web Support</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../development/index.html">Extending Sphinx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../templating.html">Templating</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../latex.html">LaTeX customization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../extdev/index.html">Developing extensions for Sphinx</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Community</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../support.html">Get support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../internals/index.html">Contribute to Sphinx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">Sphinx FAQ</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../man/index.html">Command-Line Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changes.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples.html">Projects using Sphinx</a></li>
</ul>
</div>
</div>
<div class="body" role="main">
<section id="module-sphinx.ext.mathbase">
<span id="math-support-for-html-outputs-in-sphinx"></span><span id="math-support"></span><h1>Math support for HTML outputs in Sphinx<a class="headerlink" href="#module-sphinx.ext.mathbase" title="Permalink to this heading">¶</a></h1>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.5.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.8: </span>Math support for non-HTML builders is integrated to sphinx-core.
So mathbase extension is no longer needed.</p>
</div>
<p>Since mathematical notation isn’t natively supported by HTML in any way, Sphinx
gives a math support to HTML document with several extensions.  These use the
reStructuredText math <a class="reference internal" href="../restructuredtext/directives.html#directive-math" title="math directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">directive</span></code></a> and <a class="reference internal" href="../restructuredtext/roles.html#role-math" title="math role"><code class="xref rst rst-role docutils literal notranslate"><span class="pre">role</span></code></a>.</p>
<section id="module-sphinx.ext.imgmath">
<span id="sphinx-ext-imgmath-render-math-as-images"></span><h2><a class="reference internal" href="#module-sphinx.ext.imgmath" title="sphinx.ext.imgmath: Render math as PNG or SVG images."><code class="xref py py-mod docutils literal notranslate"><span class="pre">sphinx.ext.imgmath</span></code></a> – Render math as images<a class="headerlink" href="#module-sphinx.ext.imgmath" title="Permalink to this heading">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.</span></p>
</div>
<p>This extension renders math via LaTeX and <a class="reference external" href="https://savannah.nongnu.org/projects/dvipng/">dvipng</a> or <a class="reference external" href="https://dvisvgm.de/">dvisvgm</a> into PNG or SVG
images. This of course means that the computer where the docs are built must
have both programs available.</p>
<p>There are various configuration values you can set to influence how the images
are built:</p>
<dl class="std confval">
<dt class="sig sig-object std" id="confval-imgmath_image_format">
<span class="sig-name descname"><span class="pre">imgmath_image_format</span></span><a class="headerlink" href="#confval-imgmath_image_format" title="Permalink to this definition">¶</a></dt>
<dd><p>The output image format. The default is <code class="docutils literal notranslate"><span class="pre">'png'</span></code>. It should be either
<code class="docutils literal notranslate"><span class="pre">'png'</span></code> or <code class="docutils literal notranslate"><span class="pre">'svg'</span></code>. The image is produced by first executing <code class="docutils literal notranslate"><span class="pre">latex</span></code>
on the TeX mathematical mark-up then (depending on the requested format)
either <a class="reference external" href="https://savannah.nongnu.org/projects/dvipng/">dvipng</a> or <a class="reference external" href="https://dvisvgm.de/">dvisvgm</a>.</p>
</dd></dl>
<dl class="std confval">
<dt class="sig sig-object std" id="confval-imgmath_use_preview">
<span class="sig-name descname"><span class="pre">imgmath_use_preview</span></span><a class="headerlink" href="#confval-imgmath_use_preview" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">dvipng</span></code> and <code class="docutils literal notranslate"><span class="pre">dvisvgm</span></code> both have the ability to collect from LaTeX the
“depth” of the rendered math: an inline image should use this “depth” in a
<code class="docutils literal notranslate"><span class="pre">vertical-align</span></code> style to get correctly aligned with surrounding text.</p>
<p>This mechanism requires the <a class="reference external" href="https://www.gnu.org/software/auctex/preview-latex.html">LaTeX preview package</a> (available as
<code class="docutils literal notranslate"><span class="pre">preview-latex-style</span></code> on Ubuntu xenial).  Therefore, the default for this
option is <code class="docutils literal notranslate"><span class="pre">False</span></code> but it is strongly recommended to set it to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.2: </span>This option can be used with the <code class="docutils literal notranslate"><span class="pre">'svg'</span></code> <a class="reference internal" href="#confval-imgmath_image_format"><code class="xref std std-confval docutils literal notranslate"><span class="pre">imgmath_image_format</span></code></a>.</p>
</div>
</dd></dl>
<dl class="std confval">
<dt class="sig sig-object std" id="confval-imgmath_add_tooltips">
<span class="sig-name descname"><span class="pre">imgmath_add_tooltips</span></span><a class="headerlink" href="#confval-imgmath_add_tooltips" title="Permalink to this definition">¶</a></dt>
<dd><p>Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.  If false, do not add the LaTeX code as an “alt” attribute
for math images.</p>
</dd></dl>
<dl class="std confval">
<dt class="sig sig-object std" id="confval-imgmath_font_size">
<span class="sig-name descname"><span class="pre">imgmath_font_size</span></span><a class="headerlink" href="#confval-imgmath_font_size" title="Permalink to this definition">¶</a></dt>
<dd><p>The font size (in <code class="docutils literal notranslate"><span class="pre">pt</span></code>) of the displayed math.  The default value is
<code class="docutils literal notranslate"><span class="pre">12</span></code>.  It must be a positive integer.</p>
</dd></dl>
<dl class="std confval">
<dt class="sig sig-object std" id="confval-imgmath_latex">
<span class="sig-name descname"><span class="pre">imgmath_latex</span></span><a class="headerlink" href="#confval-imgmath_latex" title="Permalink to this definition">¶</a></dt>
<dd><p>The command name with which to invoke LaTeX.  The default is <code class="docutils literal notranslate"><span class="pre">'latex'</span></code>; you
may need to set this to a full path if <code class="docutils literal notranslate"><span class="pre">latex</span></code> is not in the executable
search path.</p>
<p>Since this setting is not portable from system to system, it is normally not
useful to set it in <code class="docutils literal notranslate"><span class="pre">conf.py</span></code>; rather, giving it on the
<strong class="program">sphinx-build</strong> command line via the <a class="reference internal" href="../../man/sphinx-build.html#cmdoption-sphinx-build-D"><code class="xref std std-option docutils literal notranslate"><span class="pre">-D</span></code></a>
option should be preferable, like this:</p>
<div class="highlight-rest notranslate"><div class="highlight"><pre><span></span>sphinx-build -b html -D imgmath_latex=C:\tex\latex.exe . _build/html
</pre></div>
</div>
<p>This value should only contain the path to the latex executable, not further
arguments; use <a class="reference internal" href="#confval-imgmath_latex_args"><code class="xref std std-confval docutils literal notranslate"><span class="pre">imgmath_latex_args</span></code></a> for that purpose.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>Some fancy LaTeX mark-up (an example was reported which used TikZ to add
various decorations to the equation) require multiple runs of the LaTeX
executable.  To handle this, set this configuration setting to
<code class="docutils literal notranslate"><span class="pre">'latexmk'</span></code> (or a full path to it) as this Perl script reliably
chooses dynamically how many latex runs are needed.</p>
</div>
</dd></dl>
<dl class="std confval">
<dt class="sig sig-object std" id="confval-imgmath_latex_args">
<span class="sig-name descname"><span class="pre">imgmath_latex_args</span></span><a class="headerlink" href="#confval-imgmath_latex_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Additional arguments to give to latex, as a list.  The default is an empty
list.</p>
</dd></dl>
<dl class="std confval">
<dt class="sig sig-object std" id="confval-imgmath_latex_preamble">
<span class="sig-name descname"><span class="pre">imgmath_latex_preamble</span></span><a class="headerlink" href="#confval-imgmath_latex_preamble" title="Permalink to this definition">¶</a></dt>
<dd><p>Additional LaTeX code to put into the preamble of the LaTeX files used to
translate the math snippets.  This is left empty by default.  Use it
e.g. to add packages which modify the fonts used for math, such as
<code class="docutils literal notranslate"><span class="pre">'\\usepackage{newtxsf}'</span></code> for sans-serif fonts, or
<code class="docutils literal notranslate"><span class="pre">'\\usepackage{fouriernc}'</span></code> for serif fonts.  Indeed, the default LaTeX
math fonts have rather thin glyphs which (in HTML output) often do not
match well with the font for text.</p>
</dd></dl>
<dl class="std confval">
<dt class="sig sig-object std" id="confval-imgmath_dvipng">
<span class="sig-name descname"><span class="pre">imgmath_dvipng</span></span><a class="headerlink" href="#confval-imgmath_dvipng" title="Permalink to this definition">¶</a></dt>
<dd><p>The command name to invoke <code class="docutils literal notranslate"><span class="pre">dvipng</span></code>.  The default is
<code class="docutils literal notranslate"><span class="pre">'dvipng'</span></code>; you may need to set this to a full path if <code class="docutils literal notranslate"><span class="pre">dvipng</span></code> is not in
the executable search path. This option is only used when
<code class="docutils literal notranslate"><span class="pre">imgmath_image_format</span></code> is set to <code class="docutils literal notranslate"><span class="pre">'png'</span></code>.</p>
</dd></dl>
<dl class="std confval">
<dt class="sig sig-object std" id="confval-imgmath_dvipng_args">
<span class="sig-name descname"><span class="pre">imgmath_dvipng_args</span></span><a class="headerlink" href="#confval-imgmath_dvipng_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Additional arguments to give to dvipng, as a list.  The default value is
<code class="docutils literal notranslate"><span class="pre">['-gamma',</span> <span class="pre">'1.5',</span> <span class="pre">'-D',</span> <span class="pre">'110',</span> <span class="pre">'-bg',</span> <span class="pre">'Transparent']</span></code> which makes the
image a bit darker and larger then it is by default (this compensates
somewhat for the thinness of default LaTeX math fonts), and produces PNGs with a
transparent background.  This option is used only when
<code class="docutils literal notranslate"><span class="pre">imgmath_image_format</span></code> is <code class="docutils literal notranslate"><span class="pre">'png'</span></code>.</p>
</dd></dl>
<dl class="std confval">
<dt class="sig sig-object std" id="confval-imgmath_dvisvgm">
<span class="sig-name descname"><span class="pre">imgmath_dvisvgm</span></span><a class="headerlink" href="#confval-imgmath_dvisvgm" title="Permalink to this definition">¶</a></dt>
<dd><p>The command name to invoke <code class="docutils literal notranslate"><span class="pre">dvisvgm</span></code>.  The default is
<code class="docutils literal notranslate"><span class="pre">'dvisvgm'</span></code>; you may need to set this to a full path if <code class="docutils literal notranslate"><span class="pre">dvisvgm</span></code> is not
in the executable search path.  This option is only used when
<code class="docutils literal notranslate"><span class="pre">imgmath_image_format</span></code> is <code class="docutils literal notranslate"><span class="pre">'svg'</span></code>.</p>
</dd></dl>
<dl class="std confval">
<dt class="sig sig-object std" id="confval-imgmath_dvisvgm_args">
<span class="sig-name descname"><span class="pre">imgmath_dvisvgm_args</span></span><a class="headerlink" href="#confval-imgmath_dvisvgm_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Additional arguments to give to dvisvgm, as a list. The default value is
<code class="docutils literal notranslate"><span class="pre">['--no-fonts']</span></code>, which means that <code class="docutils literal notranslate"><span class="pre">dvisvgm</span></code> will render glyphs as path
elements (cf the <a class="reference external" href="https://dvisvgm.de/FAQ">dvisvgm FAQ</a>). This option is used only when
<code class="docutils literal notranslate"><span class="pre">imgmath_image_format</span></code> is <code class="docutils literal notranslate"><span class="pre">'svg'</span></code>.</p>
</dd></dl>
<dl class="std confval">
<dt class="sig sig-object std" id="confval-imgmath_embed">
<span class="sig-name descname"><span class="pre">imgmath_embed</span></span><a class="headerlink" href="#confval-imgmath_embed" title="Permalink to this definition">¶</a></dt>
<dd><p>Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.  If true, encode LaTeX output images within HTML files
(base64 encoded) and do not save separate png/svg files to disk.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 5.2.</span></p>
</div>
</dd></dl>
</section>
<section id="module-sphinx.ext.mathjax">
<span id="sphinx-ext-mathjax-render-math-via-javascript"></span><h2><a class="reference internal" href="#module-sphinx.ext.mathjax" title="sphinx.ext.mathjax: Render math using JavaScript via MathJax."><code class="xref py py-mod docutils literal notranslate"><span class="pre">sphinx.ext.mathjax</span></code></a> – Render math via JavaScript<a class="headerlink" href="#module-sphinx.ext.mathjax" title="Permalink to this heading">¶</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Version 4.0 changes the version of MathJax used to version 3. You may need to
override <code class="docutils literal notranslate"><span class="pre">mathjax_path</span></code> to
<code class="docutils literal notranslate"><span class="pre">https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML</span></code>
or update your configuration options for version 3
(see <a class="reference internal" href="#confval-mathjax3_config"><code class="xref std std-confval docutils literal notranslate"><span class="pre">mathjax3_config</span></code></a>).</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.1.</span></p>
</div>
<p>This extension puts math as-is into the HTML files.  The JavaScript package
<a class="reference external" href="https://www.mathjax.org/">MathJax</a> is then loaded and transforms the LaTeX markup to readable math live in
the browser.</p>
<p>Because MathJax (and the necessary fonts) is very large, it is not included in
Sphinx but is set to automatically include it from a third-party site.</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>You should use the math <a class="reference internal" href="../restructuredtext/directives.html#directive-math" title="math directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">directive</span></code></a> and
<a class="reference internal" href="../restructuredtext/roles.html#role-math" title="math role"><code class="xref rst rst-role docutils literal notranslate"><span class="pre">role</span></code></a>, not the native MathJax <code class="docutils literal notranslate"><span class="pre">$$</span></code>, <code class="docutils literal notranslate"><span class="pre">\(</span></code>, etc.</p>
</div>
<dl class="std confval">
<dt class="sig sig-object std" id="confval-mathjax_path">
<span class="sig-name descname"><span class="pre">mathjax_path</span></span><a class="headerlink" href="#confval-mathjax_path" title="Permalink to this definition">¶</a></dt>
<dd><p>The path to the JavaScript file to include in the HTML files in order to load
MathJax.</p>
<p>The default is the <code class="docutils literal notranslate"><span class="pre">https://</span></code> URL that loads the JS files from the
<a class="reference external" href="https://www.jsdelivr.com/">jsdelivr</a> Content Delivery Network. See the <a class="reference external" href="https://www.mathjax.org/#gettingstarted">MathJax Getting Started
page</a> for details. If you want MathJax to be available offline or
without including resources from a third-party site, you have to
download it and set this value to a different path.</p>
<p>The path can be absolute or relative; if it is relative, it is relative to
the <code class="docutils literal notranslate"><span class="pre">_static</span></code> directory of the built docs.</p>
<p>For example, if you put MathJax into the static path of the Sphinx docs, this
value would be <code class="docutils literal notranslate"><span class="pre">MathJax/MathJax.js</span></code>.  If you host more than one Sphinx
documentation set on one server, it is advisable to install MathJax in a
shared location.</p>
<p>You can also give a full <code class="docutils literal notranslate"><span class="pre">https://</span></code> URL different from the CDN URL.</p>
</dd></dl>
<dl class="std confval">
<dt class="sig sig-object std" id="confval-mathjax_options">
<span class="sig-name descname"><span class="pre">mathjax_options</span></span><a class="headerlink" href="#confval-mathjax_options" title="Permalink to this definition">¶</a></dt>
<dd><p>The options to script tag for mathjax.  For example, you can set integrity
option with following setting:</p>
<div class="highlight-rest notranslate"><div class="highlight"><pre><span></span>mathjax_options = {
    'integrity': 'sha384-......',
}
</pre></div>
</div>
<p>The default is empty (<code class="docutils literal notranslate"><span class="pre">{}</span></code>).</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.8.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 4.4.1: </span>Allow to change the loading method (async or defer) of MathJax if “async”
or “defer” key is set.</p>
</div>
</dd></dl>
<dl class="std confval">
<dt class="sig sig-object std" id="confval-mathjax3_config">
<span class="sig-name descname"><span class="pre">mathjax3_config</span></span><a class="headerlink" href="#confval-mathjax3_config" title="Permalink to this definition">¶</a></dt>
<dd><p>The configuration options for MathJax v3 (which is used by default).
The given dictionary is assigned to the JavaScript variable
<code class="docutils literal notranslate"><span class="pre">window.MathJax</span></code>.
For more information, please read <a class="reference external" href="https://docs.mathjax.org/en/latest/web/configuration.html#configuration">Configuring MathJax</a>.</p>
<p>The default is empty (not configured).</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 4.0.</span></p>
</div>
</dd></dl>
<dl class="std confval">
<dt class="sig sig-object std" id="confval-mathjax2_config">
<span class="sig-name descname"><span class="pre">mathjax2_config</span></span><a class="headerlink" href="#confval-mathjax2_config" title="Permalink to this definition">¶</a></dt>
<dd><p>The configuration options for MathJax v2 (which can be loaded via
<a class="reference internal" href="#confval-mathjax_path"><code class="xref std std-confval docutils literal notranslate"><span class="pre">mathjax_path</span></code></a>).
The value is used as a parameter of <code class="docutils literal notranslate"><span class="pre">MathJax.Hub.Config()</span></code>.
For more information, please read <a class="reference external" href="https://docs.mathjax.org/en/v2.7-latest/configuration.html#using-in-line-configuration-options">Using in-line configuration options</a>.</p>
<p>For example:</p>
<div class="highlight-rest notranslate"><div class="highlight"><pre><span></span>mathjax2_config = {
    'extensions': ['tex2jax.js'],
    'jax': ['input/TeX', 'output/HTML-CSS'],
}
</pre></div>
</div>
<p>The default is empty (not configured).</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 4.0: </span><a class="reference internal" href="#confval-mathjax_config"><code class="xref std std-confval docutils literal notranslate"><span class="pre">mathjax_config</span></code></a> has been renamed to <a class="reference internal" href="#confval-mathjax2_config"><code class="xref std std-confval docutils literal notranslate"><span class="pre">mathjax2_config</span></code></a>.</p>
</div>
</dd></dl>
<dl class="std confval">
<dt class="sig sig-object std" id="confval-mathjax_config">
<span class="sig-name descname"><span class="pre">mathjax_config</span></span><a class="headerlink" href="#confval-mathjax_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Former name of <a class="reference internal" href="#confval-mathjax2_config"><code class="xref std std-confval docutils literal notranslate"><span class="pre">mathjax2_config</span></code></a>.</p>
<p>For help converting your old MathJax configuration to to the new
<a class="reference internal" href="#confval-mathjax3_config"><code class="xref std std-confval docutils literal notranslate"><span class="pre">mathjax3_config</span></code></a>, see <a class="reference external" href="https://docs.mathjax.org/en/latest/web/configuration.html#converting-your-v2-configuration-to-v3">Converting Your v2 Configuration to v3</a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.8.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 4.0: </span>This has been renamed to <a class="reference internal" href="#confval-mathjax2_config"><code class="xref std std-confval docutils literal notranslate"><span class="pre">mathjax2_config</span></code></a>.
<a class="reference internal" href="#confval-mathjax_config"><code class="xref std std-confval docutils literal notranslate"><span class="pre">mathjax_config</span></code></a> is still supported for backwards compatibility.</p>
</div>
</dd></dl>
</section>
<section id="module-sphinx.ext.jsmath">
<span id="sphinx-ext-jsmath-render-math-via-javascript"></span><h2><a class="reference internal" href="#module-sphinx.ext.jsmath" title="sphinx.ext.jsmath: Render math using JavaScript via JSMath."><code class="xref py py-mod docutils literal notranslate"><span class="pre">sphinx.ext.jsmath</span></code></a> – Render math via JavaScript<a class="headerlink" href="#module-sphinx.ext.jsmath" title="Permalink to this heading">¶</a></h2>
<p>This extension works just as the MathJax extension does, but uses the older
package <a class="reference external" href="http://www.math.union.edu/~dpvc/jsmath/">jsMath</a>.  It provides this config value:</p>
<dl class="std confval">
<dt class="sig sig-object std" id="confval-jsmath_path">
<span class="sig-name descname"><span class="pre">jsmath_path</span></span><a class="headerlink" href="#confval-jsmath_path" title="Permalink to this definition">¶</a></dt>
<dd><p>The path to the JavaScript file to include in the HTML files in order to load
JSMath.  There is no default.</p>
<p>The path can be absolute or relative; if it is relative, it is relative to
the <code class="docutils literal notranslate"><span class="pre">_static</span></code> directory of the built docs.</p>
<p>For example, if you put JSMath into the static path of the Sphinx docs, this
value would be <code class="docutils literal notranslate"><span class="pre">jsMath/easy/load.js</span></code>.  If you host more than one
Sphinx documentation set on one server, it is advisable to install jsMath in
a shared location.</p>
</dd></dl>
</section>
</section>
</div>
</div>
<div class="footer" role="contentinfo">
  © <a href="../../copyright.html">Copyright</a> 2007-2022, the Sphinx developers.
  Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
</div>
<script>var embed_css = function() {
    Array.from(document.querySelectorAll("link")).forEach( link => {
        if (link.getAttribute('rel') == 'stylesheet') {
            const style = document.createElement("style");
            var href = link.getAttribute('href');
            let [path, get_parameters, anchor] = split_url(href);
            path = normalize_path(path);
            style.innerText = retrieve_file(path);
            link.replaceWith(style);
        };
    });
};


var embed_js = function() {
    Array.from(document.querySelectorAll("script")).forEach( oldScript => {
        const newScript = document.createElement("script");
        Array.from(oldScript.attributes).forEach( attr => {
            newScript.setAttribute(attr.name, attr.value);
        });
        try {
            if (newScript.hasAttribute('src') && is_virtual(newScript.getAttribute('src'))) {
                var src = newScript.getAttribute('src');
                let [path, get_parameters, anchor] = split_url(src);
                path = normalize_path(path);
                var src = retrieve_file(path) + ' //# sourceMap=' + path;
                newScript.appendChild(document.createTextNode(src));
                newScript.removeAttribute('src');
                oldScript.parentNode.replaceChild(newScript, oldScript);
            }
        } catch (e) {
            // Make sure all scripts are loaded
            console.error("Caught error in " + oldScript.getAttribute("src"), e);
        }
    });
};


var split_url = function(url) {
    // Return a list of three elements: path, GET parameters, anchor
    var anchor = url.split('#')[1] || "";
    var get_parameters = url.split('#')[0].split('?')[1] || "";
    var path = url.split('#')[0];
    path = path.split('?')[0];
    let result = [path, get_parameters, anchor];
    // console.log("Split URL", url, result);
    return result;
}


var virtual_click = function(evnt) {
    // Handle GET parameters and anchors
    // console.log("Virtual click", evnt);

    var el = evnt.currentTarget;
    var name = el.tagName.toLowerCase();

    if (name == 'a') {
        var [path, get_parameters, anchor] = split_url(el.getAttribute('href'));
    } else if (name == 'form') {
        var [path, get_parameters, anchor] = split_url(el.getAttribute('action'));
        const formData = new FormData(el);
        get_parameters = new URLSearchParams(formData).toString();
    } else {
        console.error("Invalid element", el);
    }

    path = normalize_path(path);

    window.parent.postMessage({
        action: "virtual_click",
        argument: {
            path: path,
            get_parameters: get_parameters,
            anchor: anchor,
        }
    }, '*');
    evnt.preventDefault();
    evnt.stopPropagation();
    return false;
};

var fix_links = function() {
    Array.from(document.querySelectorAll("a")).forEach( a => {
        fix_link(a);
    });
};

var fix_link = function(a) {
    if (is_virtual(a.getAttribute('href'))) {
        a.addEventListener('click', virtual_click);
    } else if (a.getAttribute('href').startsWith('#')) {
        a.setAttribute('href', "about:srcdoc" + a.getAttribute('href'))
    } else {
        // External links should open in a new tab. Browsers block links to
        // sites of different origin within an iframe for security reasons.
        a.setAttribute('target', "_blank");
    }
};

var fix_form = function(form) {
    var href = form.getAttribute('action');
    if (is_virtual(href) && form.getAttribute('method').toLowerCase() == 'get') {
        form.addEventListener('submit', virtual_click);
    }
};


var fix_forms = function() {
    Array.from(document.querySelectorAll("form")).forEach( form => {
        fix_form(form);
    });
};


var embed_img = function(img) {
    if (img.hasAttribute('src')) {
        const src = img.getAttribute('src');
        if (is_virtual(src)) {
            var path = normalize_path(src);
            const file = retrieve_file(path);
            const mime_type = window.global_context.file_tree[path].mime_type;
            if (mime_type == 'image/svg+xml') {
                img.setAttribute('src', "data:image/svg+xml;charset=utf-8;base64, " + btoa(file));
            } else {
                img.setAttribute('src', `data:${mime_type};base64, ${file}`);
            }
        };
    };
};

var embed_imgs = function() {
    Array.from(document.querySelectorAll("img")).forEach( img => {
        embed_img(img);
    });
};

var is_virtual = function(url) {
    // Return true if the url should be retrieved from the virtual file tree
    var _url = url.toString().toLowerCase();
    return (! (
        _url == "" ||
        _url[0] == "#" ||
        _url.startsWith('https://') ||
        _url.startsWith('http://') ||
        _url.startsWith('data:') ||
        _url.startsWith('blob:')
    ));
};

var retrieve_file = function(path) {
    // console.log("Retrieving file: " + path);
    var file_tree = window.global_context.file_tree;
    var file = file_tree[path];
    if (!file) {
        console.warn("File not found: " + path);
        return "";
    } else {
        return file.data;
    }
};

var normalize_path = function(path) {
    // make relative paths absolute in context of our virtual file tree

    while (path && path[0] == '/') {
        path = path.substr(1);
    }

    var result = window.global_context.current_path;
    result = result.split('/');
    result.pop();
    result = result.concat(path.split('/'));

    // resolve relative directories
    var array = [];
    Array.from(result).forEach( component => {
        if (component == '..') {
            if (array) {
                array.pop();
            }
        } else if (component == '.') {
        } else {
            if (component) { array.push(component); }
        }
    });

    result = array.join('/');
    // console.log(`Normalized path: ${path} -> ${result} (@${window.global_context.current_path})`);
    return result;
};


var fix_document = function() {
    embed_js(); // This might change the DOM, so do this first
    monkey_patch();
    embed_css();
    embed_imgs();
    fix_links();
    fix_forms();
};


var on_set_data = function(argument) {
    window.global_context = argument;
    console.log("Received data from parent", window.global_context);
    // dynamically fix elements on this page
    try {
        fix_document();
        // Trigger DOMContentLoaded again, some scripts that have just
        // been executed expect it.
        window.document.dispatchEvent(new Event("DOMContentLoaded", {
            bubbles: true,
            cancelable: true
        }));
    } finally {
        observer.observe(window.document.body, {subtree: true, childList: true});
        window.parent.postMessage({
            action: "show_iframe",
            argument: "",
        }, '*');
    }
}


var on_scroll_to_anchor = function(argument) {
    if (window.global_context.anchor) {
        document.location.replace("about:srcdoc#" + window.global_context.anchor);
    }
}


const observer = new MutationObserver((mutationList) => {
    // console.log("Fix mutated elements...", mutationList);
    mutationList.forEach((mutation) => {
        if (mutation.type == 'childList') {
            Array.from(mutation.target.querySelectorAll("a")).forEach( a => {
                fix_link(a);
            });
            Array.from(mutation.target.querySelectorAll("img")).forEach( img => {
                embed_img(img);
            });
            Array.from(mutation.target.querySelectorAll("form")).forEach( form => {
                fix_form(form);
            });
        }
    });
});


var monkey_patch = function() {
    if (typeof jQuery === 'undefined') {return;} // Only for jQuery at the moment
    /**
     * Monkey patch getQueryParameters
     * This function is defined in Sphinx' (v4) doctools.js and incompatible with our
     * approach.
     * This is a copy with effectively only the third line changed.
     * See: https://github.com/sphinx-doc/sphinx/blob/2329fdef8c20c6c75194f5d842b8f62ebad5c79d/sphinx/themes/basic/static/doctools.js#L54
     */
    jQuery._getQueryParameters = jQuery.getQueryParameters;
    jQuery.getQueryParameters = function(s) {
      if (typeof s === 'undefined')
        s = '?' + window.global_context.get_parameters;
      return jQuery._getQueryParameters(s);
    };

    /**
     * Monkey patch jQuery.ajax
     * Only settings.url and settings.complete are supported for virtual
     * URLs.
     */
    jQuery._ajax = jQuery.ajax;
    jQuery.ajax = function(settings) {
        url = normalize_path(settings.url);
        if (is_virtual(url)) {
            var result;
            var data;
            data = retrieve_file(url);
            result = settings.complete({responseText: data}, "");
            return; // Return value not actually needed in searchtools.js
        } else {
            return jQuery.ajax(settings);
        };
    };
}


var on_load = function() {
    // Set up message listener
    window.addEventListener("message", (evnt) => {
        console.log("Received message in iframe", evnt);
        if (evnt.data.action == 'set_data') {
            on_set_data(evnt.data.argument);
        } else if (evnt.data.action == 'scroll_to_anchor') {
            on_scroll_to_anchor(evnt.data.argument);
        }
    }, false);

    // Set parent window title and trigger data transmission
    var favicon = window.document.querySelector("link[rel*='icon']");
    if (favicon) { favicon = favicon.getAttribute('href'); }
    var title = window.document.querySelector('head>title');
    if (title) { title = title.innerText; }

    window.parent.postMessage({
        action: "set_title",
        argument: {
            title: title,
            favicon: favicon
        }
    }, '*');

};


window.addEventListener('load', on_load);
//# sourceURL=inject_post.js</script></body>
</html>