<!DOCTYPE html>
<html lang="en">
<head><script>/*
 * Monkeypatch URLSearchParams
 *
 * Sphinx documents that use `searchtool.js` rely on passing information via
 * GET parameters (aka search parameters). Unfortunately, this doesn't work
 * in our approach due to the same origin policy, so we have to get ...
 * creative.
 *
 * Here, we patch the `URLSearchParams` class so it returns the information
 * stored in `window.global_context.get_parameters`.
 *
 */

const originalGet = URLSearchParams.prototype.get;

var myGet = function (arg) {
    const originalResult = originalGet.apply(this, [arg]);
    // If searchtools.js of sphinx is used
    if (
        window.global_context.get_parameters &&
        (window.location.search === "") &&
        (Array.from(this.entries()).length == 0)
    ) {
        const params = new URLSearchParams('?' + window.global_context.get_parameters);
        const result = params.get(arg);
        // console.log("Return virtual get parameter:", arg, result);
        return result;
    } else {
        return originalResult;
    }
};

URLSearchParams.prototype.get = myGet;

/*
 * Monkeypatch fetch
 */

const { fetch: originalFetch } = window;

window.fetch = async (...args) => {
    let [resource, config ] = args;
    var path = normalize_path(resource);
    var response;
    if (is_virtual(path)) {
        var data = retrieve_file(path);
        response = new Response(data);

    } else {
        response = await originalFetch(resource, config);
    }
    return response;
};
//# sourceURL=inject_pre.js</script>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><meta content="Docutils 0.17.1: http://docutils.sourceforge.net/" name="generator"/>
<title>Utilities — Sphinx documentation</title>
<link href="../_static/pygments.css" rel="stylesheet" type="text/css"/>
<link href="../_static/basic.css" rel="stylesheet" type="text/css"/>
<link href="../_static/graphviz.css" rel="stylesheet" type="text/css"/>
<link href="../_static/sphinx13.css" rel="stylesheet" type="text/css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.13.1/underscore-min.js"></script>
<script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
<script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
<script src="../_static/jquery.js"></script>
<script src="../_static/underscore.js"></script>
<script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
<script src="../_static/doctools.js"></script>
<script src="../_static/sphinx_highlight.js"></script>
<link href="https://www.sphinx-doc.org/en/master/extdev/utils.html" rel="canonical"/>
<link href="../_static/opensearch.xml" rel="search" title="Search within Sphinx documentation" type="application/opensearchdescription+xml"/>
<link href="../_static/favicon.svg" rel="shortcut icon"/>
<link href="../genindex.html" rel="index" title="Index"/>
<link href="../search.html" rel="search" title="Search"/>
<link href="deprecated.html" rel="next" title="Deprecated APIs"/>
<link href="i18n.html" rel="prev" title="i18n API"/>
</head><body>
<div class="pageheader">
<a href="../index.html">
<img alt="SPHINX" src="../_static/sphinxheader.png"/>
</a>
</div>
<div aria-label="related navigation" class="related" role="navigation">
<h3>Navigation</h3>
<ul>
<li><a href="../index.html">Documentation</a> »</li>
<li class="nav-item nav-item-1"><a accesskey="U" href="index.html">Developing extensions for Sphinx</a> »</li>
<li class="nav-item nav-item-this"><a href="">Utilities</a></li>
</ul>
</div>
<div class="document">
<div aria-label="main navigation" class="sphinxsidebar" role="navigation">
<div id="searchbox" role="search" style="display: none">
<h3 id="searchlabel">Quick search</h3>
<div class="searchformwrapper">
<form action="../search.html" class="search" method="get">
<input aria-labelledby="searchlabel" autocapitalize="off" autocomplete="off" autocorrect="off" name="q" spellcheck="false" type="text"/>
<input type="submit" value="Go"/>
</form>
</div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
<div class="sphinxsidebar-navigation__contents">
<h3>On this page</h3>
<ul>
<li><a class="reference internal" href="#">Utilities</a><ul>
<li><a class="reference internal" href="#base-classes-for-components">Base classes for components</a><ul>
<li><a class="reference internal" href="#sphinx.transforms.SphinxTransform"><code class="docutils literal notranslate"><span class="pre">SphinxTransform</span></code></a><ul>
<li><a class="reference internal" href="#sphinx.transforms.SphinxTransform.app"><code class="docutils literal notranslate"><span class="pre">SphinxTransform.app</span></code></a></li>
<li><a class="reference internal" href="#sphinx.transforms.SphinxTransform.config"><code class="docutils literal notranslate"><span class="pre">SphinxTransform.config</span></code></a></li>
<li><a class="reference internal" href="#sphinx.transforms.SphinxTransform.env"><code class="docutils literal notranslate"><span class="pre">SphinxTransform.env</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sphinx.transforms.post_transforms.SphinxPostTransform"><code class="docutils literal notranslate"><span class="pre">SphinxPostTransform</span></code></a><ul>
<li><a class="reference internal" href="#sphinx.transforms.post_transforms.SphinxPostTransform.apply"><code class="docutils literal notranslate"><span class="pre">SphinxPostTransform.apply()</span></code></a></li>
<li><a class="reference internal" href="#sphinx.transforms.post_transforms.SphinxPostTransform.is_supported"><code class="docutils literal notranslate"><span class="pre">SphinxPostTransform.is_supported()</span></code></a></li>
<li><a class="reference internal" href="#sphinx.transforms.post_transforms.SphinxPostTransform.run"><code class="docutils literal notranslate"><span class="pre">SphinxPostTransform.run()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sphinx.util.docutils.SphinxDirective"><code class="docutils literal notranslate"><span class="pre">SphinxDirective</span></code></a><ul>
<li><a class="reference internal" href="#sphinx.util.docutils.SphinxDirective.get_location"><code class="docutils literal notranslate"><span class="pre">SphinxDirective.get_location()</span></code></a></li>
<li><a class="reference internal" href="#sphinx.util.docutils.SphinxDirective.get_source_info"><code class="docutils literal notranslate"><span class="pre">SphinxDirective.get_source_info()</span></code></a></li>
<li><a class="reference internal" href="#sphinx.util.docutils.SphinxDirective.set_source_info"><code class="docutils literal notranslate"><span class="pre">SphinxDirective.set_source_info()</span></code></a></li>
<li><a class="reference internal" href="#sphinx.util.docutils.SphinxDirective.config"><code class="docutils literal notranslate"><span class="pre">SphinxDirective.config</span></code></a></li>
<li><a class="reference internal" href="#sphinx.util.docutils.SphinxDirective.env"><code class="docutils literal notranslate"><span class="pre">SphinxDirective.env</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sphinx.util.docutils.SphinxRole"><code class="docutils literal notranslate"><span class="pre">SphinxRole</span></code></a><ul>
<li><a class="reference internal" href="#sphinx.util.docutils.SphinxRole.get_location"><code class="docutils literal notranslate"><span class="pre">SphinxRole.get_location()</span></code></a></li>
<li><a class="reference internal" href="#sphinx.util.docutils.SphinxRole.config"><code class="docutils literal notranslate"><span class="pre">SphinxRole.config</span></code></a></li>
<li><a class="reference internal" href="#sphinx.util.docutils.SphinxRole.content"><code class="docutils literal notranslate"><span class="pre">SphinxRole.content</span></code></a></li>
<li><a class="reference internal" href="#sphinx.util.docutils.SphinxRole.env"><code class="docutils literal notranslate"><span class="pre">SphinxRole.env</span></code></a></li>
<li><a class="reference internal" href="#sphinx.util.docutils.SphinxRole.inliner"><code class="docutils literal notranslate"><span class="pre">SphinxRole.inliner</span></code></a></li>
<li><a class="reference internal" href="#sphinx.util.docutils.SphinxRole.lineno"><code class="docutils literal notranslate"><span class="pre">SphinxRole.lineno</span></code></a></li>
<li><a class="reference internal" href="#sphinx.util.docutils.SphinxRole.name"><code class="docutils literal notranslate"><span class="pre">SphinxRole.name</span></code></a></li>
<li><a class="reference internal" href="#sphinx.util.docutils.SphinxRole.options"><code class="docutils literal notranslate"><span class="pre">SphinxRole.options</span></code></a></li>
<li><a class="reference internal" href="#sphinx.util.docutils.SphinxRole.rawtext"><code class="docutils literal notranslate"><span class="pre">SphinxRole.rawtext</span></code></a></li>
<li><a class="reference internal" href="#sphinx.util.docutils.SphinxRole.text"><code class="docutils literal notranslate"><span class="pre">SphinxRole.text</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sphinx.util.docutils.ReferenceRole"><code class="docutils literal notranslate"><span class="pre">ReferenceRole</span></code></a><ul>
<li><a class="reference internal" href="#sphinx.util.docutils.ReferenceRole.disabled"><code class="docutils literal notranslate"><span class="pre">ReferenceRole.disabled</span></code></a></li>
<li><a class="reference internal" href="#sphinx.util.docutils.ReferenceRole.has_explicit_title"><code class="docutils literal notranslate"><span class="pre">ReferenceRole.has_explicit_title</span></code></a></li>
<li><a class="reference internal" href="#sphinx.util.docutils.ReferenceRole.target"><code class="docutils literal notranslate"><span class="pre">ReferenceRole.target</span></code></a></li>
<li><a class="reference internal" href="#sphinx.util.docutils.ReferenceRole.title"><code class="docutils literal notranslate"><span class="pre">ReferenceRole.title</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sphinx.transforms.post_transforms.images.ImageConverter"><code class="docutils literal notranslate"><span class="pre">ImageConverter</span></code></a><ul>
<li><a class="reference internal" href="#sphinx.transforms.post_transforms.images.ImageConverter.convert"><code class="docutils literal notranslate"><span class="pre">ImageConverter.convert()</span></code></a></li>
<li><a class="reference internal" href="#sphinx.transforms.post_transforms.images.ImageConverter.is_available"><code class="docutils literal notranslate"><span class="pre">ImageConverter.is_available()</span></code></a></li>
<li><a class="reference internal" href="#sphinx.transforms.post_transforms.images.ImageConverter.available"><code class="docutils literal notranslate"><span class="pre">ImageConverter.available</span></code></a></li>
<li><a class="reference internal" href="#sphinx.transforms.post_transforms.images.ImageConverter.conversion_rules"><code class="docutils literal notranslate"><span class="pre">ImageConverter.conversion_rules</span></code></a></li>
<li><a class="reference internal" href="#sphinx.transforms.post_transforms.images.ImageConverter.default_priority"><code class="docutils literal notranslate"><span class="pre">ImageConverter.default_priority</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#utility-components">Utility components</a><ul>
<li><a class="reference internal" href="#sphinx.events.EventManager"><code class="docutils literal notranslate"><span class="pre">EventManager</span></code></a><ul>
<li><a class="reference internal" href="#sphinx.events.EventManager.add"><code class="docutils literal notranslate"><span class="pre">EventManager.add()</span></code></a></li>
<li><a class="reference internal" href="#sphinx.events.EventManager.connect"><code class="docutils literal notranslate"><span class="pre">EventManager.connect()</span></code></a></li>
<li><a class="reference internal" href="#sphinx.events.EventManager.disconnect"><code class="docutils literal notranslate"><span class="pre">EventManager.disconnect()</span></code></a></li>
<li><a class="reference internal" href="#sphinx.events.EventManager.emit"><code class="docutils literal notranslate"><span class="pre">EventManager.emit()</span></code></a></li>
<li><a class="reference internal" href="#sphinx.events.EventManager.emit_firstresult"><code class="docutils literal notranslate"><span class="pre">EventManager.emit_firstresult()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="sphinxsidebar-navigation__pages">
<h3>Site navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Get started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../usage/quickstart.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/installation.html">Installing Sphinx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">Tutorial: Build your first project</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Guides</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../usage/index.html">Using Sphinx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">Extending Sphinx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../templating.html">Templating</a></li>
<li class="toctree-l1"><a class="reference internal" href="../latex.html">LaTeX customization</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developing extensions for Sphinx</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="appapi.html">Application API</a></li>
<li class="toctree-l2"><a class="reference internal" href="projectapi.html">Project API</a></li>
<li class="toctree-l2"><a class="reference internal" href="envapi.html">Build environment API</a></li>
<li class="toctree-l2"><a class="reference internal" href="builderapi.html">Builder API</a></li>
<li class="toctree-l2"><a class="reference internal" href="collectorapi.html">Environment Collector API</a></li>
<li class="toctree-l2"><a class="reference internal" href="markupapi.html">Docutils markup API</a></li>
<li class="toctree-l2"><a class="reference internal" href="domainapi.html">Domain API</a></li>
<li class="toctree-l2"><a class="reference internal" href="parserapi.html">Parser API</a></li>
<li class="toctree-l2"><a class="reference internal" href="nodes.html">Doctree node classes added by Sphinx</a></li>
<li class="toctree-l2"><a class="reference internal" href="logging.html">Logging API</a></li>
<li class="toctree-l2"><a class="reference internal" href="i18n.html">i18n API</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="deprecated.html">Deprecated APIs</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Community</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../support.html">Get support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../internals/index.html">Contribute to Sphinx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Sphinx FAQ</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../man/index.html">Command-Line Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changes.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples.html">Projects using Sphinx</a></li>
</ul>
</div>
</div>
<div class="body" role="main">
<section id="utilities">
<h1>Utilities<a class="headerlink" href="#utilities" title="Permalink to this heading">¶</a></h1>
<p>Sphinx provides utility classes and functions to develop extensions.</p>
<section id="base-classes-for-components">
<h2>Base classes for components<a class="headerlink" href="#base-classes-for-components" title="Permalink to this heading">¶</a></h2>
<p>These base classes are useful to allow your extensions to obtain Sphinx
components (e.g. <a class="reference internal" href="appapi.html#sphinx.config.Config" title="sphinx.config.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">Config</span></code></a>, <a class="reference internal" href="envapi.html#sphinx.environment.BuildEnvironment" title="sphinx.environment.BuildEnvironment"><code class="xref py py-class docutils literal notranslate"><span class="pre">BuildEnvironment</span></code></a> and so on) easily.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The subclasses of them might not work with bare docutils because they
are strongly coupled with Sphinx.</p>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="sphinx.transforms.SphinxTransform">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sphinx.transforms.</span></span><span class="sig-name descname"><span class="pre">SphinxTransform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">document</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">startnode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sphinx/transforms.html#SphinxTransform"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sphinx.transforms.SphinxTransform" title="Permalink to this definition">¶</a></dt>
<dd><p>A base class of Transforms.</p>
<p>Compared with <code class="docutils literal notranslate"><span class="pre">docutils.transforms.Transform</span></code>, this class improves accessibility to
Sphinx APIs.</p>
<dl class="py property">
<dt class="sig sig-object py" id="sphinx.transforms.SphinxTransform.app">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">app</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="appapi.html#sphinx.application.Sphinx" title="sphinx.application.Sphinx"><span class="pre">Sphinx</span></a></em><a class="headerlink" href="#sphinx.transforms.SphinxTransform.app" title="Permalink to this definition">¶</a></dt>
<dd><p>Reference to the <a class="reference internal" href="appapi.html#sphinx.application.Sphinx" title="sphinx.application.Sphinx"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sphinx</span></code></a> object.</p>
</dd></dl>
<dl class="py property">
<dt class="sig sig-object py" id="sphinx.transforms.SphinxTransform.config">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="appapi.html#sphinx.config.Config" title="sphinx.config.Config"><span class="pre">Config</span></a></em><a class="headerlink" href="#sphinx.transforms.SphinxTransform.config" title="Permalink to this definition">¶</a></dt>
<dd><p>Reference to the <a class="reference internal" href="appapi.html#sphinx.config.Config" title="sphinx.config.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">Config</span></code></a> object.</p>
</dd></dl>
<dl class="py property">
<dt class="sig sig-object py" id="sphinx.transforms.SphinxTransform.env">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">env</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="envapi.html#sphinx.environment.BuildEnvironment" title="sphinx.environment.BuildEnvironment"><span class="pre">BuildEnvironment</span></a></em><a class="headerlink" href="#sphinx.transforms.SphinxTransform.env" title="Permalink to this definition">¶</a></dt>
<dd><p>Reference to the <a class="reference internal" href="envapi.html#sphinx.environment.BuildEnvironment" title="sphinx.environment.BuildEnvironment"><code class="xref py py-class docutils literal notranslate"><span class="pre">BuildEnvironment</span></code></a> object.</p>
</dd></dl>
</dd></dl>
<dl class="py class">
<dt class="sig sig-object py" id="sphinx.transforms.post_transforms.SphinxPostTransform">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sphinx.transforms.post_transforms.</span></span><span class="sig-name descname"><span class="pre">SphinxPostTransform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">document</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">startnode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sphinx/transforms/post_transforms.html#SphinxPostTransform"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sphinx.transforms.post_transforms.SphinxPostTransform" title="Permalink to this definition">¶</a></dt>
<dd><p>A base class of post-transforms.</p>
<p>Post transforms are invoked to modify the document to restructure it for outputting.
They resolve references, convert images, do special transformation for each output
formats and so on.  This class helps to implement these post transforms.</p>
<dl class="py method">
<dt class="sig sig-object py" id="sphinx.transforms.post_transforms.SphinxPostTransform.apply">
<span class="sig-name descname"><span class="pre">apply</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/sphinx/transforms/post_transforms.html#SphinxPostTransform.apply"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sphinx.transforms.post_transforms.SphinxPostTransform.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Override to apply the transform to the document tree.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="sphinx.transforms.post_transforms.SphinxPostTransform.is_supported">
<span class="sig-name descname"><span class="pre">is_supported</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></span><a class="reference internal" href="../_modules/sphinx/transforms/post_transforms.html#SphinxPostTransform.is_supported"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sphinx.transforms.post_transforms.SphinxPostTransform.is_supported" title="Permalink to this definition">¶</a></dt>
<dd><p>Check this transform working for current builder.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="sphinx.transforms.post_transforms.SphinxPostTransform.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/sphinx/transforms/post_transforms.html#SphinxPostTransform.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sphinx.transforms.post_transforms.SphinxPostTransform.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Main method of post transforms.</p>
<p>Subclasses should override this method instead of <code class="docutils literal notranslate"><span class="pre">apply()</span></code>.</p>
</dd></dl>
</dd></dl>
<dl class="py class">
<dt class="sig sig-object py" id="sphinx.util.docutils.SphinxDirective">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sphinx.util.docutils.</span></span><span class="sig-name descname"><span class="pre">SphinxDirective</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arguments</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lineno</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content_offset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block_text</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state_machine</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sphinx/util/docutils.html#SphinxDirective"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sphinx.util.docutils.SphinxDirective" title="Permalink to this definition">¶</a></dt>
<dd><p>A base class for Sphinx directives.</p>
<p>This class provides helper methods for Sphinx directives.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The subclasses of this class might not work with docutils.
This class is strongly coupled with Sphinx.</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sphinx.util.docutils.SphinxDirective.get_location">
<span class="sig-name descname"><span class="pre">get_location</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></span><a class="reference internal" href="../_modules/sphinx/util/docutils.html#SphinxDirective.get_location"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sphinx.util.docutils.SphinxDirective.get_location" title="Permalink to this definition">¶</a></dt>
<dd><p>Get current location info for logging.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="sphinx.util.docutils.SphinxDirective.get_source_info">
<span class="sig-name descname"><span class="pre">get_source_info</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/sphinx/util/docutils.html#SphinxDirective.get_source_info"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sphinx.util.docutils.SphinxDirective.get_source_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Get source and line number.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="sphinx.util.docutils.SphinxDirective.set_source_info">
<span class="sig-name descname"><span class="pre">set_source_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Node</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/sphinx/util/docutils.html#SphinxDirective.set_source_info"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sphinx.util.docutils.SphinxDirective.set_source_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Set source and line number to the node.</p>
</dd></dl>
<dl class="py property">
<dt class="sig sig-object py" id="sphinx.util.docutils.SphinxDirective.config">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="appapi.html#sphinx.config.Config" title="sphinx.config.Config"><span class="pre">Config</span></a></em><a class="headerlink" href="#sphinx.util.docutils.SphinxDirective.config" title="Permalink to this definition">¶</a></dt>
<dd><p>Reference to the <a class="reference internal" href="appapi.html#sphinx.config.Config" title="sphinx.config.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">Config</span></code></a> object.</p>
</dd></dl>
<dl class="py property">
<dt class="sig sig-object py" id="sphinx.util.docutils.SphinxDirective.env">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">env</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="envapi.html#sphinx.environment.BuildEnvironment" title="sphinx.environment.BuildEnvironment"><span class="pre">BuildEnvironment</span></a></em><a class="headerlink" href="#sphinx.util.docutils.SphinxDirective.env" title="Permalink to this definition">¶</a></dt>
<dd><p>Reference to the <a class="reference internal" href="envapi.html#sphinx.environment.BuildEnvironment" title="sphinx.environment.BuildEnvironment"><code class="xref py py-class docutils literal notranslate"><span class="pre">BuildEnvironment</span></code></a> object.</p>
</dd></dl>
</dd></dl>
<dl class="py class">
<dt class="sig sig-object py" id="sphinx.util.docutils.SphinxRole">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sphinx.util.docutils.</span></span><span class="sig-name descname"><span class="pre">SphinxRole</span></span><a class="reference internal" href="../_modules/sphinx/util/docutils.html#SphinxRole"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sphinx.util.docutils.SphinxRole" title="Permalink to this definition">¶</a></dt>
<dd><p>A base class for Sphinx roles.</p>
<p>This class provides helper methods for Sphinx roles.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The subclasses of this class might not work with docutils.
This class is strongly coupled with Sphinx.</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sphinx.util.docutils.SphinxRole.get_location">
<span class="sig-name descname"><span class="pre">get_location</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></span><a class="reference internal" href="../_modules/sphinx/util/docutils.html#SphinxRole.get_location"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sphinx.util.docutils.SphinxRole.get_location" title="Permalink to this definition">¶</a></dt>
<dd><p>Get current location info for logging.</p>
</dd></dl>
<dl class="py property">
<dt class="sig sig-object py" id="sphinx.util.docutils.SphinxRole.config">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="appapi.html#sphinx.config.Config" title="sphinx.config.Config"><span class="pre">Config</span></a></em><a class="headerlink" href="#sphinx.util.docutils.SphinxRole.config" title="Permalink to this definition">¶</a></dt>
<dd><p>Reference to the <a class="reference internal" href="appapi.html#sphinx.config.Config" title="sphinx.config.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">Config</span></code></a> object.</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="sphinx.util.docutils.SphinxRole.content">
<span class="sig-name descname"><span class="pre">content</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.10)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#sphinx.util.docutils.SphinxRole.content" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of strings, the directive content for customization</p>
</dd></dl>
<dl class="py property">
<dt class="sig sig-object py" id="sphinx.util.docutils.SphinxRole.env">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">env</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="envapi.html#sphinx.environment.BuildEnvironment" title="sphinx.environment.BuildEnvironment"><span class="pre">BuildEnvironment</span></a></em><a class="headerlink" href="#sphinx.util.docutils.SphinxRole.env" title="Permalink to this definition">¶</a></dt>
<dd><p>Reference to the <a class="reference internal" href="envapi.html#sphinx.environment.BuildEnvironment" title="sphinx.environment.BuildEnvironment"><code class="xref py py-class docutils literal notranslate"><span class="pre">BuildEnvironment</span></code></a> object.</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="sphinx.util.docutils.SphinxRole.inliner">
<span class="sig-name descname"><span class="pre">inliner</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Inliner</span></em><a class="headerlink" href="#sphinx.util.docutils.SphinxRole.inliner" title="Permalink to this definition">¶</a></dt>
<dd><p>The <code class="docutils literal notranslate"><span class="pre">docutils.parsers.rst.states.Inliner</span></code> object.</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="sphinx.util.docutils.SphinxRole.lineno">
<span class="sig-name descname"><span class="pre">lineno</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></em><a class="headerlink" href="#sphinx.util.docutils.SphinxRole.lineno" title="Permalink to this definition">¶</a></dt>
<dd><p>The line number where the interpreted text begins.</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="sphinx.util.docutils.SphinxRole.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></em><a class="headerlink" href="#sphinx.util.docutils.SphinxRole.name" title="Permalink to this definition">¶</a></dt>
<dd><p>The role name actually used in the document.</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="sphinx.util.docutils.SphinxRole.options">
<span class="sig-name descname"><span class="pre">options</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a></em><a class="headerlink" href="#sphinx.util.docutils.SphinxRole.options" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary of directive options for customization</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="sphinx.util.docutils.SphinxRole.rawtext">
<span class="sig-name descname"><span class="pre">rawtext</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></em><a class="headerlink" href="#sphinx.util.docutils.SphinxRole.rawtext" title="Permalink to this definition">¶</a></dt>
<dd><p>A string containing the entire interpreted text input.</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="sphinx.util.docutils.SphinxRole.text">
<span class="sig-name descname"><span class="pre">text</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></em><a class="headerlink" href="#sphinx.util.docutils.SphinxRole.text" title="Permalink to this definition">¶</a></dt>
<dd><p>The interpreted text content.</p>
</dd></dl>
</dd></dl>
<dl class="py class">
<dt class="sig sig-object py" id="sphinx.util.docutils.ReferenceRole">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sphinx.util.docutils.</span></span><span class="sig-name descname"><span class="pre">ReferenceRole</span></span><a class="reference internal" href="../_modules/sphinx/util/docutils.html#ReferenceRole"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sphinx.util.docutils.ReferenceRole" title="Permalink to this definition">¶</a></dt>
<dd><p>A base class for reference roles.</p>
<p>The reference roles can accept <code class="docutils literal notranslate"><span class="pre">link</span> <span class="pre">title</span> <span class="pre">&lt;target&gt;</span></code> style as a text for
the role.  The parsed result; link title and target will be stored to
<code class="docutils literal notranslate"><span class="pre">self.title</span></code> and <code class="docutils literal notranslate"><span class="pre">self.target</span></code>.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="sphinx.util.docutils.ReferenceRole.disabled">
<span class="sig-name descname"><span class="pre">disabled</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></em><a class="headerlink" href="#sphinx.util.docutils.ReferenceRole.disabled" title="Permalink to this definition">¶</a></dt>
<dd><p>A boolean indicates the reference is disabled.</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="sphinx.util.docutils.ReferenceRole.has_explicit_title">
<span class="sig-name descname"><span class="pre">has_explicit_title</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></em><a class="headerlink" href="#sphinx.util.docutils.ReferenceRole.has_explicit_title" title="Permalink to this definition">¶</a></dt>
<dd><p>A boolean indicates the role has explicit title or not.</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="sphinx.util.docutils.ReferenceRole.target">
<span class="sig-name descname"><span class="pre">target</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></em><a class="headerlink" href="#sphinx.util.docutils.ReferenceRole.target" title="Permalink to this definition">¶</a></dt>
<dd><p>The link target for the interpreted text.</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="sphinx.util.docutils.ReferenceRole.title">
<span class="sig-name descname"><span class="pre">title</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></em><a class="headerlink" href="#sphinx.util.docutils.ReferenceRole.title" title="Permalink to this definition">¶</a></dt>
<dd><p>The link title for the interpreted text.</p>
</dd></dl>
</dd></dl>
<dl class="py class">
<dt class="sig sig-object py" id="sphinx.transforms.post_transforms.images.ImageConverter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sphinx.transforms.post_transforms.images.</span></span><span class="sig-name descname"><span class="pre">ImageConverter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sphinx/transforms/post_transforms/images.html#ImageConverter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sphinx.transforms.post_transforms.images.ImageConverter" title="Permalink to this definition">¶</a></dt>
<dd><p>A base class for image converters.</p>
<p>An image converter is kind of Docutils transform module.  It is used to
convert image files which are not supported by a builder to the
appropriate format for that builder.</p>
<p>For example, <a class="reference internal" href="../usage/builders/index.html#sphinx.builders.latex.LaTeXBuilder" title="sphinx.builders.latex.LaTeXBuilder"><code class="xref py py-class docutils literal notranslate"><span class="pre">LaTeX</span> <span class="pre">builder</span></code></a> supports PDF,
PNG and JPEG as image formats.  However it does not support SVG images.
For such case, using image converters allows to embed these
unsupported images into the document.  One of the image converters;
<a class="reference internal" href="../usage/extensions/imgconverter.html#sphinx-ext-imgconverter"><span class="std std-ref">sphinx.ext.imgconverter</span></a> can convert
a SVG image to PNG format using Imagemagick internally.</p>
<p>There are three steps to make your custom image converter:</p>
<ol class="arabic simple">
<li><p>Make a subclass of <code class="docutils literal notranslate"><span class="pre">ImageConverter</span></code> class</p></li>
<li><p>Override <code class="docutils literal notranslate"><span class="pre">conversion_rules</span></code>, <code class="docutils literal notranslate"><span class="pre">is_available()</span></code> and <code class="docutils literal notranslate"><span class="pre">convert()</span></code></p></li>
<li><p>Register your image converter to Sphinx using
<a class="reference internal" href="appapi.html#sphinx.application.Sphinx.add_post_transform" title="sphinx.application.Sphinx.add_post_transform"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Sphinx.add_post_transform()</span></code></a></p></li>
</ol>
<dl class="py method">
<dt class="sig sig-object py" id="sphinx.transforms.post_transforms.images.ImageConverter.convert">
<span class="sig-name descname"><span class="pre">convert</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_from</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">_to</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></span><a class="reference internal" href="../_modules/sphinx/transforms/post_transforms/images.html#ImageConverter.convert"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sphinx.transforms.post_transforms.images.ImageConverter.convert" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert an image file to the expected format.</p>
<p><em>_from</em> is a path of the source image file, and <em>_to</em> is a path
of the destination file.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="sphinx.transforms.post_transforms.images.ImageConverter.is_available">
<span class="sig-name descname"><span class="pre">is_available</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></span><a class="reference internal" href="../_modules/sphinx/transforms/post_transforms/images.html#ImageConverter.is_available"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sphinx.transforms.post_transforms.images.ImageConverter.is_available" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the image converter is available or not.</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="sphinx.transforms.post_transforms.images.ImageConverter.available">
<span class="sig-name descname"><span class="pre">available</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#sphinx.transforms.post_transforms.images.ImageConverter.available" title="Permalink to this definition">¶</a></dt>
<dd><p>The converter is available or not.  Will be filled at the first call of
the build.  The result is shared in the same process.</p>
<div class="admonition-todo admonition" id="id1">
<p class="admonition-title">Todo</p>
<p>This should be refactored not to store the state without class
variable.</p>
</div>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="sphinx.transforms.post_transforms.images.ImageConverter.conversion_rules">
<span class="sig-name descname"><span class="pre">conversion_rules</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.10)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[]</span></em><a class="headerlink" href="#sphinx.transforms.post_transforms.images.ImageConverter.conversion_rules" title="Permalink to this definition">¶</a></dt>
<dd><p>A conversion rules the image converter supports.
It is represented as a list of pair of source image format (mimetype) and
destination one:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conversion_rules</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s1">'image/svg+xml'</span><span class="p">,</span> <span class="s1">'image/png'</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">'image/gif'</span><span class="p">,</span> <span class="s1">'image/png'</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">'application/pdf'</span><span class="p">,</span> <span class="s1">'image/png'</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="sphinx.transforms.post_transforms.images.ImageConverter.default_priority">
<span class="sig-name descname"><span class="pre">default_priority</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">200</span></em><a class="headerlink" href="#sphinx.transforms.post_transforms.images.ImageConverter.default_priority" title="Permalink to this definition">¶</a></dt>
<dd><p>Numerical priority of this transform, 0 through 999 (override).</p>
</dd></dl>
</dd></dl>
</section>
<section id="utility-components">
<h2>Utility components<a class="headerlink" href="#utility-components" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="sphinx.events.EventManager">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sphinx.events.</span></span><span class="sig-name descname"><span class="pre">EventManager</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="appapi.html#sphinx.application.Sphinx" title="sphinx.application.Sphinx"><span class="pre">Sphinx</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sphinx/events.html#EventManager"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sphinx.events.EventManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Event manager for Sphinx.</p>
<dl class="py method">
<dt class="sig sig-object py" id="sphinx.events.EventManager.add">
<span class="sig-name descname"><span class="pre">add</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/sphinx/events.html#EventManager.add"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sphinx.events.EventManager.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a custom Sphinx event.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="sphinx.events.EventManager.connect">
<span class="sig-name descname"><span class="pre">connect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.10)"><span class="pre">Callable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">priority</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></span><a class="reference internal" href="../_modules/sphinx/events.html#EventManager.connect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sphinx.events.EventManager.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Connect a handler to specific event.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="sphinx.events.EventManager.disconnect">
<span class="sig-name descname"><span class="pre">disconnect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">listener_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/sphinx/events.html#EventManager.disconnect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sphinx.events.EventManager.disconnect" title="Permalink to this definition">¶</a></dt>
<dd><p>Disconnect a handler.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="sphinx.events.EventManager.emit">
<span class="sig-name descname"><span class="pre">emit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed_exceptions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.10)"><span class="pre">Type</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.10)"><span class="pre">Exception</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">()</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.10)"><span class="pre">List</span></a></span></span><a class="reference internal" href="../_modules/sphinx/events.html#EventManager.emit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sphinx.events.EventManager.emit" title="Permalink to this definition">¶</a></dt>
<dd><p>Emit a Sphinx event.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="sphinx.events.EventManager.emit_firstresult">
<span class="sig-name descname"><span class="pre">emit_firstresult</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed_exceptions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.10)"><span class="pre">Type</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.10)"><span class="pre">Exception</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">()</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a></span></span><a class="reference internal" href="../_modules/sphinx/events.html#EventManager.emit_firstresult"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sphinx.events.EventManager.emit_firstresult" title="Permalink to this definition">¶</a></dt>
<dd><p>Emit a Sphinx event and returns first result.</p>
<p>This returns the result of the first handler that doesn’t return <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd></dl>
</dd></dl>
</section>
</section>
</div>
</div>
<div class="footer" role="contentinfo">
  © <a href="../copyright.html">Copyright</a> 2007-2022, the Sphinx developers.
  Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
</div>
<script>var embed_css = function() {
    Array.from(document.querySelectorAll("link")).forEach( link => {
        if (link.getAttribute('rel') == 'stylesheet') {
            const style = document.createElement("style");
            var href = link.getAttribute('href');
            let [path, get_parameters, anchor] = split_url(href);
            path = normalize_path(path);
            style.innerText = retrieve_file(path);
            link.replaceWith(style);
        };
    });
};


var embed_js = function() {
    Array.from(document.querySelectorAll("script")).forEach( oldScript => {
        const newScript = document.createElement("script");
        Array.from(oldScript.attributes).forEach( attr => {
            newScript.setAttribute(attr.name, attr.value);
        });
        try {
            if (newScript.hasAttribute('src') && is_virtual(newScript.getAttribute('src'))) {
                var src = newScript.getAttribute('src');
                let [path, get_parameters, anchor] = split_url(src);
                path = normalize_path(path);
                var src = retrieve_file(path) + ' //# sourceMap=' + path;
                newScript.appendChild(document.createTextNode(src));
                newScript.removeAttribute('src');
                oldScript.parentNode.replaceChild(newScript, oldScript);
            }
        } catch (e) {
            // Make sure all scripts are loaded
            console.error("Caught error in " + oldScript.getAttribute("src"), e);
        }
    });
};


var split_url = function(url) {
    // Return a list of three elements: path, GET parameters, anchor
    var anchor = url.split('#')[1] || "";
    var get_parameters = url.split('#')[0].split('?')[1] || "";
    var path = url.split('#')[0];
    path = path.split('?')[0];
    let result = [path, get_parameters, anchor];
    // console.log("Split URL", url, result);
    return result;
}


var virtual_click = function(evnt) {
    // Handle GET parameters and anchors
    // console.log("Virtual click", evnt);

    var el = evnt.currentTarget;
    var name = el.tagName.toLowerCase();

    if (name == 'a') {
        var [path, get_parameters, anchor] = split_url(el.getAttribute('href'));
    } else if (name == 'form') {
        var [path, get_parameters, anchor] = split_url(el.getAttribute('action'));
        const formData = new FormData(el);
        get_parameters = new URLSearchParams(formData).toString();
    } else {
        console.error("Invalid element", el);
    }

    path = normalize_path(path);

    window.parent.postMessage({
        action: "virtual_click",
        argument: {
            path: path,
            get_parameters: get_parameters,
            anchor: anchor,
        }
    }, '*');
    evnt.preventDefault();
    evnt.stopPropagation();
    return false;
};

var fix_links = function() {
    Array.from(document.querySelectorAll("a")).forEach( a => {
        fix_link(a);
    });
};

var fix_link = function(a) {
    if (is_virtual(a.getAttribute('href'))) {
        a.addEventListener('click', virtual_click);
    } else if (a.getAttribute('href').startsWith('#')) {
        a.setAttribute('href', "about:srcdoc" + a.getAttribute('href'))
    } else {
        // External links should open in a new tab. Browsers block links to
        // sites of different origin within an iframe for security reasons.
        a.setAttribute('target', "_blank");
    }
};

var fix_form = function(form) {
    var href = form.getAttribute('action');
    if (is_virtual(href) && form.getAttribute('method').toLowerCase() == 'get') {
        form.addEventListener('submit', virtual_click);
    }
};


var fix_forms = function() {
    Array.from(document.querySelectorAll("form")).forEach( form => {
        fix_form(form);
    });
};


var embed_img = function(img) {
    if (img.hasAttribute('src')) {
        const src = img.getAttribute('src');
        if (is_virtual(src)) {
            var path = normalize_path(src);
            const file = retrieve_file(path);
            const mime_type = window.global_context.file_tree[path].mime_type;
            if (mime_type == 'image/svg+xml') {
                img.setAttribute('src', "data:image/svg+xml;charset=utf-8;base64, " + btoa(file));
            } else {
                img.setAttribute('src', `data:${mime_type};base64, ${file}`);
            }
        };
    };
};

var embed_imgs = function() {
    Array.from(document.querySelectorAll("img")).forEach( img => {
        embed_img(img);
    });
};

var is_virtual = function(url) {
    // Return true if the url should be retrieved from the virtual file tree
    var _url = url.toString().toLowerCase();
    return (! (
        _url == "" ||
        _url[0] == "#" ||
        _url.startsWith('https://') ||
        _url.startsWith('http://') ||
        _url.startsWith('data:') ||
        _url.startsWith('blob:')
    ));
};

var retrieve_file = function(path) {
    // console.log("Retrieving file: " + path);
    var file_tree = window.global_context.file_tree;
    var file = file_tree[path];
    if (!file) {
        console.warn("File not found: " + path);
        return "";
    } else {
        return file.data;
    }
};

var normalize_path = function(path) {
    // make relative paths absolute in context of our virtual file tree

    while (path && path[0] == '/') {
        path = path.substr(1);
    }

    var result = window.global_context.current_path;
    result = result.split('/');
    result.pop();
    result = result.concat(path.split('/'));

    // resolve relative directories
    var array = [];
    Array.from(result).forEach( component => {
        if (component == '..') {
            if (array) {
                array.pop();
            }
        } else if (component == '.') {
        } else {
            if (component) { array.push(component); }
        }
    });

    result = array.join('/');
    // console.log(`Normalized path: ${path} -> ${result} (@${window.global_context.current_path})`);
    return result;
};


var fix_document = function() {
    embed_js(); // This might change the DOM, so do this first
    monkey_patch();
    embed_css();
    embed_imgs();
    fix_links();
    fix_forms();
};


var on_set_data = function(argument) {
    window.global_context = argument;
    console.log("Received data from parent", window.global_context);
    // dynamically fix elements on this page
    try {
        fix_document();
        // Trigger DOMContentLoaded again, some scripts that have just
        // been executed expect it.
        window.document.dispatchEvent(new Event("DOMContentLoaded", {
            bubbles: true,
            cancelable: true
        }));
    } finally {
        observer.observe(window.document.body, {subtree: true, childList: true});
        window.parent.postMessage({
            action: "show_iframe",
            argument: "",
        }, '*');
    }
}


var on_scroll_to_anchor = function(argument) {
    if (window.global_context.anchor) {
        document.location.replace("about:srcdoc#" + window.global_context.anchor);
    }
}


const observer = new MutationObserver((mutationList) => {
    // console.log("Fix mutated elements...", mutationList);
    mutationList.forEach((mutation) => {
        if (mutation.type == 'childList') {
            Array.from(mutation.target.querySelectorAll("a")).forEach( a => {
                fix_link(a);
            });
            Array.from(mutation.target.querySelectorAll("img")).forEach( img => {
                embed_img(img);
            });
            Array.from(mutation.target.querySelectorAll("form")).forEach( form => {
                fix_form(form);
            });
        }
    });
});


var monkey_patch = function() {
    if (typeof jQuery === 'undefined') {return;} // Only for jQuery at the moment
    /**
     * Monkey patch getQueryParameters
     * This function is defined in Sphinx' (v4) doctools.js and incompatible with our
     * approach.
     * This is a copy with effectively only the third line changed.
     * See: https://github.com/sphinx-doc/sphinx/blob/2329fdef8c20c6c75194f5d842b8f62ebad5c79d/sphinx/themes/basic/static/doctools.js#L54
     */
    jQuery._getQueryParameters = jQuery.getQueryParameters;
    jQuery.getQueryParameters = function(s) {
      if (typeof s === 'undefined')
        s = '?' + window.global_context.get_parameters;
      return jQuery._getQueryParameters(s);
    };

    /**
     * Monkey patch jQuery.ajax
     * Only settings.url and settings.complete are supported for virtual
     * URLs.
     */
    jQuery._ajax = jQuery.ajax;
    jQuery.ajax = function(settings) {
        url = normalize_path(settings.url);
        if (is_virtual(url)) {
            var result;
            var data;
            data = retrieve_file(url);
            result = settings.complete({responseText: data}, "");
            return; // Return value not actually needed in searchtools.js
        } else {
            return jQuery.ajax(settings);
        };
    };
}


var on_load = function() {
    // Set up message listener
    window.addEventListener("message", (evnt) => {
        console.log("Received message in iframe", evnt);
        if (evnt.data.action == 'set_data') {
            on_set_data(evnt.data.argument);
        } else if (evnt.data.action == 'scroll_to_anchor') {
            on_scroll_to_anchor(evnt.data.argument);
        }
    }, false);

    // Set parent window title and trigger data transmission
    var favicon = window.document.querySelector("link[rel*='icon']");
    if (favicon) { favicon = favicon.getAttribute('href'); }
    var title = window.document.querySelector('head>title');
    if (title) { title = title.innerText; }

    window.parent.postMessage({
        action: "set_title",
        argument: {
            title: title,
            favicon: favicon
        }
    }, '*');

};


window.addEventListener('load', on_load);
//# sourceURL=inject_post.js</script></body>
</html>